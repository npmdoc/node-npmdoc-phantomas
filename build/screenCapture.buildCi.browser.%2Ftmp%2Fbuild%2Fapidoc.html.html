<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/macbre/phantomas#readme">phantomas (v1.18.0)</a>
</h1>
<h4>PhantomJS-based web performance metrics collector</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas">module phantomas</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.phantomas">
            function <span class="apidocSignatureSpan"></span>phantomas
            <span class="apidocSignatureSpan">(url, opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert">
            function <span class="apidocSignatureSpan">phantomas.</span>assert
            <span class="apidocSignatureSpan">(value, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection">
            function <span class="apidocSignatureSpan">phantomas.</span>collection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines">
            function <span class="apidocSignatureSpan">phantomas.</span>engines
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc">
            function <span class="apidocSignatureSpan">phantomas.</span>ipc
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats">
            function <span class="apidocSignatureSpan">phantomas.</span>stats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>ajaxRequests</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>alerts</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>analyzeCss</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>ansicolors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>assetsTypes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>blockDomains</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>cacheHits</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>caching</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>collection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>console</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>cookies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>devices</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>documentHeight</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domComplexity</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domHiddenContent</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domMutations</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domQueries</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domains</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>engines.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>fast_stats</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>filmStrip</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>gecko</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>globalVariables</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>har</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>headers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>httpAuth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>ipc.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>jQuery</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>javaScriptBottlenecks</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>jserrors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>keepAlive</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>lazyLoadableImages</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>localStorage</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>mainRequest</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>metadata</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>navigationTiming</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>optimist_config_file</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>pads</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>pageSource</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>postLoadDelay</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>punycode</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>querystring</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>redirects</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>repaints</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>requestsMonitor</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>requestsStats</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>requestsTo</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>screenshot</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>scroll</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>staticAssets</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>stats.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>timeToFirst</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>timeToFirstByte</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>tty</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>url</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>waitForEvent</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>waitForSelector</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>webkit</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>windowPerformance</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.</span>path</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ajaxRequests">module phantomas.ajaxRequests</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ajaxRequests.module">
            function <span class="apidocSignatureSpan">phantomas.ajaxRequests.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.ajaxRequests.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.alerts">module phantomas.alerts</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.alerts.module">
            function <span class="apidocSignatureSpan">phantomas.alerts.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.alerts.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.analyzeCss">module phantomas.analyzeCss</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.analyzeCss.module">
            function <span class="apidocSignatureSpan">phantomas.analyzeCss.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.analyzeCss.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ansicolors">module phantomas.ansicolors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBlack">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlack
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBlue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightBlack">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlack
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightBlue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightCyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightCyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightGreen">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightGreen
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightMagenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightMagenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightRed">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightRed
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightWhite">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightWhite
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightYellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightYellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgCyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgCyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgGreen">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgGreen
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgMagenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgMagenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgRed">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgRed
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgWhite">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgWhite
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgYellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgYellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.black">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>black
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.blue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>blue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightBlack">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlack
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightBlue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightCyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightCyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightGreen">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightGreen
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightMagenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightMagenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightRed">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightRed
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightWhite">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightWhite
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightYellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightYellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.cyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>cyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.disable">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>disable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.green">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>green
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.magenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>magenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.red">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>red
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.white">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>white
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.yellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>yellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.ansicolors.</span>close</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.ansicolors.</span>open</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.assert">module phantomas.assert</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.assert">
            function <span class="apidocSignatureSpan">phantomas.</span>assert
            <span class="apidocSignatureSpan">(value, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.AssertionError">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>AssertionError
            <span class="apidocSignatureSpan">{{signature}}</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.deepEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>deepEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.doesNotThrow">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>doesNotThrow
            <span class="apidocSignatureSpan">(block, error, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.equal">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>equal
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.fail">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>fail
            <span class="apidocSignatureSpan">(actual, expected, message, operator, stackStartFunction)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.ifError">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>ifError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.notDeepEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>notDeepEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.notEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>notEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.notStrictEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>notStrictEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.ok">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>ok
            <span class="apidocSignatureSpan">(value, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.strictEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>strictEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.throws">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>throws
            <span class="apidocSignatureSpan">(block, error, message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.assetsTypes">module phantomas.assetsTypes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assetsTypes.module">
            function <span class="apidocSignatureSpan">phantomas.assetsTypes.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.assetsTypes.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.blockDomains">module phantomas.blockDomains</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.blockDomains.module">
            function <span class="apidocSignatureSpan">phantomas.blockDomains.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.blockDomains.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.cacheHits">module phantomas.cacheHits</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.cacheHits.module">
            function <span class="apidocSignatureSpan">phantomas.cacheHits.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.cacheHits.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.caching">module phantomas.caching</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.caching.module">
            function <span class="apidocSignatureSpan">phantomas.caching.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.caching.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.collection">module phantomas.collection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.collection">
            function <span class="apidocSignatureSpan">phantomas.</span>collection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.collection.prototype">module phantomas.collection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.forEach">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>forEach
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.getLength">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>getLength
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.has">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>has
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.push">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>push
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.sort">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>sort
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.console">module phantomas.console</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.console.module">
            function <span class="apidocSignatureSpan">phantomas.console.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.console.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.cookies">module phantomas.cookies</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.cookies.module">
            function <span class="apidocSignatureSpan">phantomas.cookies.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.cookies.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.devices">module phantomas.devices</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.devices.module">
            function <span class="apidocSignatureSpan">phantomas.devices.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.devices.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.documentHeight">module phantomas.documentHeight</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.documentHeight.module">
            function <span class="apidocSignatureSpan">phantomas.documentHeight.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.documentHeight.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domComplexity">module phantomas.domComplexity</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domComplexity.module">
            function <span class="apidocSignatureSpan">phantomas.domComplexity.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domComplexity.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domHiddenContent">module phantomas.domHiddenContent</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domHiddenContent.module">
            function <span class="apidocSignatureSpan">phantomas.domHiddenContent.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domHiddenContent.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domMutations">module phantomas.domMutations</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domMutations.module">
            function <span class="apidocSignatureSpan">phantomas.domMutations.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domMutations.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domQueries">module phantomas.domQueries</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domQueries.module">
            function <span class="apidocSignatureSpan">phantomas.domQueries.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domQueries.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domains">module phantomas.domains</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domains.module">
            function <span class="apidocSignatureSpan">phantomas.domains.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domains.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.engines">module phantomas.engines</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.engines">
            function <span class="apidocSignatureSpan">phantomas.</span>engines
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.engines.prototype">module phantomas.engines.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.getEngine">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngine
            <span class="apidocSignatureSpan">(engine)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.getEngines">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngines
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.registerEngine">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>registerEngine
            <span class="apidocSignatureSpan">(engineName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.run">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>run
            <span class="apidocSignatureSpan">(scriptFile)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.events">module phantomas.events</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.events.EventEmitter">
            function <span class="apidocSignatureSpan">phantomas.events.</span>EventEmitter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.fast_stats">module phantomas.fast_stats</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.fast_stats.Stats">
            function <span class="apidocSignatureSpan">phantomas.fast_stats.</span>Stats
            <span class="apidocSignatureSpan">(c)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.filmStrip">module phantomas.filmStrip</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.filmStrip.module">
            function <span class="apidocSignatureSpan">phantomas.filmStrip.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.filmStrip.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.gecko">module phantomas.gecko</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.gecko.getUserAgent">
            function <span class="apidocSignatureSpan">phantomas.gecko.</span>getUserAgent
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.gecko.spawn">
            function <span class="apidocSignatureSpan">phantomas.gecko.</span>spawn
            <span class="apidocSignatureSpan">(path, engineArgs)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.gecko.</span>engine</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.gecko.</span>name</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.gecko.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.globalVariables">module phantomas.globalVariables</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.globalVariables.module">
            function <span class="apidocSignatureSpan">phantomas.globalVariables.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.globalVariables.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.har">module phantomas.har</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.har.module">
            function <span class="apidocSignatureSpan">phantomas.har.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.har.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.headers">module phantomas.headers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.headers.module">
            function <span class="apidocSignatureSpan">phantomas.headers.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.headers.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.httpAuth">module phantomas.httpAuth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.httpAuth.module">
            function <span class="apidocSignatureSpan">phantomas.httpAuth.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.httpAuth.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ipc">module phantomas.ipc</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.ipc">
            function <span class="apidocSignatureSpan">phantomas.</span>ipc
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ipc.prototype">module phantomas.ipc.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.init">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.on">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>on
            <span class="apidocSignatureSpan">(event, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.parse">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>parse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.setEventEmitter">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>setEventEmitter
            <span class="apidocSignatureSpan">(emitter)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.jQuery">module phantomas.jQuery</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.jQuery.module">
            function <span class="apidocSignatureSpan">phantomas.jQuery.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.jQuery.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.javaScriptBottlenecks">module phantomas.javaScriptBottlenecks</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.javaScriptBottlenecks.module">
            function <span class="apidocSignatureSpan">phantomas.javaScriptBottlenecks.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.javaScriptBottlenecks.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.jserrors">module phantomas.jserrors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.jserrors.module">
            function <span class="apidocSignatureSpan">phantomas.jserrors.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.jserrors.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.keepAlive">module phantomas.keepAlive</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.keepAlive.module">
            function <span class="apidocSignatureSpan">phantomas.keepAlive.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.keepAlive.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.lazyLoadableImages">module phantomas.lazyLoadableImages</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.lazyLoadableImages.module">
            function <span class="apidocSignatureSpan">phantomas.lazyLoadableImages.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.lazyLoadableImages.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.localStorage">module phantomas.localStorage</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.localStorage.module">
            function <span class="apidocSignatureSpan">phantomas.localStorage.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.localStorage.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.mainRequest">module phantomas.mainRequest</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.mainRequest.module">
            function <span class="apidocSignatureSpan">phantomas.mainRequest.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.mainRequest.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.navigationTiming">module phantomas.navigationTiming</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.navigationTiming.module">
            function <span class="apidocSignatureSpan">phantomas.navigationTiming.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.navigationTiming.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.optimist_config_file">module phantomas.optimist_config_file</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.alias">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>alias
            <span class="apidocSignatureSpan">(x, y)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.boolean">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>boolean
            <span class="apidocSignatureSpan">(bools)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.check">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>check
            <span class="apidocSignatureSpan">(f)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.default">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>default
            <span class="apidocSignatureSpan">(key, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.demand">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>demand
            <span class="apidocSignatureSpan">(keys)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.describe">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>describe
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.header">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>header
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.help">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>help
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.option">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>option
            <span class="apidocSignatureSpan">(key, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.options">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>options
            <span class="apidocSignatureSpan">(key, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.parse">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>parse
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.setConfigFile">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>setConfigFile
            <span class="apidocSignatureSpan">(configFileParam)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.showHelp">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>showHelp
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.string">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>string
            <span class="apidocSignatureSpan">(strings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.usage">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>usage
            <span class="apidocSignatureSpan">(msg, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.wrap">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>wrap
            <span class="apidocSignatureSpan">(cols)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>argv</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>configFileParam</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.pads">module phantomas.pads</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.pads.lpad">
            function <span class="apidocSignatureSpan">phantomas.pads.</span>lpad
            <span class="apidocSignatureSpan">(str, len)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.pads.rpad">
            function <span class="apidocSignatureSpan">phantomas.pads.</span>rpad
            <span class="apidocSignatureSpan">(str, len)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.pageSource">module phantomas.pageSource</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.pageSource.module">
            function <span class="apidocSignatureSpan">phantomas.pageSource.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.pageSource.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.path">module phantomas.path</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path._makeLong">
            function <span class="apidocSignatureSpan">phantomas.path.</span>_makeLong
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.basename">
            function <span class="apidocSignatureSpan">phantomas.path.</span>basename
            <span class="apidocSignatureSpan">(path, ext)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.dirname">
            function <span class="apidocSignatureSpan">phantomas.path.</span>dirname
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.exists">
            function <span class="apidocSignatureSpan">phantomas.path.</span>exists
            <span class="apidocSignatureSpan">(path, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.existsSync">
            function <span class="apidocSignatureSpan">phantomas.path.</span>existsSync
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.extname">
            function <span class="apidocSignatureSpan">phantomas.path.</span>extname
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.join">
            function <span class="apidocSignatureSpan">phantomas.path.</span>join
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.normalize">
            function <span class="apidocSignatureSpan">phantomas.path.</span>normalize
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.relative">
            function <span class="apidocSignatureSpan">phantomas.path.</span>relative
            <span class="apidocSignatureSpan">(from, to)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.resolve">
            function <span class="apidocSignatureSpan">phantomas.path.</span>resolve
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.postLoadDelay">module phantomas.postLoadDelay</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.postLoadDelay.module">
            function <span class="apidocSignatureSpan">phantomas.postLoadDelay.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.postLoadDelay.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.punycode">module phantomas.punycode</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.decode">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>decode
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.encode">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>encode
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.toASCII">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>toASCII
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.toUnicode">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>toUnicode
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.punycode.</span>ucs2</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.punycode.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.querystring">module phantomas.querystring</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.decode">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>decode
            <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.encode">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>encode
            <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.escape">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>escape
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.parse">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>parse
            <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.stringify">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>stringify
            <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.unescape">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescape
            <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.unescapeBuffer">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescapeBuffer
            <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.redirects">module phantomas.redirects</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.redirects.module">
            function <span class="apidocSignatureSpan">phantomas.redirects.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.redirects.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.repaints">module phantomas.repaints</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.repaints.module">
            function <span class="apidocSignatureSpan">phantomas.repaints.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.repaints.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.requestsMonitor">module phantomas.requestsMonitor</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.requestsMonitor.module">
            function <span class="apidocSignatureSpan">phantomas.requestsMonitor.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.requestsMonitor.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.requestsStats">module phantomas.requestsStats</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.requestsStats.module">
            function <span class="apidocSignatureSpan">phantomas.requestsStats.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.requestsStats.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.requestsTo">module phantomas.requestsTo</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.requestsTo.module">
            function <span class="apidocSignatureSpan">phantomas.requestsTo.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.requestsTo.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.screenshot">module phantomas.screenshot</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.screenshot.module">
            function <span class="apidocSignatureSpan">phantomas.screenshot.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.screenshot.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.scroll">module phantomas.scroll</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.scroll.module">
            function <span class="apidocSignatureSpan">phantomas.scroll.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.scroll.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.staticAssets">module phantomas.staticAssets</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.staticAssets.module">
            function <span class="apidocSignatureSpan">phantomas.staticAssets.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.staticAssets.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.stats">module phantomas.stats</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.stats">
            function <span class="apidocSignatureSpan">phantomas.</span>stats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.stats.prototype">module phantomas.stats.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.getAvailableStats">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getAvailableStats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.getMetricStats">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetricStats
            <span class="apidocSignatureSpan">(metricName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.getMetrics">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetrics
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.pushMetrics">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>pushMetrics
            <span class="apidocSignatureSpan">(metrics)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.timeToFirst">module phantomas.timeToFirst</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.timeToFirst.module">
            function <span class="apidocSignatureSpan">phantomas.timeToFirst.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.timeToFirst.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.timeToFirstByte">module phantomas.timeToFirstByte</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.timeToFirstByte.module">
            function <span class="apidocSignatureSpan">phantomas.timeToFirstByte.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.timeToFirstByte.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.tty">module phantomas.tty</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.tty.getWindowSize">
            function <span class="apidocSignatureSpan">phantomas.tty.</span>getWindowSize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.tty.isatty">
            function <span class="apidocSignatureSpan">phantomas.tty.</span>isatty
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.url">module phantomas.url</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.format">
            function <span class="apidocSignatureSpan">phantomas.url.</span>format
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.parse">
            function <span class="apidocSignatureSpan">phantomas.url.</span>parse
            <span class="apidocSignatureSpan">(url, parseQueryString, slashesDenoteHost)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.resolve">
            function <span class="apidocSignatureSpan">phantomas.url.</span>resolve
            <span class="apidocSignatureSpan">(source, relative)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.resolveObject">
            function <span class="apidocSignatureSpan">phantomas.url.</span>resolveObject
            <span class="apidocSignatureSpan">(source, relative)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.util">module phantomas.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.debug">
            function <span class="apidocSignatureSpan">phantomas.util.</span>debug
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.error">
            function <span class="apidocSignatureSpan">phantomas.util.</span>error
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.exec">
            function <span class="apidocSignatureSpan">phantomas.util.</span>exec
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.format">
            function <span class="apidocSignatureSpan">phantomas.util.</span>format
            <span class="apidocSignatureSpan">(f)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.inherits">
            function <span class="apidocSignatureSpan">phantomas.util.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.inspect">
            function <span class="apidocSignatureSpan">phantomas.util.</span>inspect
            <span class="apidocSignatureSpan">(obj, showHidden, depth, colors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isArray">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isArray
            <span class="apidocSignatureSpan">(ar)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isDate">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isDate
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isError">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isError
            <span class="apidocSignatureSpan">(e)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isRegExp">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isRegExp
            <span class="apidocSignatureSpan">(re)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.log">
            function <span class="apidocSignatureSpan">phantomas.util.</span>log
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.p">
            function <span class="apidocSignatureSpan">phantomas.util.</span>p
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.print">
            function <span class="apidocSignatureSpan">phantomas.util.</span>print
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.pump">
            function <span class="apidocSignatureSpan">phantomas.util.</span>pump
            <span class="apidocSignatureSpan">(readStream, writeStream, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.puts">
            function <span class="apidocSignatureSpan">phantomas.util.</span>puts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.waitForEvent">module phantomas.waitForEvent</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.waitForEvent.module">
            function <span class="apidocSignatureSpan">phantomas.waitForEvent.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.waitForEvent.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.waitForSelector">module phantomas.waitForSelector</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.waitForSelector.module">
            function <span class="apidocSignatureSpan">phantomas.waitForSelector.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.waitForSelector.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.webkit">module phantomas.webkit</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.webkit.getUserAgent">
            function <span class="apidocSignatureSpan">phantomas.webkit.</span>getUserAgent
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>engine</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>name</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>path</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.windowPerformance">module phantomas.windowPerformance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.windowPerformance.module">
            function <span class="apidocSignatureSpan">phantomas.windowPerformance.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.windowPerformance.</span>version</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas" id="apidoc.module.phantomas">module phantomas</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.phantomas" id="apidoc.element.phantomas.phantomas">
        function <span class="apidocSignatureSpan"></span>phantomas
        <span class="apidocSignatureSpan">(url, opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function phantomas(url, opts, callback) {
	var engineArgs = [],
		deferred = Q.defer(),
		events = new emitter(),
		proc,
		engine,
		data = '',
		tmpDir,
		options;

	// options can be omitted
	if (typeof opts === 'function') {
		callback = opts;
		opts = {};
	}

	debug('nodejs %s', process.version);
	debug('phantomas v%s installed in %s', VERSION, phantomas.path);
	debug('URL: &lt;%s&gt;', url);
	debug('Options: %s', JSON.stringify(opts));

	// options handling
	options = util._extend({}, opts || {}); // use util._extend to avoid #563
	options.url = options.url || url || false;

	// generate unique temporary directory name
	// and pass it to PhantomJS script as an environment variable
	tmpDir = getTmpDir();
	process.env.PHANTOMAS_TMP_DIR = tmpDir;

	// path to analyze-css main script (#664)
	process.env.ANALYZE_CSS_BIN = require('analyze-css').pathBin;

	debug('Environment: %j', process.env);

	// select the engine and run phantomas
	engine = new Engines(options);
	proc = engine.run(phantomas.path + '/scripts/phantomas.js');

	debug('Spawned with pid #%d', proc.pid);

	proc.on('error', function(err) {
		debug('Error: %s', err);
	});

	<span class="apidocCodeCommentSpan">/**
	 * Set up IPC channel
	 *
	 * It will receive JSON-formatted messages from phantomjs / slimerjs process
	 * (send over stdout stream of spawned process) and emit events
	 */
</span>	var ipc = new(require('./ipc'))(proc.stdout);
	ipc.setEventEmitter(events);

	// pipe log messages to error stream
	var errStream = new Stream.Readable();
	errStream._read = function() {
		return true;
	};

	ipc.on('log', function(msg) {
		errStream.push(msg + "\n");
	});

	// push raw messages from stderr (PhantomJS run in --debug=true mode) to errStream
	proc.stderr.on('data', function(data) {
		var msg = data.toString().
		split('[DEBUG]').pop().
		trim();

		errStream.push('Debug: ' + msg + "\n");
	});

	// handle loading progress
	var progressDebug = require('debug')('phantomas:progress');

	ipc.on('progress', function(progress, inc) {
		progressDebug('%d% (+%d%)', progress, inc);
		deferred.notify(progress / 100);
	});

	// handle --socket &lt;UNIX IPC socket&gt; option
	// @see http://nodejs.org/api/net.html#net_new_net_socket_options
	if (typeof options.socket === 'string') {
		var socket,
			socketName = options.socket;

		// @see http://nodejs.org/api/net.html#net_net_connect_options_connectionlistener
		debug('Using UNIX socket for IPC: %s', socketName);

		socket = new net.Socket();
		socket.connect(socketName, function() {
			debug('Socket connected');
		});

		socket.on('error', function(err) {
			debug('Socket error: %s', err);

			throw 'Socket "' + socketName + '" error - ' + err;
		});

		ipc.on('_msg', function(data) {
			// example: ["metric","bodyHTMLSize",75193]
			socket.write(JSON.stringify(data) + "\n");
		});
	}

	// get JSON results
	ipc.on('json', function(raw) {
		data = raw;
	});

	// failures handling
	var exitCode = 0;
	ipc.on('exit', function(code, msg) {
		if ((code &gt; 0) &amp;&amp; (typeof msg === 'string')) {
			exitCode = code;
			errStream.push('phantomas: (' + code + ') ' + msg + "\n");
		}
	});

	// process results
	proc.on('close', function(code) {
		var debug = require('debug')('phantomas:results'),
			json,
			results;

		// PhantomJS made a core dump (#382)
		if (code === null) {
			code = 255; // EXIT_ERROR
			errStream.push('phantomas: (' + code + ') Engine crashed unexpectedly\n');
		}

		// apply the code from 'exit' event
		code = code || exitCode;

		debug('Process returned code #%d', code);

		// (try to) parse to JSON
		try {
			json = JSON.parse(data);
		} catch (ex) {
			debug('Error when parsing JSON (%s): "%s"', ex, data);
			errStream.push(data);

			// Return EXIT_ERROR when JSON can not be parsed (and there was no error earlier)
			if (code &lt; 250) {
				code = 255;
			}

			errStream.push('phantomas: (' + code + ') Failed to parse JSON with the results\n');
		}

		// finish the readable stream
		errStream.emit('end');

		if (typeof json !== 'undefined') {
			events.emit('data', json);

			// wrap JSON data into results object
			results = new(require('../core/results'))(json ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert" id="apidoc.element.phantomas.assert">
        function <span class="apidocSignatureSpan">phantomas.</span>assert
        <span class="apidocSignatureSpan">(value, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ok(value, message) {
  if (!!!value) fail(value, true, message, '==', assert.ok);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return true;
			}

			return (typeof val === 'number') ? val &lt;= expected : true;
		},
		getFailedAsserts: function() {
			return this.getMetricsNames().filter(function(metric) {
				return this.<span class="apidocCodeKeywordSpan">assert</span>(metric) === false;
			}, this);
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection" id="apidoc.element.phantomas.collection">
        function <span class="apidocSignatureSpan">phantomas.</span>collection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function collection() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.items = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines" id="apidoc.element.phantomas.engines">
        function <span class="apidocSignatureSpan">phantomas.</span>engines
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function engines(options) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.options = options;

	//--debug can be either 'true' or 'false'
	this.options.debug = (this.options.debug === true) ? 'true' : 'false';

	// engines storage
	this.engines = {};
	[
		// the first one is a default one
		'webkit',
		'gecko'
	].forEach(this.registerEngine, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc" id="apidoc.element.phantomas.ipc">
        function <span class="apidocSignatureSpan">phantomas.</span>ipc
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ipc(stream) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.stream = stream;
	this.events = new emitter();

	this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats" id="apidoc.element.phantomas.stats">
        function <span class="apidocSignatureSpan">phantomas.</span>stats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stats() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	// use pushMetrics() to add results for each run
	this.metrics = [];
	this.runs = 0;

	// stats to be calculated
	// @see https://github.com/bluesmoon/node-faststats
	this.stats = {
		min: function(values) {
			return values.range()[0];
		},
		max: function(values) {
			return values.range()[1];
		},
		average: function(values) {
			return values.amean().toFixed(2);
		},
		median: function(values) {
			return values.median().toFixed(2);
		},
		stddev: function(values) {
			return values.stddev().toFixed(2);
		}
	};

	this.statsNames = Object.keys(this.stats);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
































































































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ajaxRequests" id="apidoc.module.phantomas.ajaxRequests">module phantomas.ajaxRequests</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ajaxRequests.module" id="apidoc.element.phantomas.ajaxRequests.module">
        function <span class="apidocSignatureSpan">phantomas.ajaxRequests.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('ajaxRequests'); // @desc number of AJAX requests

	phantomas.on('init', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				phantomas.spy(window.XMLHttpRequest.prototype, 'open', function(result, method, url, async) {
					phantomas.incrMetric('ajaxRequests');
					phantomas.addOffender('ajaxRequests', '&lt;%s&gt; [%s]', url, method);
				}, true);
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.alerts" id="apidoc.module.phantomas.alerts">module phantomas.alerts</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.alerts.module" id="apidoc.element.phantomas.alerts.module">
        function <span class="apidocSignatureSpan">phantomas.alerts.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var alerts = [],
		confirms = [],
		prompts = [];

	phantomas.on('alert', function(msg) {
		alerts.push(msg);
	});

	phantomas.on('confirm', function(msg) {
		confirms.push(msg);
	});

	phantomas.on('prompt', function(msg) {
		prompts.push(msg);
	});

	phantomas.on('report', function() {
		phantomas.setMetric('windowAlerts', alerts.length); // @desc number of calls to window.alert
		phantomas.setMetric('windowConfirms', confirms.length); // @desc number of calls to window.confirm
		phantomas.setMetric('windowPrompts', prompts.length); // @desc number of calls to window.prompt
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.analyzeCss" id="apidoc.module.phantomas.analyzeCss">module phantomas.analyzeCss</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.analyzeCss.module" id="apidoc.element.phantomas.analyzeCss.module">
        function <span class="apidocSignatureSpan">phantomas.analyzeCss.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	if (!phantomas.getParam('analyze-css')) {
		phantomas.log('To enable CSS in-depth metrics please run phantomas with --analyze-css option');
		return;
	}

	phantomas.setMetric('cssParsingErrors'); // @desc number of CSS files (or embeded CSS) that failed to be parse by analyze-css @
optional
	phantomas.setMetric('cssInlineStyles'); // @desc number of inline styles @optional

	function ucfirst(str) {
		// http://kevin.vanzonneveld.net
		// +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
		// +   bugfixed by: Onno Marsman
		// +   improved by: Brett Zamir (http://brett-zamir.me)
		// *     example 1: ucfirst('kevin van zonneveld');
		// *     returns 1: 'Kevin van zonneveld'
		str += '';
		var f = str.charAt(0).toUpperCase();
		return f + str.substr(1);
	}

	// run analyze-css "binary" installed by npm
	function analyzeCss(options) {
		var system = require('system'),
			isWindows = (system.os.name === 'windows'),
			binary = system.env.ANALYZE_CSS_BIN,
			proxy;

		// force JSON output format
		options.push('--json');

		// set basic auth if needed
		if (phantomas.getParam('auth-user') &amp;&amp; phantomas.getParam('auth-pass')) {
			options.push('--auth-user', phantomas.getParam('auth-user'));
			options.push('--auth-pass', phantomas.getParam('auth-pass'));
		}

		// HTTP proxy (#500)
		proxy = phantomas.getParam('proxy', false, 'string');

		if (proxy !== false) {
			if (proxy.indexOf('http:') &lt; 0) {
				proxy = 'http://' + proxy; // http-proxy-agent (used by analyze-css) expects a protocol as well
			}

			options.push('--proxy', proxy);
		}

		phantomas.runScript(binary, options, function(err, results) {
			var offenderSrc = (options[0] === '--url') ? '&lt;' + options[1] + '&gt;' : '[inline CSS]';

			if (err !== null) {
				phantomas.log('analyzeCss: sub-process failed! - %s', err);

				// report failed CSS parsing (issue #494(
				var offender = offenderSrc;
				if (err.message) { // Error object returned
					if (err.message.indexOf('Unable to parse JSON string') &gt; 0) {
						offender += ' (analyzeCss output error)';
					}
				} else { // Error string returned (stderror)
					if (err.indexOf('CSS parsing failed') &gt; 0 || err.indexOf('is an invalid expression') &gt; 0) {
						offender += ' (' + err.trim() + ')';
					} else if (err.indexOf('Empty CSS was provided') &gt; 0) {
						offender += ' (Empty CSS was provided)';
					}
				}

				phantomas.incrMetric('cssParsingErrors');
				phantomas.addOffender('cssParsingErrors', offender);
				return;
			}

			phantomas.log('analyzeCss: using ' + results.generator);

			var metrics = results.metrics || {},
				offenders = results.offenders || {};

			Object.keys(metrics).forEach(function(metric) {
				var metricPrefixed = 'css' + ucfirst(metric);

				if (/Avg$/.test(metricPrefixed)) {
					// update the average value (see #641)
					phantomas.addToAvgMetric(metricPrefixed, metrics[metric]);
				} else {
					// increase metrics
					phantomas.incrMetric(metricPrefixed, metrics[metric]);
				}

				// and add offenders
				if (typeof offenders[metric] !== 'undefined') {
					offenders[metric].forEach(function(msg) {
						var re = / @ \d+:\d+$/;

						// add the file name to offenders (issue #442)
						// the message ends with something similar to " @ 25:1"
						if (re.test(msg)) {
							msg = msg.replace(re, ' ' + offenderSrc + '$&amp;');
						}

						phantomas.addOffender(metricPrefixed, msg);
					});
				}
				// add more offenders (#578)
				else {
					switch (metricPrefixed) {
						case 'cssLength':
						case 'cssRules':
						case 'cssSelectors':
						case 'cssDeclarations':
						case 'cssNotMinified':
						case 'cssSelectorLengthAvg':
						case 'cssSpecificityIdAvg':
						case 'cssSpecificityClassAvg':
						case 'cssSpecificityTagAvg':
							phantomas.addOffender(metricPrefixed, offenderSrc + ': ' + metrics[metric]);
							break;
					}
				}
			});
		});
	}

	phantomas.on('recv', function(entry, res) {
		if (entry.isCSS) {
			phantomas.log('CSS: analyzing &lt;%s&gt;...', entry.url);
			analyzeCss(['--url', entry.url]);
		}
	}); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ansicolors" id="apidoc.module.phantomas.ansicolors">module phantomas.ansicolors</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBlack" id="apidoc.element.phantomas.ansicolors.bgBlack">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlack
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBlack = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBlue" id="apidoc.element.phantomas.ansicolors.bgBlue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBlue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightBlack" id="apidoc.element.phantomas.ansicolors.bgBrightBlack">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlack
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightBlack = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightBlue" id="apidoc.element.phantomas.ansicolors.bgBrightBlue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightBlue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightCyan" id="apidoc.element.phantomas.ansicolors.bgBrightCyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightCyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightCyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightGreen" id="apidoc.element.phantomas.ansicolors.bgBrightGreen">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightGreen
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightGreen = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightMagenta" id="apidoc.element.phantomas.ansicolors.bgBrightMagenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightMagenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightMagenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightRed" id="apidoc.element.phantomas.ansicolors.bgBrightRed">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightRed
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightRed = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightWhite" id="apidoc.element.phantomas.ansicolors.bgBrightWhite">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightWhite
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightWhite = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightYellow" id="apidoc.element.phantomas.ansicolors.bgBrightYellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightYellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightYellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgCyan" id="apidoc.element.phantomas.ansicolors.bgCyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgCyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgCyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgGreen" id="apidoc.element.phantomas.ansicolors.bgGreen">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgGreen
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgGreen = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgMagenta" id="apidoc.element.phantomas.ansicolors.bgMagenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgMagenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgMagenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgRed" id="apidoc.element.phantomas.ansicolors.bgRed">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgRed
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgRed = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgWhite" id="apidoc.element.phantomas.ansicolors.bgWhite">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgWhite
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgWhite = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgYellow" id="apidoc.element.phantomas.ansicolors.bgYellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgYellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgYellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.black" id="apidoc.element.phantomas.ansicolors.black">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>black
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">black = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.blue" id="apidoc.element.phantomas.ansicolors.blue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>blue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">blue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightBlack" id="apidoc.element.phantomas.ansicolors.brightBlack">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlack
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightBlack = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			// error!
			if (/!$/.test(consoleMsg) || /Error:/.test(consoleMsg)) {
				consoleMsg = colors.brightRed(styles.bright(consoleMsg));
			}
			// label: message
			else if (/^(.*): /.test(consoleMsg)) {
				var idx = consoleMsg.indexOf(': ') + 1;
				consoleMsg = colors.brightGreen(consoleMsg.substr(0, idx)) + colors.<span class="apidocCodeKeywordSpan">brightBlack</span>(consoleMsg
.substr(idx));
			}
			// the rest
			else {
				consoleMsg = colors.brightBlack(consoleMsg);
			}

			if (!beSilent) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightBlue" id="apidoc.element.phantomas.ansicolors.brightBlue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightBlue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightCyan" id="apidoc.element.phantomas.ansicolors.brightCyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightCyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightCyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightGreen" id="apidoc.element.phantomas.ansicolors.brightGreen">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightGreen
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightGreen = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			// error!
			if (/!$/.test(consoleMsg) || /Error:/.test(consoleMsg)) {
				consoleMsg = colors.brightRed(styles.bright(consoleMsg));
			}
			// label: message
			else if (/^(.*): /.test(consoleMsg)) {
				var idx = consoleMsg.indexOf(': ') + 1;
				consoleMsg = colors.<span class="apidocCodeKeywordSpan">brightGreen</span>(consoleMsg.substr(0, idx)) + colors.brightBlack(consoleMsg
.substr(idx));
			}
			// the rest
			else {
				consoleMsg = colors.brightBlack(consoleMsg);
			}

			if (!beSilent) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightMagenta" id="apidoc.element.phantomas.ansicolors.brightMagenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightMagenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightMagenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightRed" id="apidoc.element.phantomas.ansicolors.brightRed">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightRed
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightRed = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		// log to the console (--verbose)
		if (beVerbose) {
			var consoleMsg = msg;

			// error!
			if (/!$/.test(consoleMsg) || /Error:/.test(consoleMsg)) {
				consoleMsg = colors.<span class="apidocCodeKeywordSpan">brightRed</span>(styles.bright(consoleMsg));
			}
			// label: message
			else if (/^(.*): /.test(consoleMsg)) {
				var idx = consoleMsg.indexOf(': ') + 1;
				consoleMsg = colors.brightGreen(consoleMsg.substr(0, idx)) + colors.brightBlack(consoleMsg.substr(idx));
			}
			// the rest
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightWhite" id="apidoc.element.phantomas.ansicolors.brightWhite">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightWhite
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightWhite = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightYellow" id="apidoc.element.phantomas.ansicolors.brightYellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightYellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightYellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.cyan" id="apidoc.element.phantomas.ansicolors.cyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>cyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.disable" id="apidoc.element.phantomas.ansicolors.disable">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>disable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function disable() {
	keys.forEach(function(key) {
		colors[key] = nop;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var isMultiple = Array.isArray(results),
		noColor = (reporterOptions['no-color'] === true);

	function formatSingleRunResults(results) {
		var res = [];

		if (noColor) {
			colors.<span class="apidocCodeKeywordSpan">disable</span>();
		}

		// header
		res.push(results.getGenerator() + ' metrics for &lt;' + results.getUrl() + '&gt;:');
		res.push('');

		// metrics
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.green" id="apidoc.element.phantomas.ansicolors.green">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>green
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">green = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.magenta" id="apidoc.element.phantomas.ansicolors.magenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>magenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">magenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.red" id="apidoc.element.phantomas.ansicolors.red">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>red
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">red = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.white" id="apidoc.element.phantomas.ansicolors.white">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>white
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">white = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.yellow" id="apidoc.element.phantomas.ansicolors.yellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>yellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">yellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.assert" id="apidoc.module.phantomas.assert">module phantomas.assert</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.assert.assert" id="apidoc.element.phantomas.assert.assert">
        function <span class="apidocSignatureSpan">phantomas.</span>assert
        <span class="apidocSignatureSpan">(value, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ok(value, message) {
  if (!!!value) fail(value, true, message, '==', assert.ok);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return true;
			}

			return (typeof val === 'number') ? val &lt;= expected : true;
		},
		getFailedAsserts: function() {
			return this.getMetricsNames().filter(function(metric) {
				return this.<span class="apidocCodeKeywordSpan">assert</span>(metric) === false;
			}, this);
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.AssertionError" id="apidoc.element.phantomas.assert.AssertionError">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>AssertionError
        <span class="apidocSignatureSpan">{{signature}}</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">AssertionError</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// 1. The assert module provides functions that throw
// AssertionError's when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.<span class="apidocCodeKeywordSpan">AssertionError</span>({ message: message,
// actual: actual,
// expected: expected })

assert.AssertionError = function AssertionError(options) {
this.name = 'AssertionError';
this.message = options.message;
this.actual = options.actual;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.deepEqual" id="apidoc.element.phantomas.assert.deepEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>deepEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.<span class="apidocCodeKeywordSpan">deepEqual</span>(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'deepEqual', assert.deepEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.doesNotThrow" id="apidoc.element.phantomas.assert.doesNotThrow">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>doesNotThrow
        <span class="apidocSignatureSpan">(block, error, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">doesNotThrow = function (block, error, message) {
  _throws.apply(this, [false].concat(pSlice.call(arguments)));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.equal" id="apidoc.element.phantomas.assert.equal">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>equal
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.<span class="apidocCodeKeywordSpan">equal</span>(true, guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!!!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.fail" id="apidoc.element.phantomas.assert.fail">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>fail
        <span class="apidocSignatureSpan">(actual, expected, message, operator, stackStartFunction)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.ifError" id="apidoc.element.phantomas.assert.ifError">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>ifError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ifError = function (err) { if (err) {throw err;}}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.notDeepEqual" id="apidoc.element.phantomas.assert.notDeepEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>notDeepEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    key = ka[i];
    if (!_deepEqual(a[key], b[key])) return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.<span class="apidocCodeKeywordSpan">notDeepEqual</span>(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected)) {
    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.notEqual" id="apidoc.element.phantomas.assert.notEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>notEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, '==', assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.<span class="apidocCodeKeywordSpan">notEqual</span>(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, '!=', assert.notEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.notStrictEqual" id="apidoc.element.phantomas.assert.notStrictEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>notStrictEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==. assert.<span class="apidocCodeKeywordSpan">notStrictEqual</span>(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, '!==', assert.notStrictEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.ok" id="apidoc.element.phantomas.assert.ok">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>ok
        <span class="apidocSignatureSpan">(value, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ok(value, message) {
  if (!!!value) fail(value, true, message, '==', assert.ok);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.<span class="apidocCodeKeywordSpan">ok</span>(guard, message_opt);
// This statement is equivalent to assert.equal(true, guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!!!value) fail(value, true, message, '==', assert.ok);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.strictEqual" id="apidoc.element.phantomas.assert.strictEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>strictEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, '===', assert.strictEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, guard,
// message_opt);. To test strictly for the value true, use
// assert.<span class="apidocCodeKeywordSpan">strictEqual</span>(true, guard, message_opt);.

function ok(value, message) {
  if (!!!value) fail(value, true, message, '==', assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.throws" id="apidoc.element.phantomas.assert.throws">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>throws
        <span class="apidocSignatureSpan">(block, error, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">throws = function (block, error, message) {
  _throws.apply(this, [true].concat(pSlice.call(arguments)));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if ((shouldThrow &amp;&amp; actual &amp;&amp; expected &amp;&amp;
      !expectedException(actual, expected)) || (!shouldThrow &amp;&amp; actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.<span class="apidocCodeKeywordSpan">throws</span>(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws.apply(this, [true].concat(pSlice.call(arguments)));
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.assetsTypes" id="apidoc.module.phantomas.assetsTypes">module phantomas.assetsTypes</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.assetsTypes.module" id="apidoc.element.phantomas.assetsTypes.module">
        function <span class="apidocSignatureSpan">phantomas.assetsTypes.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	['html', 'css', 'js', 'json', 'image', 'video', 'webfont', 'base64', 'other'].forEach(function(key) {
		phantomas.setMetric(key + 'Count');
		phantomas.setMetric(key + 'Size');
	});

	phantomas.on('recv', function(entry, res) {
		var size = entry.contentLength;

		phantomas.incrMetric(entry.type + 'Count');
		phantomas.incrMetric(entry.type + 'Size', size);

		phantomas.addOffender(entry.type + 'Count', entry.url + ' (size: ' + (size / 1024).toFixed(2) + ' kB, latency: ' + entry.timeToFirstByte
 + ' ms)');
	});

	phantomas.on('base64recv', function(entry, res) {
		phantomas.incrMetric('base64Count');
		phantomas.incrMetric('base64Size', entry.contentLength);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.blockDomains" id="apidoc.module.phantomas.blockDomains">module phantomas.blockDomains</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.blockDomains.module" id="apidoc.element.phantomas.blockDomains.module">
        function <span class="apidocSignatureSpan">phantomas.blockDomains.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var ourDomain = false,

		// --no-externals
		noExternalsMode = (phantomas.getParam('no-externals') === true),
		// --allow-domain .fastly.net,.googleapis.com
		allowedDomains = phantomas.getParam('allow-domain'),
		allowedDomainsRegExp,
		// --block-domain google-analytics.com
		blockedDomains = phantomas.getParam('block-domain'),
		blockedDomainsRegExp;

	function checkBlock(domain) {
		var blocked = false;

		// --no-externals
		if (noExternalsMode &amp;&amp; ourDomain !== false &amp;&amp; domain !== ourDomain) {
			blocked = true;
		}

		// match blacklist (--block-domain)
		if (blockedDomainsRegExp &amp;&amp; blockedDomainsRegExp.test(domain)) {
			blocked = true;
		}

		// match whitelist (--allow-domain)
		if (allowedDomainsRegExp) {
			if (allowedDomainsRegExp.test(domain) || domain === ourDomain) {
				blocked = false;
			} else {
				blocked = true;
			}
		}

		return blocked;
	}

	// parse settings
	function parseParameter(value) {
		return value.
		split(',').
		map(function(item) {
			return item.trim();
		});
	}

	allowedDomains = (typeof allowedDomains === 'string') ? parseParameter(allowedDomains) : false;
	blockedDomains = (typeof blockedDomains === 'string') ? parseParameter(blockedDomains) : false;

	if (noExternalsMode) {
		phantomas.log('Block domains: working in --no-externals mode');
	}

	if (allowedDomains !== false) {
		phantomas.log('Block domains: whitelist - ' + allowedDomains.join(', '));
		allowedDomainsRegExp = new RegExp('(' + allowedDomains.join('|') + ')$');
	}

	if (blockedDomains !== false) {
		phantomas.log('Block domains: blacklist - ' + blockedDomains.join(', '));
		blockedDomainsRegExp = new RegExp('(' + blockedDomains.join('|') + ')$');
	}

	// get the "main" domain from the first request (see issues #197 and #535)
	phantomas.on('beforeSend', function(entry) {
		if (!ourDomain) {
			ourDomain = entry.domain;
			phantomas.log('Block domains: assuming "%s" to be the main domain (from the first request sent)', ourDomain);
		}
	});

	// check each request before sending
	phantomas.on('beforeSend', function(entry) {
		if (checkBlock(entry.domain)) {
			entry.block();

			// stats
			phantomas.incrMetric('blockedRequests'); // @desc number of requests blocked due to domain filtering @optional
			phantomas.addOffender('blockedRequests', entry.url);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.cacheHits" id="apidoc.module.phantomas.cacheHits">module phantomas.cacheHits</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.cacheHits.module" id="apidoc.element.phantomas.cacheHits.module">
        function <span class="apidocSignatureSpan">phantomas.cacheHits.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('cacheHits'); // @desc number of cache hits @offenders
	phantomas.setMetric('cacheMisses'); // @desc number of cache misses @offenders
	phantomas.setMetric('cachePasses'); // @desc number of cache passes @offenders

	phantomas.on('recv', function(entry, res) {
		var age, xCacheHeader,
			isHit, isMiss, isPass;

		// parser response headers
		//
		// X-Cache:HIT, HIT
		// X-Cache:arsenic miss (0)
		// Age: 170221
		age = parseInt(entry.headers.Age, 10);
		xCacheHeader = (entry.headers['X-Cache'] || '').toLowerCase();

		if (xCacheHeader !== '') {
			isHit = xCacheHeader.indexOf('hit') &gt; -1;

			if (!isHit) {
				isPass = xCacheHeader.indexOf('pass') &gt; -1;
				isMiss = xCacheHeader.indexOf('miss') &gt; -1;
			}
		}
		// @see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.6
		else if (typeof age === 'number') {
			isHit = age &gt; 0;
			// Varnish sets age to 0 for fresh &amp; not cached objects
			isMiss = age === 0;
		}

		// now set metrics
		if (isHit) {
			phantomas.incrMetric('cacheHits');
			phantomas.addOffender('cacheHits', entry.url);
		} else if (isPass) {
			phantomas.incrMetric('cachePasses');
			phantomas.addOffender('cachePasses', entry.url);
		} else if (isMiss) {
			phantomas.incrMetric('cacheMisses');
			phantomas.addOffender('cacheMisses', entry.url);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.caching" id="apidoc.module.phantomas.caching">module phantomas.caching</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.caching.module" id="apidoc.element.phantomas.caching.module">
        function <span class="apidocSignatureSpan">phantomas.caching.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var cacheControlRegExp = /max-age=(\d+)/;

	function getCachingTime(url, headers) {
		// false means "no caching"
		var ttl = false,
			headerName,
			now = new Date(),
			headerDate;

		for (headerName in headers) {
			var value = headers[headerName];

			switch (headerName.toLowerCase()) {
				// parse max-age=...
				//
				// max-age=2592000
				// public, max-age=300, must-revalidate
				case 'cache-control':
					var matches = value.match(cacheControlRegExp);

					if (matches) {
						ttl = parseInt(matches[1], 10);
					}
					break;

					// catch Expires and Pragma headers
				case 'expires':
				case 'pragma':
					// and Varnish specific headers
				case 'x-pass-expires':
				case 'x-pass-cache-control':
					phantomas.incrMetric('oldCachingHeaders'); // @desc number of responses with old, HTTP 1.0 caching headers (Expires and Pragma
)
					phantomas.addOffender('oldCachingHeaders', url + ' - ' + headerName + ': ' + value);
					if (ttl === false) {
						headerDate = Date.parse(value);
						if (headerDate) ttl = Math.round((headerDate - now) / 1000);
					}
					break;
			}
		}

		//console.log(JSON.stringify(headers)); console.log("TTL: " + ttl + ' s');

		return ttl;
	}

	phantomas.setMetric('cachingNotSpecified'); // @desc number of responses with no caching header sent (no Cache-Control header)
	phantomas.setMetric('cachingTooShort'); // @desc number of responses with too short (less than a week) caching time
	phantomas.setMetric('cachingDisabled'); // @desc number of responses with caching disabled (max-age=0)

	phantomas.setMetric('oldCachingHeaders');

	phantomas.on('recv', function(entry, res) {
		var ttl = getCachingTime(entry.url, entry.headers);

		// static assets
		if (entry.isImage || entry.isJS || entry.isCSS) {
			if (ttl === false) {
				phantomas.incrMetric('cachingNotSpecified');
				phantomas.addOffender('cachingNotSpecified', entry.url);
			} else if (ttl &lt;= 0) {
				phantomas.incrMetric('cachingDisabled');
				phantomas.addOffender('cachingDisabled', entry.url);
			} else if (ttl &lt; 7 * 86400) {
				phantomas.incrMetric('cachingTooShort');
				phantomas.addOffender('cachingTooShort', entry.url + ' cached for ' + ttl + ' s');
			}
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.collection" id="apidoc.module.phantomas.collection">module phantomas.collection</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.collection.collection" id="apidoc.element.phantomas.collection.collection">
        function <span class="apidocSignatureSpan">phantomas.</span>collection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function collection() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.items = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.collection.prototype" id="apidoc.module.phantomas.collection.prototype">module phantomas.collection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.forEach" id="apidoc.element.phantomas.collection.prototype.forEach">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>forEach
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forEach = function (callback) {
		Object.keys(this.items).forEach(function(key) {
			callback(key, this.items[key].cnt);
		}, this);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// -R plain
	// -R csv
	// -R csv:no-header:url:timestamp
	reporterOptions = (options.reporter + '').split(':');
	reporterName = reporterOptions.shift();

	// allow access to options via object.key (for non-numeric values)
	reporterOptions.<span class="apidocCodeKeywordSpan">forEach</span>(function(option) {
		if (!parseInt(option)) {
			reporterOptions[option] = true;
		}
	});

	debug('Setting up %s reporter (options: %j)...', reporterName, reporterOptions);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.getLength" id="apidoc.element.phantomas.collection.prototype.getLength">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>getLength
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLength = function () {
		return Object.keys(this.items).length;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		domains.sort().forEach(function(name, cnt) {
			phantomas.addOffender('domains', '%s: %d request(s)', name, cnt);

			domainsRequests.push(cnt);
		});

		if (domains.<span class="apidocCodeKeywordSpan">getLength</span>() &gt; 0) {
			phantomas.setMetric('domains', domains.getLength());
			phantomas.setMetric('maxRequestsPerDomain', domainsRequests.range()[1]);
			phantomas.setMetric('medianRequestsPerDomain', domainsRequests.median());
		}
	});
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.has" id="apidoc.element.phantomas.collection.prototype.has">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>has
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">has = function (item) {
		return (typeof this.items[item] !== 'undefined');
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		}

		if (entry.isImage || entry.isJS || entry.isCSS) {
			// count number of requests to each asset
			assetsReqCounter.push(entry.url);

			// count static assets requested from domains with cookie set
			if (cookieDomains.<span class="apidocCodeKeywordSpan">has</span>(entry.domain)) {
				phantomas.incrMetric('assetsWithCookies');
				phantomas.addOffender('assetsWithCookies', '%s (%s)', entry.url, entry.type.toUpperCase());
			}
		}
	});

	phantomas.on('report', function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.push" id="apidoc.element.phantomas.collection.prototype.push">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>push
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">push = function (item) {
		if (typeof this.items[item] === 'undefined') {
			this.items[item] = {
				cnt: 1
			};
		} else {
			this.items[item].cnt++;
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// @see https://github.com/caolan/async#seriestasks-callback
var series = [];

debug('Preparing %d run(s)...', runs);

for (var r = 0; r &lt; runs; r++) {
	series.<span class="apidocCodeKeywordSpan">push</span>(task);
}

async.series(
	series,
	function(err, results) {
		var debug = require('debug')('phantomas:runs'),
			needDrain,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.sort" id="apidoc.element.phantomas.collection.prototype.sort">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>sort
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sort = function () {
		var newItems = {},
			sortedKeys;

		// sort in descending order (by cnt)
		sortedKeys = Object.keys(this.items).sort((function(a, b) {
			return this.items[b].cnt - this.items[a].cnt;
		}).bind(this));

		// build new items dictionary
		sortedKeys.forEach(function(key) {
			newItems[key] = this.items[key];
		}, this);

		this.items = newItems;
		return this;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	},

	sort: function() {
		var newItems = {},
			sortedKeys;

		// sort in descending order (by cnt)
		sortedKeys = Object.keys(this.items).<span class="apidocCodeKeywordSpan">sort</span>((function(a, b) {
			return this.items[b].cnt - this.items[a].cnt;
		}).bind(this));

		// build new items dictionary
		sortedKeys.forEach(function(key) {
			newItems[key] = this.items[key];
		}, this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.console" id="apidoc.module.phantomas.console">module phantomas.console</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.console.module" id="apidoc.element.phantomas.console.module">
        function <span class="apidocSignatureSpan">phantomas.console.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('consoleMessages'); // @desc number of calls to console.* functions

	phantomas.on('consoleLog', function(msg) {
		phantomas.incrMetric('consoleMessages');
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.cookies" id="apidoc.module.phantomas.cookies">module phantomas.cookies</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.cookies.module" id="apidoc.element.phantomas.cookies.module">
        function <span class="apidocSignatureSpan">phantomas.cookies.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	var cookiesJar = phantomas.getParam('cookies', [], 'object'),
		COOKIE_SEPARATOR = '|';

	// setup cookies handling
	function initCookies() {
		// cookie handling via command line and config.json
		phantom.cookiesEnabled = true;

		// handles multiple cookies from config.json, and used for storing
		// constructed cookies from command line.

		// --cookie='bar=foo;domain=url'
		// for multiple cookies, please use pipe-separated string (issue #667)
		// --cookie='foo=42|test=123'
		var cookieParam = phantomas.getParam('cookie', false, 'string');

		if (cookieParam !== false) {
			phantomas.log('Cookies: parsing "cookie" parameter'); // issue #667

			cookieParam.split(COOKIE_SEPARATOR).forEach(function(cookieParam) {
				// Parse cookie. at minimum, need a key=value pair, and a domain.
				// Domain attr, if unavailble, is created from `phantomas.url` during
				//  addition to phantomjs in injectCookies function
				// Full JS cookie syntax is supported.
				var cookieComponents = cookieParam.split(';'),
					cookie = {};

				for (var i = 0, len = cookieComponents.length; i &lt; len; i++) {
					var frag = cookieComponents[i].split('=');

					// special case: key-value
					if (i === 0) {
						cookie.name = frag[0];
						cookie.value = frag[1];

						// special case: secure
					} else if (frag[0] === 'secure') {
						cookie.secure = true;

						// everything else
					} else {
						cookie[frag[0]] = frag[1];
					}
				}

				// see injectCookies for validation
				cookiesJar.push(cookie);
			});
		}
	}

	// add cookies, if any, providing a domain shim
	function injectCookies() {
		if (cookiesJar &amp;&amp; cookiesJar.length &gt; 0) {
			// @see http://nodejs.org/docs/latest/api/url.html
			var parseUrl = phantomas.require('url').parse;

			cookiesJar.forEach(function(cookie) {
				// phantomjs required attrs: *name, *value, *domain
				if (!cookie.name || !cookie.value) {
					throw 'this cookie is missing a name or value property: ' + JSON.stringify(cookie);
				}

				if (!cookie.domain) {
					var parsed = parseUrl(phantomas.url),
						root = (parsed.hostname || '').replace(/^www/, ''); // strip www

					cookie.domain = root;
					phantomas.log('Cookies: domain fallback applied - %s', root);
				}

				if (!phantom.addCookie(cookie)) {
					// In PhantomJS 2.1, the addCookie function always returns false (#597).
					//throw 'PhantomJS could not add cookie: ' + JSON.stringify(cookie);
				}

				phantomas.log('Cookies: set ' + JSON.stringify(cookie));
			});
		}
	}

	initCookies();
	phantomas.on('pageBeforeOpen', injectCookies);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.devices" id="apidoc.module.phantomas.devices">module phantomas.devices</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.devices.module" id="apidoc.element.phantomas.devices.module">
        function <span class="apidocSignatureSpan">phantomas.devices.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var device,
		// @see https://developers.google.com/chrome/mobile/docs/user-agent?hl=pl
		// @see http://viewportsizes.com/
		devices = {
			// pretend we're iPhone
			phone: {
				viewport: '320x568',
				'user-agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 9_0_2 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0
Mobile/13A452 Safari/601.1'
			},
			// pretend we're iPad
			tablet: {
				viewport: '768x1024',
				'user-agent': 'Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B5110e
 Safari/601.1'
			}
		},
		availableDevices = Object.keys(devices);

	// check if --phone or --tablet option was passed
	availableDevices.forEach(function(item) {
		if (phantomas.getParam(item) === true) {
			device = item;
			return false;
		}
	});

	// no profile selected, add a hint to the logs
	if (typeof device === 'undefined') {
		phantomas.log('Devices: no profile selected (available: %s)', availableDevices.join(', '));
		return;
	}

	// apply the profile
	phantomas.log('Devices: using "%s" profile', device);

	Object.keys(devices[device]).forEach(function(key) {
		phantomas.setParam(key, devices[device][key]);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.documentHeight" id="apidoc.module.phantomas.documentHeight">module phantomas.documentHeight</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.documentHeight.module" id="apidoc.element.phantomas.documentHeight.module">
        function <span class="apidocSignatureSpan">phantomas.documentHeight.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('documentHeight'); // @desc the page height [px]

	phantomas.on('report', function() {
		phantomas.setMetricEvaluate('documentHeight', function() {
			// @see https://github.com/HTTPArchive/httparchive/blob/master/custom_metrics/document_height.js
			var doc = document,
				body = doc.body,
				docelem = doc.documentElement;

			return Math.max(body.scrollHeight, body.offsetHeight, docelem.clientHeight, docelem.scrollHeight, docelem.offsetHeight);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domComplexity" id="apidoc.module.phantomas.domComplexity">module phantomas.domComplexity</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domComplexity.module" id="apidoc.element.phantomas.domComplexity.module">
        function <span class="apidocSignatureSpan">phantomas.domComplexity.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	// total length of HTML comments (including &lt;!-- --&gt; brackets)
	phantomas.setMetric('commentsSize'); // @desc the size of HTML comments on the page @offenders

	// total length of text nodes with whitespaces only (i.e. pretty formatting of HTML)
	phantomas.setMetric('whiteSpacesSize'); // @desc the size of text nodes with whitespaces only

	// count all tags
	phantomas.setMetric('DOMelementsCount'); // @desc total number of HTML element nodes
	phantomas.setMetric('DOMelementMaxDepth'); // @desc maximum level on nesting of HTML element node

	// nodes with inlines CSS (style attribute)
	phantomas.setMetric('nodesWithInlineCSS'); // @desc number of nodes with inline CSS styling (with style attribute) @offenders

	// images
	// TODO: move to a separate module
	phantomas.setMetric('imagesScaledDown'); // @desc number of &lt;img&gt; nodes that have images scaled down in HTML @offenders
	phantomas.setMetric('imagesWithoutDimensions'); // @desc number of &lt;img&gt; nodes without both width and height attribute @offenders

	// keep the track of SVG graphics (#479)
	var svgResources = [];
	phantomas.on('recv', function(entry) {
		if (entry.isSVG) {
			svgResources.push(entry.url);
			phantomas.log('imagesScaledDown: will ignore &lt;%s&gt; [%s]', entry.url, entry.contentType);
		}
	});

	// duplicated ID (issue #392)
	phantomas.setMetric('DOMidDuplicated'); // @desc number of duplicated IDs found in DOM

	var Collection = require('../../lib/collection'),
		DOMids = new Collection();

	phantomas.on('domId', function(id) {
		DOMids.push(id);
	});

	// HTML size
	phantomas.on('report', function() {
		phantomas.setMetricEvaluate('bodyHTMLSize', function() { // @desc the size of body tag content (document.body.innerHTML.length
)
			return document.body &amp;&amp; document.body.innerHTML.length || 0;
		});

		var scope = {
			svgResources: svgResources
		};

		phantomas.evaluate(function(scope) {
			(function(phantomas) {
				var runner = new phantomas.nodeRunner(),
					whitespacesRegExp = /^\s+$/,
					DOMelementMaxDepth = 0,
					DOMelementMaxDepthNodes = [], // stores offenders for DOMelementMaxDepth (issue #414)
					size = 0;

				runner.walk(document.body, function(node, depth) {
					var path = '';

					switch (node.nodeType) {
						case Node.COMMENT_NODE:
							size = node.textContent.length + 7; // '&lt;!--' + '--&gt;'.length
							phantomas.incrMetric('commentsSize', size);

							// log HTML comments bigger than 64 characters
							if (size &gt; 64) {
								phantomas.addOffender('commentsSize', '%s (%d characters)', phantomas.getDOMPath(node), size);
							}
							break;

						case Node.ELEMENT_NODE:
							path = phantomas.getDOMPath(node);

							phantomas.incrMetric('DOMelementsCount');

							if (depth &gt; DOMelementMaxDepth) {
								DOMelementMaxDepth = depth;
								DOMelementMaxDepthNodes = [path];
							} else if (depth === DOMelementMaxDepth) {
								DOMelementMaxDepthNodes.push(path);
							}

							// report duplicated ID (issue #392)
							if (typeof node.id === 'string' &amp;&amp; node.id !== '') {
								phantomas.emit('domId', node.id);
							}

							// ignore inline &lt;script&gt; tags
							if (node.nodeName === 'SCRIPT') {
								return false;
							}

							// images
							if (node.nodeName === 'IMG') {
								var imgWidth = node.hasAttribute('width') ? node.getAttribute('width') : false,
									imgHeight = node.hasAttribute('height') ? node.getAttribute('height') : false,
									nodeStyle;

								// get dimensions from inline CSS (issue #399)
								if (imgWidth === false || imgHeight === false) {
									nodeStyle = node.style;

									imgWidth = parseInt(node.style.width, 10) || false;
									imgHeight = parseInt(node.style.height, 10) || false;
								}

								if (imgWidth === false || imgHeight === false) {
									phantomas.incrMetric('imagesWithoutDimensions');
									phantomas.addOffender('imagesWithoutDimensions', '%s &lt;%s&gt;', path, node.src);
								}

								if (node.naturalHeight &amp;&amp; node.naturalWidth &amp;&amp; imgHeight &amp;&amp; imgWidth) {
									if (node.naturalHeight &gt; imgHeigh ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domHiddenContent" id="apidoc.module.phantomas.domHiddenContent">module phantomas.domHiddenContent</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domHiddenContent.module" id="apidoc.element.phantomas.domHiddenContent.module">
        function <span class="apidocSignatureSpan">phantomas.domHiddenContent.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	// total length of HTML of hidden elements (i.e. display: none)
	phantomas.setMetric('hiddenContentSize'); // @desc the size of content of hidden elements on the page (with CSS display: none) @
offenders
	phantomas.setMetric('hiddenImages'); // @desc number of hidden images that can be lazy-loaded @offenders

	// HTML size
	phantomas.on('report', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				var runner = new phantomas.nodeRunner(),
					lazyLoadableImages = {};

				phantomas.spyEnabled(false, 'analyzing hidden content');

				runner.walk(document.body, function(node, depth) {
					switch (node.nodeType) {
						case Node.ELEMENT_NODE:
							// @see https://developer.mozilla.org/en/DOM%3awindow.getComputedStyle
							var styles = window.getComputedStyle(node);

							if (styles &amp;&amp; styles.getPropertyValue('display') === 'none') {
								if (typeof node.innerHTML === 'string') {
									var size = node.innerHTML.length;
									phantomas.incrMetric('hiddenContentSize', size);

									// log hidden containers bigger than 1 kB
									if (size &gt; 1024) {
										phantomas.addOffender('hiddenContentSize', phantomas.getDOMPath(node) + ' (' + size + ' characters)');
									}
								}

								// count hidden images that can be lazy loaded (issue #524)
								var images = [];
								if (node.tagName === 'IMG') {
									images = [node];
								} else if (typeof node.querySelectorAll === 'function') {
									images = node.querySelectorAll('img') || [];
								}

								for (var i = 0, len = images.length; i &lt; len; i++) {
									var src = images[i].src,
										path;

									if (src === '' || src.indexOf('data:image') === 0) continue;

									if (!lazyLoadableImages[src]) {
										path = phantomas.getDOMPath(images[i]);

										lazyLoadableImages[src] = {
											path: path
										};
									}
								}

								// don't run for child nodes as they're hidden as well
								return false;
							}
							break;
					}
				});

				Object.keys(lazyLoadableImages).forEach(function(img) {
					var entry = lazyLoadableImages[img];

					phantomas.incrMetric('hiddenImages');
					phantomas.addOffender('hiddenImages', img);

					phantomas.log('hiddenImages: &lt;%s&gt; image (%s) is hidden and can be lazy-loaded', img, entry.path);
				});

				phantomas.spyEnabled(true);
			}(window.__phantomas));
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domMutations" id="apidoc.module.phantomas.domMutations">module phantomas.domMutations</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domMutations.module" id="apidoc.element.phantomas.domMutations.module">
        function <span class="apidocSignatureSpan">phantomas.domMutations.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// SlimerJS only metrics
	phantomas.setMetric('DOMmutationsInserts'); // @desc number of &lt;body&gt; node inserts
	phantomas.setMetric('DOMmutationsRemoves'); // @desc number of &lt;body&gt; node removes
	phantomas.setMetric('DOMmutationsAttributes'); // @desc number of DOM nodes attributes changes

	phantomas.on('init', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				if ('MutationObserver' in window) {
					// wait for DOM ready
					document.addEventListener('readystatechange', function() {
						if (document.readyState !== 'interactive') {
							return;
						}

						phantomas.log('DOM query: setting up MutationObserver...');

						var observer = new MutationObserver(function(allmutations) {
							allmutations.map(function(mutation) {
								// @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver#MutationRecord
								var targetPath = phantomas.getDOMPath(mutation.target, true /* dontGoUpTheDom */ );

								switch (mutation.type) {
									case 'attributes':
										phantomas.log('DOM mutation: "%s" attr (was "%s") set on %s',
											mutation.attributeName,
											mutation.oldValue || '',
											targetPath
										);

										phantomas.incrMetric('DOMmutationsAttributes');
										phantomas.addOffender('DOMmutationsAttributes', '"%s" attr set on %s', mutation.attributeName, targetPath);
										break;

									case 'childList':
										var wereAdded = (mutation.addedNodes.length &gt; 0),
											nodes = wereAdded ? mutation.addedNodes : mutation.removedNodes,
											nodePath;

										for (var n = 0, nodesLen = nodes.length; n &lt; nodesLen; n++) {
											nodePath = phantomas.getDOMPath(nodes[n], true /* dontGoUpTheDom */ );

											phantomas.log('DOM mutation: node "%s" %s "%s"',
												nodePath,
												wereAdded ? 'added to' : 'removed from',
												targetPath
											);

											if (wereAdded) {
												phantomas.incrMetric('DOMmutationsInserts');
												phantomas.addOffender('DOMmutationsInserts', '"%s" added to "%s"', nodePath, targetPath);
											} else {
												phantomas.incrMetric('DOMmutationsRemoves');
												phantomas.addOffender('DOMmutationsRemoves', '"%s" removed from "%s"', nodePath, targetPath);
											}
										}
										break;

									default:
										phantomas.log('DOM mutation: %s', mutation.type);
								}
							});
						});

						observer.observe(document.body, {
							childList: true,
							attributes: true,
							characterData: true,
							subtree: true,
							attributeOldValue: true
						});
					});
				} else {
					phantomas.log('DOM query: MutationObserver not available!');
				}
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domQueries" id="apidoc.module.phantomas.domQueries">module phantomas.domQueries</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domQueries.module" id="apidoc.element.phantomas.domQueries.module">
        function <span class="apidocSignatureSpan">phantomas.domQueries.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('DOMqueries'); // @desc number of all DOM queries @offenders
	phantomas.setMetric('DOMqueriesWithoutResults'); // @desc number of DOM queries that returned nothing @offenders
	phantomas.setMetric('DOMqueriesById'); // @desc number of document.getElementById calls
	phantomas.setMetric('DOMqueriesByClassName'); // @desc number of document.getElementsByClassName calls
	phantomas.setMetric('DOMqueriesByTagName'); // @desc number of document.getElementsByTagName calls
	phantomas.setMetric('DOMqueriesByQuerySelectorAll'); // @desc number of document.querySelector(All) calls
	phantomas.setMetric('DOMinserts'); // @desc number of DOM nodes inserts
	phantomas.setMetric('DOMqueriesDuplicated'); // @desc number of DOM queries called more than once
	phantomas.setMetric('DOMqueriesAvoidable'); // @desc number of repeated uses of a duplicated query

	// fake native DOM functions
	phantomas.on('init', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				function querySpy(type, query, fnName, context, hasNoResults) {
					phantomas.emit('domQuery', type, query, fnName, context, hasNoResults); // @desc DOM query has been made
				}

				phantomas.spy(Document.prototype, 'getElementById', function(results, id) {
					phantomas.incrMetric('DOMqueriesById');
					phantomas.addOffender('DOMqueriesById', '#%s (in %s)', id, '#document');
					querySpy('id', '#' + id, 'getElementById', '#document', (results === null));
				}, true);

				// selectors by class name
				function selectorClassNameSpy(results, className) {
					<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>					var context = phantomas.getDOMPath(this);

					phantomas.incrMetric('DOMqueriesByClassName');
					phantomas.addOffender('DOMqueriesByClassName', '.%s (in %s)', className, context);
					querySpy('class', '.' + className, 'getElementsByClassName', context, (results.length === 0));
				}

				phantomas.spy(Document.prototype, 'getElementsByClassName', selectorClassNameSpy, true);
				phantomas.spy(Element.prototype, 'getElementsByClassName', selectorClassNameSpy, true);

				// selectors by tag name
				function selectorTagNameSpy(results, tagName) {
					/* jshint validthis: true */
					var context = phantomas.getDOMPath(this);

					// querying by BODY and body is the same (issue #419)
					tagName = tagName.toLowerCase();

					phantomas.incrMetric('DOMqueriesByTagName');
					phantomas.addOffender('DOMqueriesByTagName', '%s (in %s)', tagName, context);
					querySpy('tag name', tagName, 'getElementsByTagName', context, (results.length === 0));
				}

				phantomas.spy(Document.prototype, 'getElementsByTagName', selectorTagNameSpy, true);
				phantomas.spy(Element.prototype, 'getElementsByTagName', selectorTagNameSpy, true);

				// selector queries
				function selectorQuerySpy(results, selector) {
					/* jshint validthis: true */
					var context = phantomas.getDOMPath(this);

					phantomas.incrMetric('DOMqueriesByQuerySelectorAll');
					phantomas.addOffender('DOMqueriesByQuerySelectorAll', '%s (in %s)', selector, context);
					querySpy('selector', selector, 'querySelectorAll', context, (results === null || results.length === 0));
				}

				phantomas.spy(Document.prototype, 'querySelector', selectorQuerySpy, true);
				phantomas.spy(Document.prototype, 'querySelectorAll', selectorQuerySpy, true);
				phantomas.spy(Element.prototype, 'querySelector', selectorQuerySpy, true);
				phantomas.spy(Element.prototype, 'querySelectorAll', selectorQuerySpy, true);

				// count DOM inserts
				function appendSpy(child) {
					/* jshint validthis: true */
					// ignore appending to the node that's not yet added to DOM tree
					if (!this.parentNode) {
						return;
					}

					var destNodePath = phantomas.getDOMPath(this),
						appendedNodePath = phantomas.getDOMPath(child);

					// skip undefined nodes (issue #560)
					if (destNodePath === false) {
						return;
					}

					// don't count elements added to fragments as a DOM inserts (issue #350)
					// DocumentFragment &gt; div[0]
					if (destNodePath.indexOf('Documen ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domains" id="apidoc.module.phantomas.domains">module phantomas.domains</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domains.module" id="apidoc.element.phantomas.domains.module">
        function <span class="apidocSignatureSpan">phantomas.domains.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var Collection = require('../../lib/collection'),
		domains = new Collection();

	phantomas.setMetric('domains'); // @desc number of domains used to fetch the page @offenders
	phantomas.setMetric('maxRequestsPerDomain'); // @desc maximum number of requests fetched from a single domain
	phantomas.setMetric('medianRequestsPerDomain'); // @desc median of number of requests fetched from each domain

	phantomas.on('recv', function(entry, res) {
		var domain = entry.domain;

		if (domain) {
			domains.push(domain);
		}
	});

	// add metrics
	phantomas.on('report', function() {
		var domainsRequests = new Stats();

		domains.sort().forEach(function(name, cnt) {
			phantomas.addOffender('domains', '%s: %d request(s)', name, cnt);

			domainsRequests.push(cnt);
		});

		if (domains.getLength() &gt; 0) {
			phantomas.setMetric('domains', domains.getLength());
			phantomas.setMetric('maxRequestsPerDomain', domainsRequests.range()[1]);
			phantomas.setMetric('medianRequestsPerDomain', domainsRequests.median());
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.engines" id="apidoc.module.phantomas.engines">module phantomas.engines</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.engines.engines" id="apidoc.element.phantomas.engines.engines">
        function <span class="apidocSignatureSpan">phantomas.</span>engines
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function engines(options) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.options = options;

	//--debug can be either 'true' or 'false'
	this.options.debug = (this.options.debug === true) ? 'true' : 'false';

	// engines storage
	this.engines = {};
	[
		// the first one is a default one
		'webkit',
		'gecko'
	].forEach(this.registerEngine, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.engines.prototype" id="apidoc.module.phantomas.engines.prototype">module phantomas.engines.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.getEngine" id="apidoc.element.phantomas.engines.prototype.getEngine">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngine
        <span class="apidocSignatureSpan">(engine)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEngine = function (engine) {
	return this.engines[engine];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
engines.prototype.getEngine = function(engine) {
	return this.engines[engine];
};

engines.prototype.run = function(scriptFile) {
	// select the engine
	var engines = this.getEngines(),
		engine = this.<span class="apidocCodeKeywordSpan">getEngine</span>(engines[0]);

	// --engine=[gecko|webkit]
	if (typeof this.options.engine === 'string') {
		engine = this.getEngine(this.options.engine);

		if (typeof engine === 'undefined') {
			throw 'Engine "' + this.options.engine + '" not found!';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.getEngines" id="apidoc.element.phantomas.engines.prototype.getEngines">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngines
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEngines = function () {
	return Object.keys(this.engines);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

engines.prototype.getEngine = function(engine) {
	return this.engines[engine];
};

engines.prototype.run = function(scriptFile) {
	// select the engine
	var engines = this.<span class="apidocCodeKeywordSpan">getEngines</span>(),
		engine = this.getEngine(engines[0]);

	// --engine=[gecko|webkit]
	if (typeof this.options.engine === 'string') {
		engine = this.getEngine(this.options.engine);

		if (typeof engine === 'undefined') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.registerEngine" id="apidoc.element.phantomas.engines.prototype.registerEngine">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>registerEngine
        <span class="apidocSignatureSpan">(engineName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerEngine = function (engineName) {
	var def;

	try {
		def = require('./engines/' + engineName);
		this.engines[engineName] = def;

		debug('Engine "%s": %s v%s installed in %s', engineName, def.name, def.version, def.path);
	} catch (ex) {
		debug('Engine "%s": failed to import - %s', engineName, ex);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.run" id="apidoc.element.phantomas.engines.prototype.run">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>run
        <span class="apidocSignatureSpan">(scriptFile)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function (scriptFile) {
	// select the engine
	var engines = this.getEngines(),
		engine = this.getEngine(engines[0]);

	// --engine=[gecko|webkit]
	if (typeof this.options.engine === 'string') {
		engine = this.getEngine(this.options.engine);

		if (typeof engine === 'undefined') {
			throw 'Engine "' + this.options.engine + '" not found!';
		}
	}
	// PHANTOMAS_ENGINE=gecko phantomas "http://example.com"
	else if (typeof process.env.PHANTOMAS_ENGINE === 'string') {
		engine = this.getEngine(process.env.PHANTOMAS_ENGINE);

		if (typeof engine === 'undefined') {
			throw 'Engine "' + process.env.PHANTOMAS_ENGINE + '" not found!';
		}
	}
	// --gecko / --webkit
	else {
		engines.forEach(function(key) {
			if (this.options[key] === true) {
				engine = this.getEngine(key);
			}
		}, this);
	}

	// customize user agent
	if (typeof this.options['user-agent'] === 'undefined') {
		this.options['user-agent'] = "phantomas/" + VERSION + " (" + engine.getUserAgent() + "; " + process.platform + " " + process.arch
 + ")";
	}

	// build engine specific command-line arguments
	var engineArgs = [];

	Object.keys(this.options).forEach(function(key) {
		var val = this.options[key],
			nativeOptions = [
				'cookies-file',
				'debug',
				'ignore-ssl-errors',
				'ssl-protocol',
				'proxy',
				'proxy-auth',
				'proxy-type'
			];

		if (val === false) {
			return;
		}

		// handle native PhantomJS options (#163)
		// @see http://phantomjs.org/api/command-line.html
		if (nativeOptions.indexOf(key) &gt; -1) {
			engineArgs.push('--' + key + '=' + val);
		}
	}, this);

	debug('Running %s (using %s)', scriptFile, engine.name);
	debug('Passing phantomas options: %j', this.options);
	debug('Passing engine options: %j', engineArgs);

	// add a script to run
	engineArgs.push(scriptFile);

	// pass JSON encoded options
	engineArgs.push(JSON.stringify(this.options));

	// spawn the process
	var proc;

	if (typeof engine.spawn === 'function') {
		debug('Using custom spawn function');
		proc = engine.spawn(engine.path, engineArgs);
	} else {
		proc = spawn(engine.path, engineArgs, {
			env: process.env
		});
	}

	return proc;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.events" id="apidoc.module.phantomas.events">module phantomas.events</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.events.EventEmitter" id="apidoc.element.phantomas.events.EventEmitter">
        function <span class="apidocSignatureSpan">phantomas.events.</span>EventEmitter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() { }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.fast_stats" id="apidoc.module.phantomas.fast_stats">module phantomas.fast_stats</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.fast_stats.Stats" id="apidoc.element.phantomas.fast_stats.Stats">
        function <span class="apidocSignatureSpan">phantomas.fast_stats.</span>Stats
        <span class="apidocSignatureSpan">(c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stats(c) {
	this._config = {
		store_data: true
	};

	if (c) {
		for (var k in config_params) {
			if (c.hasOwnProperty(k)) {
				config_params[k](this, c[k]);
			}
		}
	}

	this.reset();

	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.filmStrip" id="apidoc.module.phantomas.filmStrip">module phantomas.filmStrip</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.filmStrip.module" id="apidoc.element.phantomas.filmStrip.module">
        function <span class="apidocSignatureSpan">phantomas.filmStrip.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	if (!phantomas.getParam('film-strip')) {
		phantomas.log('filmStrip: to enable screenshots of page being loaded run phantomas with --film-strip option');
		return;
	}

	var filmStripOutputDir = phantomas.getParam('film-strip-dir', 'filmstrip', 'string').replace(/\/+$/, ''),
		filmStripPrefix = phantomas.getParam('film-strip-prefix', 'screenshot', 'string').replace(/[^a-z0-9\-]+/ig, '-');

	var zoomFactor = 0.5;
	phantomas.setZoom(zoomFactor);

	phantomas.log('filmStrip: film strip will be stored as %s/%s-*.png files (zoom: %d)', filmStripOutputDir, filmStripPrefix, zoomFactor
);

	var util = phantomas.require('util'),
		fs = require('fs'),
		// throttling
		SCREENSHOTS_MIN_INTERVAL = 75,
		lastScreenshot = 0,
		start = Date.now(),
		startFormatted = (new Date()).toJSON().substr(0, 19).replace(/:/g, '-'), // be M$ Windows compatible (issue #498) (2014-05-18T13
:08:13 converts to 2014-05-18T13-08-13)
		// stats
		timeTotal = 0,
		screenshots = [];

	function screenshot(ts /* force timestamp in file name */ ) {
		var now = Date.now(),
			path;

		// check when was the last screenshot taken (exclude time it took to render the screenshot)
		if (now - lastScreenshot &lt; SCREENSHOTS_MIN_INTERVAL) {
			//phantomas.log('Film strip: skipped');
			return;
		}

		// time offset excluding time it took to render screenshots
		ts = ts || (now - start - timeTotal);
		path = util.format('%s/%s-%s-%d.png', filmStripOutputDir, filmStripPrefix, startFormatted, ts);

		phantomas.render(path);
		lastScreenshot = Date.now();

		// verify that the screnshot was really taken
		if (fs.isReadable(path)) {
			phantomas.log('Film strip: rendered to %s in %d ms', path, Date.now() - now);
			phantomas.emit('filmStrip', path, ts);

			screenshots.push({
				path: path,
				ts: ts
			});

			// stats
			timeTotal += (Date.now() - now);
		} else {
			phantomas.log('Film strip: rendering to %s failed!', path);
		}
	}

	if (phantomas.getParam('film-strip', false, 'string')) {
		// a comma separated list of milliseconds was passed (issue #174)
		var timePoints = phantomas.getParam('film-strip').split(',');
		phantomas.log('Film strip: screenshots will be taken at: %s ms', timePoints.join(', '));

		phantomas.on('responseEnd', function() {
			timePoints.forEach(function(point) {
				setTimeout(function() {
					phantomas.log('Film strip: rendering for %d ms', point);
					screenshot(point);
				}, point);
			});
		});
	} else {
		// bind to events to render screenshots on
		[
			'loadStarted',
			'send',
			'recv',
			'loadFinished',
			'report',
		].forEach(function(ev) {
			phantomas.on(ev, function() {
				screenshot();
			});
		});
	}

	// print-out stats
	phantomas.on('report', function() {
		phantomas.log('Film strip: spent %d ms on rendering %d screenshots', timeTotal, screenshots.length);

		// TODO: generate a movie
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.gecko" id="apidoc.module.phantomas.gecko">module phantomas.gecko</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.gecko.getUserAgent" id="apidoc.element.phantomas.gecko.getUserAgent">
        function <span class="apidocSignatureSpan">phantomas.gecko.</span>getUserAgent
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserAgent = function () {
		return 'SlimerJS/' + pkg.version
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				engine = this.getEngine(key);
			}
		}, this);
	}

	// customize user agent
	if (typeof this.options['user-agent'] === 'undefined') {
		this.options['user-agent'] = "phantomas/" + VERSION + " (" + engine.<span class="apidocCodeKeywordSpan
">getUserAgent</span>() + "; " + process.platform + " " + process.arch + ")";
	}

	// build engine specific command-line arguments
	var engineArgs = [];

	Object.keys(this.options).forEach(function(key) {
		var val = this.options[key],
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.gecko.spawn" id="apidoc.element.phantomas.gecko.spawn">
        function <span class="apidocSignatureSpan">phantomas.gecko.</span>spawn
        <span class="apidocSignatureSpan">(path, engineArgs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">spawn = function (path, engineArgs) {
		// xvfb arguments
		var args = [
			'--auto-servernum',
			'--server-num=1',
			//'--server-args=\':1 -noreset -screen 1 1600x1200x24\''
		];

		// SlimerJS binary
		args.push(path);

		// filter out --ssl-protocol option
		// supoorted by PhantomJS, but not by SlimerJS
		engineArgs = engineArgs.filter(function(opt) {
			return (opt.indexOf('--ssl-protocol=') === 0) ? false /* remove */ : true;
		});

		// pass runner and phantomas options
		args = args.concat(engineArgs);

		debug('xvfb-run %s', args.join(' '));

		// spawn SlimerJS using xvfb
		//
		// sudo aptitude install xvfb libasound2 libgtk2.0-0
		//
		// @see https://gist.github.com/macbre/e7e2e35caf9d91af5ecf
		return spawn('xvfb-run', args, {
			env: process.env
		});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	engineArgs.push(JSON.stringify(this.options));

	// spawn the process
	var proc;

	if (typeof engine.spawn === 'function') {
		debug('Using custom spawn function');
		proc = engine.<span class="apidocCodeKeywordSpan">spawn</span>(engine.path, engineArgs);
	} else {
		proc = spawn(engine.path, engineArgs, {
			env: process.env
		});
	}

	return proc;
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.globalVariables" id="apidoc.module.phantomas.globalVariables">module phantomas.globalVariables</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.globalVariables.module" id="apidoc.element.phantomas.globalVariables.module">
        function <span class="apidocSignatureSpan">phantomas.globalVariables.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('globalVariables'); // @desc number of JS globals variables @offenders
	phantomas.setMetric('globalVariablesFalsy'); // @desc number of JS globals variables with falsy value @offenders

	phantomas.on('report', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				var globals = [],
					allowed = ['Components', 'XPCNativeWrapper', 'XPCSafeJSObjectWrapper', 'getInterface', 'netscape', 'GetWeakReference', '_phantom
', 'callPhantom', '__phantomas', 'performance'],
					varName,
					iframe,
					cleanWindow;

				if (!document.body) {
					return false;
				}

				phantomas.spyEnabled(false, 'counting global variables (injecting an empty iframe)');

				// create an empty iframe to get the list of core members
				iframe = document.createElement('iframe');
				iframe.style.display = 'none';
				iframe.src = 'about:blank';
				document.body.appendChild(iframe);

				cleanWindow = iframe.contentWindow;

				for (varName in cleanWindow) {
					allowed.push(varName);
				}

				// get all members of window and filter them
				for (varName in window) {
					try {
						if ((allowed.indexOf(varName) &gt; -1) || (typeof window[varName] === 'undefined') /* ignore variables exposed by window.__defineGetter__
 */ ) {
							continue;
						}

						// filter out 0, 1, 2, ...
						if (/^\d+$/.test(varName)) {
							continue;
						}

						phantomas.incrMetric('globalVariables');
						phantomas.addOffender('globalVariables', varName);

						if ([false, null].indexOf(window[varName]) &gt; -1) {
							phantomas.incrMetric('globalVariablesFalsy');
							phantomas.addOffender('globalVariablesFalsy', '%s = %j', varName, window[varName]);
						}
					} catch (ex) {
						// handle errors (issue #560)
						phantomas.log('globalVariables: error when checking %s - %s!', varName, ex.message);
					}
				}

				// cleanup (issue #297)
				document.body.removeChild(iframe);

				phantomas.spyEnabled(true);
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.har" id="apidoc.module.phantomas.har">module phantomas.har</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.har.module" id="apidoc.element.phantomas.har.module">
        function <span class="apidocSignatureSpan">phantomas.har.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	var param = phantomas.getParam('har'),
		path = '',
		timeToLastByte = undefined;

	var page = {
		origin: undefined,
		resources: [],
		title: undefined,
		address: undefined,
		startTime: undefined,
		endTime: undefined,
		onDOMReadyTime: undefined,
		windowOnLoadTime: undefined,
		timeToLastByte: undefined,
		onLoad: undefined,
		onContentLoad: undefined
	};

	var creator = {
		name: "Phantomas - (using phantomHAR)",
		version: phantomas.getVersion()
	};

	if (typeof param === 'undefined') {
		phantomas.log('HAR: no path specified, use --har &lt;path&gt;');
		return;
	}

	// --har
	if (param === true) {
		// defaults to "2013-12-07T20:15:01.521Z.har"
		path = (new Date()).toJSON() + '.har';
	}
	// --har [file name]
	else {
		path = param;
	}

	phantomas.log('HAR: will be stored in %s', path);

	phantomas.on('pageBeforeOpen', function(p) {
		page.origin = p;
	});

	phantomas.on('pageOpen', function() {
		page.startTime = new Date();
	});

	phantomas.on('loadFinished', function() {
		page.endTime = new Date();
	});

	phantomas.on('send', function(entry, res) {
		page.resources[res.id] = {
			request: res,
			response: null,
			entry: null
		};
	});

	phantomas.on('recv', function(entry, res) {
		page.resources[res.id].response = res;
		page.resources[res.id].entry = entry;
		timeToLastByte = entry.timeToLastByte;
	});

	phantomas.on('metric', function(name, value) {
		switch (name) {
			case 'domContentLoaded':
				page.onDOMReadyTime = value;
				break;
			case 'domComplete':
				page.windowOnLoadTime = value;
				break;
			case 'timeToLastByte':
				page.timeToLastByte = value;
				break;
		}
	});

	phantomas.on('report', function() {
		// Set endTime if page was not finished correctly
		if (!page.endTime)
			page.endTime = new Date();

		// If metric 'windowOnLoadTime' hasn't been fired, compute it
		if (!page.windowOnLoadTime)
			page.windowOnLoadTime = page.endTime.getTime() - page.startTime.getTime();

		// If metric 'timeToLastByte' hasn't been fired, use last entry
		if (!page.timeToLastByte)
			page.timeToLastByte = timeToLastByte;

		page.address = page.origin.url;
		page.title = page.origin.title;

		// Times (windowOnLoadTime, onDOMReadyTime) are relative to responseEnd entry
		// in NavigationTiming (represented by timeToLastByte metric)
		page.onLoad = page.timeToLastByte + page.windowOnLoadTime;
		page.onContentLoad = page.timeToLastByte + page.onDOMReadyTime;

		phantomas.log('HAR: generating for &lt;%s&gt; ("%s")', page.address, page.title);

		var har,
			dump;

		try {
			har = createHAR(page, creator);
		} catch (e) {
			phantomas.log('HAR: failed to build - %s', e);
			return;
		}

		try {
			dump = JSON.stringify(har);
		} catch (e) {
			phantomas.log('HAR: failed to stringify HAR to JSON - %s!', e);
			return;
		}

		phantomas.log("HAR: saving to '%s',,,", path);
		try {
			fs.write(path, dump);
		} catch (e) {
			phantomas.log('HAR: failed to save HAR - %s!', e);
			return;
		}

		phantomas.log('HAR: done');
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.headers" id="apidoc.module.phantomas.headers">module phantomas.headers</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.headers.module" id="apidoc.element.phantomas.headers.module">
        function <span class="apidocSignatureSpan">phantomas.headers.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('headersCount'); // @desc number of requests and responses headers
	phantomas.setMetric('headersSentCount'); // @desc number of headers sent in requests
	phantomas.setMetric('headersRecvCount'); // @desc number of headers received in responses

	phantomas.setMetric('headersSize'); // @desc size of all headers
	phantomas.setMetric('headersSentSize'); // @desc size of sent headers
	phantomas.setMetric('headersRecvSize'); // @desc size of received headers

	phantomas.setMetric('headersBiggerThanContent'); // @desc number of responses with headers part bigger than the response body

	function processHeaders(headers) {
		var res = {
			count: 0,
			size: 0
		};

		if (headers) {
			headers.forEach(function(header) {
				res.count++;
				res.size += (header.name + ': ' + header.value + '\r\n').length;
			});
		}

		return res;
	}

	phantomas.on('send', function(entry, res) {
		var headers = processHeaders(res.headers);

		phantomas.incrMetric('headersCount', headers.count);
		phantomas.incrMetric('headersSize', headers.size);

		phantomas.incrMetric('headersSentCount', headers.count);
		phantomas.incrMetric('headersSentSize', headers.size);
	});

	phantomas.on('recv', function(entry, res) {
		var headers = processHeaders(res.headers);

		phantomas.incrMetric('headersCount', headers.count);
		phantomas.incrMetric('headersSize', headers.size);

		phantomas.incrMetric('headersRecvCount', headers.count);
		phantomas.incrMetric('headersRecvSize', headers.size);

		// skip HTTP 204 No Content responses
		if ((entry.status !== 204) &amp;&amp; (headers.size &gt; entry.contentLength)) {
			phantomas.incrMetric('headersBiggerThanContent');
			phantomas.addOffender('headersBiggerThanContent', '%s (body: %s kB / headers: %s kB)', entry.url, (entry.contentLength / 1024
).toFixed(2), (headers.size / 1024).toFixed(2));
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.httpAuth" id="apidoc.module.phantomas.httpAuth">module phantomas.httpAuth</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.httpAuth.module" id="apidoc.element.phantomas.httpAuth.module">
        function <span class="apidocSignatureSpan">phantomas.httpAuth.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var userName = phantomas.getParam('auth-user', '', 'string'),
		password = phantomas.getParam('auth-pass', '', 'string');

	if (userName === '' || password === '') {
		return;
	}

	phantomas.on('pageBeforeOpen', function(page) {
		phantomas.log('Using HTTP auth: %s (pass: %s)', userName, new Array(password.length + 1).join('*'));

		page.settings.userName = userName;
		page.settings.password = password;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ipc" id="apidoc.module.phantomas.ipc">module phantomas.ipc</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ipc.ipc" id="apidoc.element.phantomas.ipc.ipc">
        function <span class="apidocSignatureSpan">phantomas.</span>ipc
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ipc(stream) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.stream = stream;
	this.events = new emitter();

	this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ipc.prototype" id="apidoc.module.phantomas.ipc.prototype">module phantomas.ipc.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.init" id="apidoc.element.phantomas.ipc.prototype.init">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function () {
	var self = this,
		buffer = '';

	this.stream.on('data', function(data) {
		buffer += data.toString().trim();

		// check for the separator at the of the buffer - parse the data
		if (buffer.substr(-2) === SEPARATOR) {
			self.parse(buffer);
			buffer = '';
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	SEPARATOR = "\xFF\xFF";

function ipc(stream) {
	/* jshint validthis: true */
	this.stream = stream;
	this.events = new emitter();

	this.<span class="apidocCodeKeywordSpan">init</span>();
}

ipc.prototype.setEventEmitter = function(emitter) {
	this.events = emitter;
};

ipc.prototype.init = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.on" id="apidoc.element.phantomas.ipc.prototype.on">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>on
        <span class="apidocSignatureSpan">(event, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (event, fn) {
	this.events.on(event, fn);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var child = phantomas(url, options, function(err, data, results) {
		callback(
			null, // pass null even in case of an error to continue async.series processing (issue #380)
			[err, results]
		);
	});

	child.<span class="apidocCodeKeywordSpan">on</span>('progress', function(progress, inc) {
		if (bar) {
			bar.tick(inc);
		}
	});

	// pipe --verbose messages to stderr
	child.stderr.pipe(process.stderr);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.parse" id="apidoc.element.phantomas.ipc.prototype.parse">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>parse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (data) {
	// split by separator
	data.split(SEPARATOR).forEach(function(msg) {
		msg = msg.trim();

		if (msg === '') return;

		try {
			msg = JSON.parse(msg);
			debug('%s: %j', msg.event, msg.data);

			// send event name and the rest of the data
			var args = msg.data;
			args.unshift(msg.event);

			this.events.emit.apply(this.events, args);

			// send generic "_msg" event for each message received (issue #354)
			this.events.emit('_msg', args);
		} catch (e) {
			// send PhantomJS errors to stderr to ease debugging of issues like #302
			debug('message parsing failed: "%s"', msg);
			process.stderr.write(msg + "\n");
		}
	}, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe('screenshot', 'render fully loaded page to a given file')
	.describe('silent', 'don\'t write anything to the console').boolean('silent');

// handle --config (issue #209)
program.setConfigFile('config');

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log('phantomas v%s', phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.setEventEmitter" id="apidoc.element.phantomas.ipc.prototype.setEventEmitter">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>setEventEmitter
        <span class="apidocSignatureSpan">(emitter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setEventEmitter = function (emitter) {
	this.events = emitter;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.jQuery" id="apidoc.module.phantomas.jQuery">module phantomas.jQuery</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.jQuery.module" id="apidoc.element.phantomas.jQuery.module">
        function <span class="apidocSignatureSpan">phantomas.jQuery.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var lastUrl;

	phantomas.setMetric('jQueryVersion', ''); // @desc version of jQuery framework (if loaded) [string]
	phantomas.setMetric('jQueryVersionsLoaded'); // @desc number of loaded jQuery "instances" (even in the same version)
	phantomas.setMetric('jQueryOnDOMReadyFunctions'); // @desc number of functions bound to onDOMReady event
	phantomas.setMetric('jQueryWindowOnLoadFunctions'); // @desc number of functions bound to windowOnLoad event
	phantomas.setMetric('jQuerySizzleCalls'); // @desc number of calls to Sizzle (including those that will be resolved using querySelectorAll
)
	phantomas.setMetric('jQueryEventTriggers'); // @desc number of jQuery event triggers
	phantomas.setMetric('jQueryDOMReads'); // @desc number of DOM read operations
	phantomas.setMetric('jQueryDOMWrites'); // @desc number of DOM write operations
	phantomas.setMetric('jQueryDOMWriteReadSwitches'); // @desc number of read operations that follow a series of write operations (
will cause repaint and can cause reflow)

	// spy calls to jQuery functions
	phantomas.on('init', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				// read &amp; write DOM operations (issue #436)
				function spyReadsAndWrites(jQuery) {
					var TYPE_SET = 'write',
						TYPE_GET = 'read';

					function report(type, funcName, context, args) {
						var caller = phantomas.getCaller(1),
							contextPath = phantomas.getDOMPath(context);

						args = (typeof args !== 'undefined') ? Array.prototype.slice.apply(args) : undefined;

						phantomas.emit('jQueryOp', type, funcName, args, contextPath, caller);
					}

					// "complex" getters and setters
					[
						'attr',
						'css',
						'prop',
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(propName, val) {
							// setter when called with two arguments or provided with key/value set
							var isSet = (typeof val !== 'undefined') || (propName.toString() === '[object Object]');
							report(isSet ? TYPE_SET : TYPE_GET, funcName, this[0], arguments);
						});
					});

					// simple getters and setters
					[
						'height',
						'innerHeight',
						'innerWidth',
						'offset',
						'outerHeight',
						'outerWidth',
						'text',
						'width',
						'scrollLeft',
						'scrollTop'
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(val) {
							// setter when called with an argument
							var isSet = (typeof val !== 'undefined');
							report(isSet ? TYPE_SET : TYPE_GET, funcName, this[0], arguments);
						});
					});

					// setters
					[
						'addClass',
						'removeAttr',
						'removeClass',
						'removeProp',
						'toggleClass',
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(val) {
							report(TYPE_SET, funcName, this[0], [val]);
						});
					});
					// getters
					[
						'hasClass',
						'position',
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(val) {
							report(TYPE_GET, funcName, this[0], arguments);
						});
					});
				}

				phantomas.spyGlobalVar('jQuery', function(jQuery) {
					var version;

					if (!jQuery || !jQuery.fn) {
						phantomas.log('jQuery: unable to detect version!');
						return;
					}

					// Tag the current version of jQuery to avoid multiple reports of jQuery being loaded
					// when it's actually only restored via $.noConflict(true) - see comments in #435
					if (jQuery.__phantomas === true) {
						phantomas.log('jQuery: this instance has already been seen by phantomas');
						return;
					}
					jQuery.__phantomas = true;

					// report the version of jQuery
					version = jQuery.fn.jquery;
					phantomas.emit('jQueryLoaded', version);

					// jQuery.ready.promise
					// works for jQuery 1.8.0+ (released Aug 09 2012)
					phantomas.spy(jQuery.ready, 'promise', function() {
						phantomas.incrMetric('jQueryOnDOMReadyFunctions');
						phantomas.addOffender('jQueryOnDOMReadyFunctions', phantomas.getCaller(3));
					}) || phantomas.log('jQuery: can not ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.javaScriptBottlenecks" id="apidoc.module.phantomas.javaScriptBottlenecks">module phantomas.javaScriptBottlenecks</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.javaScriptBottlenecks.module" id="apidoc.element.phantomas.javaScriptBottlenecks.module">
        function <span class="apidocSignatureSpan">phantomas.javaScriptBottlenecks.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('documentWriteCalls'); //@desc number of calls to either document.write or document.writeln @offenders
	phantomas.setMetric('evalCalls'); // @desc number of calls to eval (either direct or via setTimeout / setInterval) @offenders

	// spy calls to eval only when requested (issue #467)
	var spyEval = phantomas.getParam('spy-eval') === true;
	if (!spyEval) {
		phantomas.log('javaScriptBottlenecks: to spy calls to eval() run phantomas with --spy-eval option');
	}

	phantomas.on('init', function() {
		phantomas.evaluate(function(spyEval) {
			(function(phantomas) {
				function report(msg, caller, backtrace, metric) {
					phantomas.log(msg + ': from ' + caller + '!');
					phantomas.log('Backtrace: ' + backtrace);

					phantomas.incrMetric(metric);
					phantomas.addOffender(metric, "%s from %s", msg, caller);
				}

				// spy calls to eval()
				if (spyEval) {
					phantomas.spy(window, 'eval', function(code) {
						report('eval() called directly', phantomas.getCaller(), phantomas.getBacktrace(), 'evalCalls');
						phantomas.log('eval\'ed code: ' + (code || '').substring(0, 150) + '(...)');
					});
				}

				// spy calls to setTimeout / setInterval with string passed instead of a function
				phantomas.spy(window, 'setTimeout', function(fn, interval) {
					if (typeof fn !== 'string') return;

					report('eval() called via setTimeout("' + fn + '")', phantomas.getCaller(), phantomas.getBacktrace(), 'evalCalls');
				});

				phantomas.spy(window, 'setInterval', function(fn, interval) {
					if (typeof fn !== 'string') return;

					report('eval() called via setInterval("' + fn + '")', phantomas.getCaller(), phantomas.getBacktrace(), 'evalCalls');
				});

				// spy document.write(ln)
				phantomas.spy(document, 'write', function(arg) {
					report('document.write() used', phantomas.getCaller(), phantomas.getBacktrace(), 'documentWriteCalls');
				});

				phantomas.spy(document, 'writeln', function(arg) {
					report('document.writeln() used', phantomas.getCaller(), phantomas.getBacktrace(), 'documentWriteCalls');
				});
			})(window.__phantomas);
		}, spyEval);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.jserrors" id="apidoc.module.phantomas.jserrors">module phantomas.jserrors</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.jserrors.module" id="apidoc.element.phantomas.jserrors.module">
        function <span class="apidocSignatureSpan">phantomas.jserrors.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('jsErrors'); // @desc number of JavaScript errors

	function formatTrace(trace) {
		var ret = [];

		if (Array.isArray(trace)) {
			trace.forEach(function(entry) {
				ret.push((entry.function ? entry.function+'(): ' : 'unknown fn: ') + (entry.sourceURL || entry.file) + ' @ ' + entry.line);
			});
		}

		return ret;
	}

	phantomas.on('jserror', function(msg, trace) {
		trace = formatTrace(trace);

		phantomas.log(msg);
		phantomas.log('Backtrace: ' + trace.join(' / '));

		phantomas.incrMetric('jsErrors');
		phantomas.addOffender('jsErrors', msg + ' - ' + trace.join(' / '));
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.keepAlive" id="apidoc.module.phantomas.keepAlive">module phantomas.keepAlive</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.keepAlive.module" id="apidoc.element.phantomas.keepAlive.module">
        function <span class="apidocSignatureSpan">phantomas.keepAlive.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var closedConnectionHosts = {};

	phantomas.setMetric('closedConnections'); // @desc number of requests not keeping the connection alive and slowing down the next
 request

	phantomas.on('recv', function(entry, res) {
		var connectionHeader = (entry.headers.Connection || '').toLowerCase(),
			// Taking the protocol in account, in case the same domain is called with two different protocols.
			host = entry.protocol + '://' + entry.domain;

		if (connectionHeader.indexOf('close') !== -1) {
			// Don't blame it immediatly, wait to see if the connection is needed a second time.
			closedConnectionHosts[host] = entry.url;
		}
	});

	phantomas.on('send', function(entry, res) {
		var host = entry.protocol + '://' + entry.domain,
			previousClosedConnection = closedConnectionHosts[host];

		if (typeof previousClosedConnection !== 'undefined') {
			// There was a closed connection. We can blame it safely now!
			phantomas.incrMetric('closedConnections');
			phantomas.addOffender('closedConnections', previousClosedConnection);

			phantomas.log('keepAlive: connection for &lt;%s&gt; was closed, but the page requested &lt;%s&gt;', host, entry.url);

			closedConnectionHosts[host] = undefined;
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.lazyLoadableImages" id="apidoc.module.phantomas.lazyLoadableImages">module phantomas.lazyLoadableImages</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.lazyLoadableImages.module" id="apidoc.element.phantomas.lazyLoadableImages.module">
        function <span class="apidocSignatureSpan">phantomas.lazyLoadableImages.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('lazyLoadableImagesBelowTheFold'); // @desc number of images displayed below the fold that can be lazy-loaded

	phantomas.on('report', function() {
		phantomas.log('lazyLoadableImages: analyzing which images can be lazy-loaded...');

		phantomas.evaluate(function() {
			(function(phantomas) {
				phantomas.spyEnabled(false, 'analyzing which images can be lazy-loaded');

				var images = document.body.getElementsByTagName('img'),
					i,
					len = images.length,
					offset,
					path,
					processedImages = {},
					src,
					viewportHeight = window.innerHeight;

				phantomas.log('lazyLoadableImages: %d image(s) found, assuming %dpx offset to be the fold', len, viewportHeight);

				for (i = 0; i &lt; len; i++) {
					// @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect
					offset = images[i].getBoundingClientRect().top;
					src = images[i].getAttribute('src');

					// ignore base64-encoded images
					if (src === null || src === '' || /^data:/.test(src)) {
						continue;
					}

					path = phantomas.getDOMPath(images[i]);

					// get the most top position for a given image (deduplicate by src)
					if (typeof processedImages[src] === 'undefined') {
						processedImages[src] = {
							offset: offset,
							path: path
						};
					}

					// maybe there's the same image loaded above the fold?
					if (offset &lt; processedImages[src].offset) {
						processedImages[src] = {
							offset: offset,
							path: path
						};
					}
				}

				phantomas.log('lazyLoadableImages: checking %d unique image(s)', Object.keys(processedImages).length);

				Object.keys(processedImages).forEach(function(src) {
					var img = processedImages[src];

					if (img.offset &gt; viewportHeight) {
						phantomas.log('lazyLoadableImages: &lt;%s&gt; image (%s) is below the fold (at %dpx)', src, img.path, img.offset);

						phantomas.incrMetric('lazyLoadableImagesBelowTheFold');
						phantomas.addOffender('lazyLoadableImagesBelowTheFold', src);
					}
				});

				phantomas.spyEnabled(true);
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.localStorage" id="apidoc.module.phantomas.localStorage">module phantomas.localStorage</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.localStorage.module" id="apidoc.element.phantomas.localStorage.module">
        function <span class="apidocSignatureSpan">phantomas.localStorage.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('localStorageEntries'); // @desc number of entries in local storage

	phantomas.on('report', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				var entries;

				try {
					entries = Object.keys(window.localStorage);

					phantomas.setMetric('localStorageEntries', entries.length);

					entries.forEach(function(entry) {
						phantomas.addOffender('localStorageEntries', entry);
					});
				} catch (ex) {
					phantomas.log('localStorageEntries: not set because ' + ex + '!');
				}
			}(window.__phantomas));
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.mainRequest" id="apidoc.module.phantomas.mainRequest">module phantomas.mainRequest</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.mainRequest.module" id="apidoc.element.phantomas.mainRequest.module">
        function <span class="apidocSignatureSpan">phantomas.mainRequest.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var isMainRequest = true;
	var statusCodes = [];

	phantomas.on('recv', function(entry, res) {
		if (isMainRequest) {
			captureStatusCode(statusCodes, res.status);
		}
	});

	phantomas.on('responseEnd', function(entry, res) {
		isMainRequest = false;
		captureStatusCode(statusCodes, res.status);

		phantomas.setMetric('statusCodesTrail', statusCodes.join(','), true); // @desc comma-separated list of HTTP status codes that
main request followed through (could contain a single element if the main request is a terminal one) [string]
	});

	function captureStatusCode(codes, code) {
		codes.push(code);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.navigationTiming" id="apidoc.module.phantomas.navigationTiming">module phantomas.navigationTiming</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.navigationTiming.module" id="apidoc.element.phantomas.navigationTiming.module">
        function <span class="apidocSignatureSpan">phantomas.navigationTiming.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.once('init', function() {
		phantomas.evaluate(function () {
			(function(phantomas) {
				function emit(eventName) {
					phantomas.log('Navigation Timing milestone: %s', eventName);
					phantomas.emit('milestone', eventName);
				}

				document.addEventListener("DOMContentLoaded", function() {
					// both DOM and CSSOM are constructed, no stylesheets are blocking JavaScript execution
					emit('domReady');
				});

				// domInteractive and domComplete
				document.addEventListener('readystatechange', function() {
					var readyState = document.readyState;

					// @see http://www.w3.org/TR/html5/dom.html#documentreadystate
					switch (readyState) {
						// the browser has finished parsing all of the HTML and DOM construction is complete
						case 'interactive':
							emit('domInteractive');
							break;

							// the processing is complete and all of the resources on the page have finished downloading
						case 'complete':
							emit('domComplete');
							break;
					}
				});
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.optimist_config_file" id="apidoc.module.phantomas.optimist_config_file">module phantomas.optimist_config_file</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.alias" id="apidoc.element.phantomas.optimist_config_file.alias">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>alias
        <span class="apidocSignatureSpan">(x, y)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">alias = function (x, y) {
    if (typeof x === 'object') {
        Object.keys(x).forEach(function (key) {
            self.alias(key, x[key]);
        });
    }
    else {
        options.alias[x] = (options.alias[x] || []).concat(y);
    }
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// parse options
program
	.usage('PhantomJS-based web performance metrics collector\n\nphantomas &lt;url&gt; [options]')
	// mandatory
	.header('General options')
	.describe('url', 'Set URL to work with').string('url')
	// version / help
	.describe('version', 'Show version number and quit').boolean('version').<span class="apidocCodeKeywordSpan
">alias</span>('version', 'V')
	.describe('help', 'This help text').boolean('help').alias('help', 'h')
	.describe('verbose', 'print debug messages to the console').boolean('verbose').alias('verbose
', 'v')
	.describe('debug', 'run PhantomJS in debug mode').default('debug')
	.describe('modules', 'run selected modules only [moduleOne],[moduleTwo],...')
	.describe('include-dirs', 'load modules from specified directories [dirOne],[dirTwo],...')
	.describe('skip-modules', 'skip selected modules [moduleOne],[moduleTwo],...')
	.describe('config', 'uses JSON or YAML-formatted config file to set parameters').string('config')
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.boolean" id="apidoc.element.phantomas.optimist_config_file.boolean">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>boolean
        <span class="apidocSignatureSpan">(bools)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">boolean = function (bools) {
    options.boolean.push.apply(options.boolean, [].concat(bools));
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// parse options
program
	.usage('PhantomJS-based web performance metrics collector\n\nphantomas &lt;url&gt; [options]')
	// mandatory
	.header('General options')
	.describe('url', 'Set URL to work with').string('url')
	// version / help
	.describe('version', 'Show version number and quit').<span class="apidocCodeKeywordSpan">boolean</span>('
;version').alias('version', 'V')
	.describe('help', 'This help text').boolean('help').alias('help', 'h')
	.describe('verbose', 'print debug messages to the console').boolean('verbose').alias('verbose
', 'v')
	.describe('debug', 'run PhantomJS in debug mode').default('debug')
	.describe('modules', 'run selected modules only [moduleOne],[moduleTwo],...')
	.describe('include-dirs', 'load modules from specified directories [dirOne],[dirTwo],...')
	.describe('skip-modules', 'skip selected modules [moduleOne],[moduleTwo],...')
	.describe('config', 'uses JSON or YAML-formatted config file to set parameters').string('config')
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.check" id="apidoc.element.phantomas.optimist_config_file.check">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>check
        <span class="apidocSignatureSpan">(f)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">check = function (f) {
    checks.push(f);
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.default" id="apidoc.element.phantomas.optimist_config_file.default">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>default
        <span class="apidocSignatureSpan">(key, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">default = function (key, value) {
    if (typeof key === 'object') {
        Object.keys(key).forEach(function (k) {
            self.default(k, key[k]);
        });
    }
    else {
        options.default[key] = value;
    }
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// mandatory
	.header('General options')
	.describe('url', 'Set URL to work with').string('url')
	// version / help
	.describe('version', 'Show version number and quit').boolean('version').alias('version', &amp;#
x27;V')
	.describe('help', 'This help text').boolean('help').alias('help', 'h')
	.describe('verbose', 'print debug messages to the console').boolean('verbose').alias('verbose
', 'v')
	.describe('debug', 'run PhantomJS in debug mode').<span class="apidocCodeKeywordSpan">default</span>('
debug')
	.describe('modules', 'run selected modules only [moduleOne],[moduleTwo],...')
	.describe('include-dirs', 'load modules from specified directories [dirOne],[dirTwo],...')
	.describe('skip-modules', 'skip selected modules [moduleOne],[moduleTwo],...')
	.describe('config', 'uses JSON or YAML-formatted config file to set parameters').string('config')
	// optional params
	.header('Client options')
	// --engine=[webkit|gecko]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.demand" id="apidoc.element.phantomas.optimist_config_file.demand">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>demand
        <span class="apidocSignatureSpan">(keys)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">demand = function (keys) {
    if (typeof keys == 'number') {
        if (!demanded._) demanded._ = 0;
        demanded._ += keys;
    }
    else if (Array.isArray(keys)) {
        keys.forEach(function (key) {
            self.demand(key);
        });
    }
    else {
        demanded[keys] = true;
    }

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.describe" id="apidoc.element.phantomas.optimist_config_file.describe">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>describe
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">describe = function (opt) {
	if (nextHeader) {
		headers.push({
			label: nextHeader,
			before: opt
		});
		nextHeader = null;
	}
	return _describe.apply(optimist, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	url = '';

// parse options
program
	.usage('PhantomJS-based web performance metrics collector\n\nphantomas &lt;url&gt; [options]')
	// mandatory
	.header('General options')
	.<span class="apidocCodeKeywordSpan">describe</span>('url', 'Set URL to work with').string('url')
	// version / help
	.describe('version', 'Show version number and quit').boolean('version').alias('version', &amp;#
x27;V')
	.describe('help', 'This help text').boolean('help').alias('help', 'h')
	.describe('verbose', 'print debug messages to the console').boolean('verbose').alias('verbose
', 'v')
	.describe('debug', 'run PhantomJS in debug mode').default('debug')
	.describe('modules', 'run selected modules only [moduleOne],[moduleTwo],...')
	.describe('include-dirs', 'load modules from specified directories [dirOne],[dirTwo],...')
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.header" id="apidoc.element.phantomas.optimist_config_file.header">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>header
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">header = function (s) {
	nextHeader = s;
	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	runs,
	url = '';

// parse options
program
	.usage('PhantomJS-based web performance metrics collector\n\nphantomas &lt;url&gt; [options]')
	// mandatory
	.<span class="apidocCodeKeywordSpan">header</span>('General options')
	.describe('url', 'Set URL to work with').string('url')
	// version / help
	.describe('version', 'Show version number and quit').boolean('version').alias('version', &amp;#
x27;V')
	.describe('help', 'This help text').boolean('help').alias('help', 'h')
	.describe('verbose', 'print debug messages to the console').boolean('verbose').alias('verbose
', 'v')
	.describe('debug', 'run PhantomJS in debug mode').default('debug')
	.describe('modules', 'run selected modules only [moduleOne],[moduleTwo],...')
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.help" id="apidoc.element.phantomas.optimist_config_file.help">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>help
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">help = function () {
	var text = _help.apply(optimist, arguments),
		i, s, p, opt_header = "\nOptions:",
		opt_header_len = opt_header.length;
	//console.log(text,headers);
	for (i = 0; i &lt; headers.length; i++) {
		s = "\n  --" + headers[i].before;
		p = text.indexOf(s);
		if (p != -1) {
			s = "\n" + ansistyles.bright(headers[i].label) + ":";
			text = text.substr(0, p) + s + text.substr(p);
			if (text.substr(p - opt_header_len, opt_header_len) == opt_header) {
				text = text.substr(0, p - opt_header_len) + text.substr(p);
			}
		}
	}
	return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.option" id="apidoc.element.phantomas.optimist_config_file.option">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>option
        <span class="apidocSignatureSpan">(key, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">option = function (key, opt) {
    if (typeof key === 'object') {
        Object.keys(key).forEach(function (k) {
            self.options(k, key[k]);
        });
    }
    else {
        if (opt.alias) self.alias(key, opt.alias);
        if (opt.demand) self.demand(key);
        if (typeof opt.default !== 'undefined') {
            self.default(key, opt.default);
        }

        if (opt.boolean || opt.type === 'boolean') {
            self.boolean(key);
        }
        if (opt.string || opt.type === 'string') {
            self.string(key);
        }

        var desc = opt.describe || opt.description || opt.desc;
        if (desc) {
            self.describe(key, desc);
        }
    }

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.options" id="apidoc.element.phantomas.optimist_config_file.options">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>options
        <span class="apidocSignatureSpan">(key, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">options = function (key, opt) {
    if (typeof key === 'object') {
        Object.keys(key).forEach(function (k) {
            self.options(k, key[k]);
        });
    }
    else {
        if (opt.alias) self.alias(key, opt.alias);
        if (opt.demand) self.demand(key);
        if (typeof opt.default !== 'undefined') {
            self.default(key, opt.default);
        }

        if (opt.boolean || opt.type === 'boolean') {
            self.boolean(key);
        }
        if (opt.string || opt.type === 'string') {
            self.string(key);
        }

        var desc = opt.describe || opt.description || opt.desc;
        if (desc) {
            self.describe(key, desc);
        }
    }

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.parse" id="apidoc.element.phantomas.optimist_config_file.parse">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>parse
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (args) {
	var options = origParse(args);
	debug('parse: %j', args);

	// check the config file
	var configFileName = this.configFileParam &amp;&amp; options[this.configFileParam],
		configParsed;

	// if --config is not provided, quit
	if (!configFileName) {
		debug('options: %j', options);
		return options;
	}

	configParsed = parseConfigFile(configFileName);

	// apply the rest of the options provided via command line
	Object.keys(configParsed).forEach(function(key) {
		// check if given option was not provided via command line
		if (args.indexOf('--' + key) &gt; -1) {
			debug('--%s option provided via command line, will skip the value from config file', key);
			return;
		}

		options[key] = configParsed[key];
	});

	// cleanup
	delete options[this.configFileParam];

	debug('options: %j', options);
	return options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe('screenshot', 'render fully loaded page to a given file')
	.describe('silent', 'don\'t write anything to the console').boolean('silent');

// handle --config (issue #209)
program.setConfigFile('config');

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log('phantomas v%s', phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.setConfigFile" id="apidoc.element.phantomas.optimist_config_file.setConfigFile">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>setConfigFile
        <span class="apidocSignatureSpan">(configFileParam)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setConfigFile = function (configFileParam) {
	this.configFileParam = configFileParam;
	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe('page-source-dir', '[experimental] folder path to output page source (default is ./html directory)'
;)
	.describe('progress', 'shows page loading progress bar (disables verbose mode)').boolean('progress'
;)
	.describe('reporter', 'output format / reporter').default('reporter', 'plain').alias(&amp;#
x27;reporter', 'R').alias('reporter', 'format')
	.describe('screenshot', 'render fully loaded page to a given file')
	.describe('silent', 'don\'t write anything to the console').boolean('silent');

// handle --config (issue #209)
program.<span class="apidocCodeKeywordSpan">setConfigFile</span>('config');

// parse it
options = program.parse(process.argv);

// show version number
if (options.version === true) {
	console.log('phantomas v%s', phantomas.version);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.showHelp" id="apidoc.element.phantomas.optimist_config_file.showHelp">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>showHelp
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">showHelp = function (fn) {
    if (!fn) fn = console.error;
    fn(self.help());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (options.version === true) {
	console.log('phantomas v%s', phantomas.version);
	process.exit(0);
}

// show help
if (options.help === true) {
	program.<span class="apidocCodeKeywordSpan">showHelp</span>();
	process.exit(0);
}

// handle URL passed without --url option (#249)
if (typeof options._[2] === 'string') {
	options.url = options._[2];
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.string" id="apidoc.element.phantomas.optimist_config_file.string">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>string
        <span class="apidocSignatureSpan">(strings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">string = function (strings) {
    options.string.push.apply(options.string, [].concat(strings));
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	url = '';

// parse options
program
	.usage('PhantomJS-based web performance metrics collector\n\nphantomas &lt;url&gt; [options]')
	// mandatory
	.header('General options')
	.describe('url', 'Set URL to work with').<span class="apidocCodeKeywordSpan">string</span>('url')
	// version / help
	.describe('version', 'Show version number and quit').boolean('version').alias('version', &amp;#
x27;V')
	.describe('help', 'This help text').boolean('help').alias('help', 'h')
	.describe('verbose', 'print debug messages to the console').boolean('verbose').alias('verbose
', 'v')
	.describe('debug', 'run PhantomJS in debug mode').default('debug')
	.describe('modules', 'run selected modules only [moduleOne],[moduleTwo],...')
	.describe('include-dirs', 'load modules from specified directories [dirOne],[dirTwo],...')
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.usage" id="apidoc.element.phantomas.optimist_config_file.usage">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>usage
        <span class="apidocSignatureSpan">(msg, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">usage = function (msg, opts) {
    if (!opts &amp;&amp; typeof msg === 'object') {
        opts = msg;
        msg = null;
    }

    usage = msg;

    if (opts) self.options(opts);

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	ProgressBar = require('progress'),
	options = {},
	runs,
	url = '';

// parse options
program
	.<span class="apidocCodeKeywordSpan">usage</span>('PhantomJS-based web performance metrics collector\n\nphantomas &lt;url
&gt; [options]')
	// mandatory
	.header('General options')
	.describe('url', 'Set URL to work with').string('url')
	// version / help
	.describe('version', 'Show version number and quit').boolean('version').alias('version', &amp;#
x27;V')
	.describe('help', 'This help text').boolean('help').alias('help', 'h')
	.describe('verbose', 'print debug messages to the console').boolean('verbose').alias('verbose
', 'v')
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.wrap" id="apidoc.element.phantomas.optimist_config_file.wrap">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>wrap
        <span class="apidocSignatureSpan">(cols)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wrap = function (cols) {
    wrap = cols;
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}

			res.push('');
		});

		fold.pushEnd(res, 'offenders');

		return fold.<span class="apidocCodeKeywordSpan">wrap</span>(
			results.getUrl(),
			res.join('\n').trim()
		) + '\n';
	}

	function formatMultipleRunResults(results) {
		var AsciiTable = require('ascii-table'),
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.pads" id="apidoc.module.phantomas.pads">module phantomas.pads</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.pads.lpad" id="apidoc.element.phantomas.pads.lpad">
        function <span class="apidocSignatureSpan">phantomas.pads.</span>lpad
        <span class="apidocSignatureSpan">(str, len)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function lpad(str, len) {
	var fill;
	str = typeof str !== 'undefined' ? str : '-';

	fill = new Array(Math.max(1, len - str.toString().length + 1)).join(' ');
	return fill + str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.pads.rpad" id="apidoc.element.phantomas.pads.rpad">
        function <span class="apidocSignatureSpan">phantomas.pads.</span>rpad
        <span class="apidocSignatureSpan">(str, len)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rpad(str, len) {
	var fill;
	str = typeof str !== 'undefined' ? str : '-';

	fill = new Array(Math.max(1, len - str.toString().length + 1)).join(' ');
	return str + fill;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.pageSource" id="apidoc.module.phantomas.pageSource">module phantomas.pageSource</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.pageSource.module" id="apidoc.element.phantomas.pageSource.module">
        function <span class="apidocSignatureSpan">phantomas.pageSource.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	if (!phantomas.getParam('page-source')) {
		phantomas.log('To enable page-source of page being loaded run phantomas with --page-source option');
		return;
	}

	var util = phantomas.require('util'),
		fs = require('fs'),
		pageSourceOutputDir = 'html';

	// grab output dir from args
	if (phantomas.getParam('page-source-dir')) {
		pageSourceOutputDir = phantomas.getParam('page-source-dir').replace(/\/+$/, '');
	}

	// save source data
	phantomas.on('report', function() {
		var now = Date.now(),
			path = util.format(pageSourceOutputDir + '/%d.html', now);

		fs.write(path, phantomas.getSource(), 'w');

		// verify that the file was really written
		if (fs.isReadable(path)) {
			phantomas.log('Page source: saved to %s in %d ms', path, Date.now() - now);
		} else {
			phantomas.log('Page source: saved to %s failed!', path);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.path" id="apidoc.module.phantomas.path">module phantomas.path</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.path._makeLong" id="apidoc.element.phantomas.path._makeLong">
        function <span class="apidocSignatureSpan">phantomas.path.</span>_makeLong
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_makeLong = function (path) {
  return path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.basename" id="apidoc.element.phantomas.path.basename">
        function <span class="apidocSignatureSpan">phantomas.path.</span>basename
        <span class="apidocSignatureSpan">(path, ext)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">basename = function (path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext &amp;&amp; f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.dirname" id="apidoc.element.phantomas.path.dirname">
        function <span class="apidocSignatureSpan">phantomas.path.</span>dirname
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dirname = function (path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root &amp;&amp; !dir) {
    // No dirname whatsoever
    return '.';
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substring(0, dir.length - 1);
  }

  return root + dir;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.exists" id="apidoc.element.phantomas.path.exists">
        function <span class="apidocSignatureSpan">phantomas.path.</span>exists
        <span class="apidocSignatureSpan">(path, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exists = function (path, callback) {
  process.binding('fs').stat(path, function(err, stats) {
    if (callback) callback(err ? false : true);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.existsSync" id="apidoc.element.phantomas.path.existsSync">
        function <span class="apidocSignatureSpan">phantomas.path.</span>existsSync
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">existsSync = function (path) {
  try {
    process.binding('fs').stat(path);
    return true;
  } catch (e) {
    return false;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var raw,
		configMode,
		configParsed;

	debug('using "%s" config file', configFileName);

	// check the existance of the config file
	if (!fs.<span class="apidocCodeKeywordSpan">existsSync</span>(configFileName)) {
		throw 'Config file "' + configFileName + '" cannot be found!';
	}

	// JSON or YAML?
	configMode = /\.yaml$/.test(configFileName) ? 'YAML' : 'JSON';

	// parse it
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.extname" id="apidoc.element.phantomas.path.extname">
        function <span class="apidocSignatureSpan">phantomas.path.</span>extname
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extname = function (path) {
  return splitPath(path)[3];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.join" id="apidoc.element.phantomas.path.join">
        function <span class="apidocSignatureSpan">phantomas.path.</span>join
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function () {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(paths.filter(function(p, index) {
    return p &amp;&amp; typeof p === 'string';
  }).join('/'));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
'use strict';

function lpad(str, len) {
	var fill;
	str = typeof str !== 'undefined' ? str : '-';

	fill = new Array(Math.max(1, len - str.toString().length + 1)).<span class="apidocCodeKeywordSpan">join</span>(' ');
	return fill + str;
}

function rpad(str, len) {
	var fill;
	str = typeof str !== 'undefined' ? str : '-';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.normalize" id="apidoc.element.phantomas.path.normalize">
        function <span class="apidocSignatureSpan">phantomas.path.</span>normalize
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">normalize = function (path) {
  var isAbsolute = path.charAt(0) === '/',
      trailingSlash = path.slice(-1) === '/';

  // Normalize the path
  path = normalizeArray(path.split('/').filter(function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path &amp;&amp; !isAbsolute) {
    path = '.';
  }
  if (path &amp;&amp; trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Make sure that the joined path doesn't start with two slashes
  // - it will be mistaken for an unc path by normalize() -
  // unless the paths[0] also starts with two slashes
  if (/^[\\\/]{2}/.test(joined) &amp;&amp; !/^[\\\/]{2}/.test(paths[0])) {
    joined = joined.slice(1);
  }

  return exports.<span class="apidocCodeKeywordSpan">normalize</span>(joined);
};

// path.relative(from, to)
// it will solve the relative path from 'from' to 'to', for instance:
// from = 'C:\\orandea\\test\\aaa'
// to = 'C:\\orandea\\impl\\bbb'
// The output of the function should be: '..\\..\\impl\\bbb'
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.relative" id="apidoc.element.phantomas.path.relative">
        function <span class="apidocSignatureSpan">phantomas.path.</span>relative
        <span class="apidocSignatureSpan">(from, to)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">relative = function (from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start &lt; arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end &gt;= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start &gt; end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i &lt; length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i &lt; fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (/^[\\\/]{2}/.test(joined) &amp;&amp; !/^[\\\/]{2}/.test(paths[0])) {
    joined = joined.slice(1);
  }

  return exports.normalize(joined);
};

// path.<span class="apidocCodeKeywordSpan">relative</span>(from, to)
// it will solve the relative path from 'from' to 'to', for instance:
// from = 'C:\\orandea\\test\\aaa'
// to = 'C:\\orandea\\impl\\bbb'
// The output of the function should be: '..\\..\\impl\\bbb'
// windows version
exports.relative = function(from, to) {
  from = exports.resolve(from);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.resolve" id="apidoc.element.phantomas.path.resolve">
        function <span class="apidocSignatureSpan">phantomas.path.</span>resolve
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resolve = function () {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i &gt;= -1 &amp;&amp; !resolvedAbsolute; i--) {
    var path = (i &gt;= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string' || !path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(resolvedPath.split('/').filter(function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var result2 = splitTailRe.exec(tail),
    dir = result2[1] || '',
    basename = result2[2] || '',
    ext = result2[3] || '';
return [device, dir, basename, ext];
  };

  // path.<span class="apidocCodeKeywordSpan">resolve</span>([from ...], to)
  // windows version
  exports.resolve = function() {
var resolvedDevice = '',
    resolvedTail = '',
    resolvedAbsolute = false;

for (var i = arguments.length - 1; i &gt;= -1; i--) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.postLoadDelay" id="apidoc.module.phantomas.postLoadDelay">module phantomas.postLoadDelay</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.postLoadDelay.module" id="apidoc.element.phantomas.postLoadDelay.module">
        function <span class="apidocSignatureSpan">phantomas.postLoadDelay.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// e.g. --post-load-delay 5
	var delay = parseInt(phantomas.getParam('post-load-delay'), 10);

	if (!delay) {
		return;
	}

	phantomas.log('Post load delay: will wait %d second(s) after onload', delay);

	phantomas.reportQueuePush(function(done) {
		phantomas.on('loadFinished', function() {
			setInterval(done, delay * 1000);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.punycode" id="apidoc.module.phantomas.punycode">module phantomas.punycode</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.punycode.decode" id="apidoc.element.phantomas.punycode.decode">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>decode
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    length,
		<span class="apidocCodeCommentSpan">    /** Cached calculation results */
</span>		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic &lt; 0) {
			basic = 0;
		}

		for (j = 0; j &lt; basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) &gt;= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic &gt; 0 ? basic + 1 : 0; index &lt; inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index &gt;= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit &gt;= base || digit &gt; floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k &lt;= bias ? tMin : (k &gt;= bias + tMax ? tMax : k - bias);

				if (digit &lt; t) {
					break;
				}

				baseMinusT = base - t;
				if (w &gt; floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) &gt; maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.punycode.encode" id="apidoc.element.phantomas.punycode.encode">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>encode
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		<span class="apidocCodeCommentSpan">    /** `inputLength` will hold the number of code points in `input`. */
</span>		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j &lt; inputLength; ++j) {
			currentValue = input[j];
			if (currentValue &lt; 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount &lt; inputLength) {

			// All non-basic code points &lt; n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j &lt; inputLength; ++j) {
				currentValue = input[j];
				if (currentValue &gt;= n &amp;&amp; currentValue &lt; m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's &lt;n,i&gt; state to &lt;m,0&gt;,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n &gt; floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j &lt; inputLength; ++j) {
				currentValue = input[j];

				if (currentValue &lt; n &amp;&amp; ++delta &gt; maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k &lt;= bias ? tMin : (k &gt;= bias + tMax ? tMax : k - bias);
						if (q &lt; t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				if (noSkip &amp;&amp; entry.skip) {
					return;
				}

				res.push(entry);
			});

			return TapProducer.<span class="apidocCodeKeywordSpan">encode</span>(res, true /* emit yanlish data in TAP */ );
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.punycode.toASCII" id="apidoc.element.phantomas.punycode.toASCII">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>toASCII
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toASCII(domain) {
		return mapDomain(domain, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.punycode.toUnicode" id="apidoc.element.phantomas.punycode.toUnicode">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>toUnicode
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toUnicode(domain) {
		return mapDomain(domain, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.querystring" id="apidoc.module.phantomas.querystring">module phantomas.querystring</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.querystring.decode" id="apidoc.element.phantomas.querystring.decode">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>decode
        <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">decode = function (qs, sep, eq, options) {
  sep = sep || '&amp;';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options &amp;&amp; typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys &lt;= 0 means that we should not limit keys count
  if (maxKeys &gt; 0 &amp;&amp; len &gt; maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i &lt; len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx &gt;= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    try {
      k = decodeURIComponent(kstr);
      v = decodeURIComponent(vstr);
    } catch (e) {
      k = QueryString.unescape(kstr, true);
      v = QueryString.unescape(vstr, true);
    }

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (Array.isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.encode" id="apidoc.element.phantomas.querystring.encode">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>encode
        <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">encode = function (obj, sep, eq, name) {
  sep = sep || '&amp;';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return Object.keys(obj).map(function(k) {
      var ks = QueryString.escape(stringifyPrimitive(k)) + eq;
      if (Array.isArray(obj[k])) {
        return obj[k].map(function(v) {
          return ks + QueryString.escape(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + QueryString.escape(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return QueryString.escape(stringifyPrimitive(name)) + eq +
         QueryString.escape(stringifyPrimitive(obj));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				if (noSkip &amp;&amp; entry.skip) {
					return;
				}

				res.push(entry);
			});

			return TapProducer.<span class="apidocCodeKeywordSpan">encode</span>(res, true /* emit yanlish data in TAP */ );
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.escape" id="apidoc.element.phantomas.querystring.escape">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>escape
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (str) {
  return encodeURIComponent(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
eq = eq || '=';
if (obj === null) {
  obj = undefined;
}

if (typeof obj === 'object') {
  return Object.keys(obj).map(function(k) {
    var ks = QueryString.<span class="apidocCodeKeywordSpan">escape</span>(stringifyPrimitive(k)) + eq;
    if (Array.isArray(obj[k])) {
      return obj[k].map(function(v) {
        return ks + QueryString.escape(stringifyPrimitive(v));
      }).join(sep);
    } else {
      return ks + QueryString.escape(stringifyPrimitive(obj[k]));
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.parse" id="apidoc.element.phantomas.querystring.parse">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>parse
        <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (qs, sep, eq, options) {
  sep = sep || '&amp;';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options &amp;&amp; typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys &lt;= 0 means that we should not limit keys count
  if (maxKeys &gt; 0 &amp;&amp; len &gt; maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i &lt; len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx &gt;= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    try {
      k = decodeURIComponent(kstr);
      v = decodeURIComponent(vstr);
    } catch (e) {
      k = QueryString.unescape(kstr, true);
      v = QueryString.unescape(vstr, true);
    }

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (Array.isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe('screenshot', 'render fully loaded page to a given file')
	.describe('silent', 'don\'t write anything to the console').boolean('silent');

// handle --config (issue #209)
program.setConfigFile('config');

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log('phantomas v%s', phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.stringify" id="apidoc.element.phantomas.querystring.stringify">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>stringify
        <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stringify = function (obj, sep, eq, name) {
  sep = sep || '&amp;';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return Object.keys(obj).map(function(k) {
      var ks = QueryString.escape(stringifyPrimitive(k)) + eq;
      if (Array.isArray(obj[k])) {
        return obj[k].map(function(v) {
          return ks + QueryString.escape(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + QueryString.escape(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return QueryString.escape(stringifyPrimitive(name)) + eq +
         QueryString.escape(stringifyPrimitive(obj));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// add asserts
	var asserts = results.getAsserts();

	if (Object.keys(asserts).length &gt; 0) {
		res.asserts = asserts;
	}

	return JSON.<span class="apidocCodeKeywordSpan">stringify</span>(res);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.unescape" id="apidoc.element.phantomas.querystring.unescape">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescape
        <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unescape = function (s, decodeSpaces) {
  return QueryString.unescapeBuffer(s, decodeSpaces).toString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  vstr = '';
}

try {
  k = decodeURIComponent(kstr);
  v = decodeURIComponent(vstr);
} catch (e) {
  k = QueryString.<span class="apidocCodeKeywordSpan">unescape</span>(kstr, true);
  v = QueryString.unescape(vstr, true);
}

if (!hasOwnProperty(obj, k)) {
  obj[k] = v;
} else if (Array.isArray(obj[k])) {
  obj[k].push(v);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.unescapeBuffer" id="apidoc.element.phantomas.querystring.unescapeBuffer">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescapeBuffer
        <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unescapeBuffer = function (s, decodeSpaces) {
  var out = new Buffer(s.length);
  var state = 'CHAR'; // states: CHAR, HEX0, HEX1
  var n, m, hexchar;

  for (var inIndex = 0, outIndex = 0; inIndex &lt;= s.length; inIndex++) {
    var c = s.charCodeAt(inIndex);
    switch (state) {
      case 'CHAR':
        switch (c) {
          case charCode('%'):
            n = 0;
            m = 0;
            state = 'HEX0';
            break;
          case charCode('+'):
            if (decodeSpaces) c = charCode(' ');
            // pass thru
          default:
            out[outIndex++] = c;
            break;
        }
        break;

      case 'HEX0':
        state = 'HEX1';
        hexchar = c;
        if (charCode('0') &lt;= c &amp;&amp; c &lt;= charCode('9')) {
          n = c - charCode('0');
        } else if (charCode('a') &lt;= c &amp;&amp; c &lt;= charCode('f')) {
          n = c - charCode('a') + 10;
        } else if (charCode('A') &lt;= c &amp;&amp; c &lt;= charCode('F')) {
          n = c - charCode('A') + 10;
        } else {
          out[outIndex++] = charCode('%');
          out[outIndex++] = c;
          state = 'CHAR';
          break;
        }
        break;

      case 'HEX1':
        state = 'CHAR';
        if (charCode('0') &lt;= c &amp;&amp; c &lt;= charCode('9')) {
          m = c - charCode('0');
        } else if (charCode('a') &lt;= c &amp;&amp; c &lt;= charCode('f')) {
          m = c - charCode('a') + 10;
        } else if (charCode('A') &lt;= c &amp;&amp; c &lt;= charCode('F')) {
          m = c - charCode('A') + 10;
        } else {
          out[outIndex++] = charCode('%');
          out[outIndex++] = hexchar;
          out[outIndex++] = c;
          break;
        }
        out[outIndex++] = 16 * n + m;
        break;
    }
  }

  // TODO support returning arbitrary buffers.

  return out.slice(0, outIndex - 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // TODO support returning arbitrary buffers.

  return out.slice(0, outIndex - 1);
};


QueryString.unescape = function(s, decodeSpaces) {
  return QueryString.<span class="apidocCodeKeywordSpan">unescapeBuffer</span>(s, decodeSpaces).toString();
};


QueryString.escape = function(str) {
  return encodeURIComponent(str);
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.redirects" id="apidoc.module.phantomas.redirects">module phantomas.redirects</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.redirects.module" id="apidoc.element.phantomas.redirects.module">
        function <span class="apidocSignatureSpan">phantomas.redirects.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('redirects'); // @desc number of HTTP redirects (either 301, 302 or 303)
	phantomas.setMetric('redirectsTime'); // @desc time it took to send and receive redirects

	phantomas.on('recv', function(entry, res) {
		if (entry.isRedirect) {
			phantomas.incrMetric('redirects');
			phantomas.incrMetric('redirectsTime', entry.timeToLastByte);

			phantomas.addOffender('redirects', entry.url + ' is a redirect (HTTP ' + entry.status + ' ' + entry.statusText + ') ' +
				'to ' + (res.redirectURL || entry.headers.Location) + ' (took ' + entry.timeToLastByte + ' ms)');
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.repaints" id="apidoc.module.phantomas.repaints">module phantomas.repaints</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.repaints.module" id="apidoc.element.phantomas.repaints.module">
        function <span class="apidocSignatureSpan">phantomas.repaints.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('repaints'); // @desc number of repaints of the current document @gecko
	phantomas.setMetric('firstPaint'); // @desc time it took to perform the first paint @gecko @unreliable

	phantomas.on('init', function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				// feature detection
				if (typeof window.mozPaintCount === 'undefined') {
					phantomas.log('repaints: window.mozPaintCount not available!');
					return;
				}

				var lastPaintCountValue = 0,
					INTERVAL = 50;

				phantomas.log('repaints: the initial value is %j, polling every %d ms', window.mozPaintCount, INTERVAL);

				setInterval(function() {
					if (window.mozPaintCount &gt; lastPaintCountValue) {
						if (lastPaintCountValue === 0) {
							phantomas.emit('firstPaint'); // @desc fired on the first paint @desc
							phantomas.emit('milestone', 'firstPaint');
						}

						lastPaintCountValue = window.mozPaintCount;
						phantomas.emit('paint', lastPaintCountValue); // @desc fired each time the document is painted @gecko
					}
				}, INTERVAL);
			})(window.__phantomas);
		});
	});

	phantomas.on('firstPaint', function() {
		phantomas.setMarkerMetric('firstPaint');
	});

	phantomas.on('paint', function(count) {
		phantomas.log('repaints: %d so far', count);
		phantomas.setMetric('repaints', count);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.requestsMonitor" id="apidoc.module.phantomas.requestsMonitor">module phantomas.requestsMonitor</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.requestsMonitor.module" id="apidoc.element.phantomas.requestsMonitor.module">
        function <span class="apidocSignatureSpan">phantomas.requestsMonitor.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// imports
	var HTTP_STATUS_CODES = phantomas.require('http').STATUS_CODES,
		parseUrl = phantomas.require('url').parse;

	var requests = [];

	// register metric
	phantomas.setMetric('requests');              // @desc total number of HTTP requests made
	phantomas.setMetric('gzipRequests');          // @desc number of gzipped HTTP responses @unreliable
	phantomas.setMetric('postRequests');          // @desc number of POST requests
	phantomas.setMetric('httpsRequests');         // @desc number of HTTPS requests
	phantomas.setMetric('notFound');              // @desc number of HTTP 404 responses
	phantomas.setMetric('bodySize');              // @desc size of the uncompressed content of all responses @unreliable
	phantomas.setMetric('contentLength');         // @desc size of the content of all responses (based on Content-Length header) @unreliable
	phantomas.setMetric('httpTrafficCompleted');  // @desc time it took to receive the last byte of the last HTTP response

	// parse given URL to get protocol and domain
	function parseEntryUrl(entry) {
		var parsed;

		if (entry.url.indexOf('data:') !== 0) {
			// @see http://nodejs.org/api/url.html#url_url
			parsed = parseUrl(entry.url) || {};

			entry.protocol = parsed.protocol.replace(':', '');
			entry.domain = parsed.hostname;
			entry.query = parsed.query;

			if (entry.protocol === 'https') {
				entry.isSSL = true;
			}
		}
		else {
			// base64 encoded data
			entry.domain = false;
			entry.protocol = false;
			entry.isBase64 = true;
		}
	}

	phantomas.on('onResourceRequested', function(res, request) {
		// store current request data
		var entry = requests[res.id] = {
			id: res.id,
			url: res.url,
			method: res.method,
			requestHeaders: {},
			sendTime: res.time,
			bodySize: 0,
			isBlocked: false
		};

		// allow modules to block requests
		entry.block = function() {
			this.isBlocked = true;
		};

		res.headers.forEach(function(header) {
			entry.requestHeaders[header.name] = header.value;
		});

		parseEntryUrl(entry);

		if (entry.isBase64) {
			return;
		}

		// give modules a chance to block requests using entry.block()
		// @see https://github.com/ariya/phantomjs/issues/10230
		phantomas.emitInternal('beforeSend', entry, res); // @desc allows the request to be blocked

		if ( (entry.isBlocked === true) &amp;&amp; (typeof request !== 'undefined') ) {
			phantomas.log('Blocked request: &lt;' + entry.url + '&gt;');
			request.abort();
			return;
		}

		phantomas.log('req: &lt;%s&gt;', entry.url);

		phantomas.emit('send', entry, res); // @desc request has been sent
	});

	phantomas.on('onResourceReceived', function(res) {
		// current request data
		var entry = requests[res.id] || {};

		// fix for blocked requests still "emitting" onResourceReceived with "stage" = 'end' and empty "status" (issue #122)
		// or empty URL (broken in PhantomJS 2.0.1 (PR #573)
		if (res.status === null || res.url === '' ) {
			if (entry.isBlocked) {
				return;
			} else if (!entry.isBase64) {
				phantomas.log('Got a response with no status or URL set: &lt;%s&gt; (%j)', res.url, res);
				phantomas.emitInternal('abort', entry, res); // @desc request has been blocked
			}
		}

		switch(res.stage) {
			// the beginning of response
			case 'start':
				entry.recvStartTime = res.time;
				entry.timeToFirstByte = res.time - entry.sendTime;

				// FIXME: buggy
				// @see https://github.com/ariya/phantomjs/issues/10169
				entry.bodySize = res.bodySize || 0;
				break;

			// the end of response
			case 'end':
				// SlimerJS sets res.bodySize at stage = end
				entry.bodySize = entry.bodySize || res.bodySize;

				// timing
				entry.recvEndTime = res.time;
				entry.timeToLastByte = res.time - entry.sendTime;
				entry.receiveTime = entry.recvEndTime - entry.recvStartTime;

				// issue #295
				if (typeof entry.recvStartTime === 'undefined') {
					phantomas.log('recv: "start" stage not registered for &lt;%s&gt;!', res.url);
					entry.receiveTime = entry.recvEndTime - entry.sendTime;
				}

				// request method
				switch(entry.method) {
					case 'POST':
						phantomas.incrMetric('postRe ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.requestsStats" id="apidoc.module.phantomas.requestsStats">module phantomas.requestsStats</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.requestsStats.module" id="apidoc.element.phantomas.requestsStats.module">
        function <span class="apidocSignatureSpan">phantomas.requestsStats.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var stack = {};

	// adds given entry under the "type" if given check function returns true
	function pushToStack(type, entry, check) {
		// no entry of given type
		if (typeof stack[type] === 'undefined') {
			stack[type] = entry;
		}
		// apply check function
		else if (check(stack[type], entry) === true) {
			stack[type] = entry;
		}
	}

	function getFromStack(type) {
		return stack[type];
	}

	var responseTimes = new Stats(),
		latencyTimes = new Stats();

	phantomas.on('recv', function(entry, res) {
		// ignore anything different than HTTP 200
		if (entry.status !== 200) {
			return;
		}

		// size
		pushToStack('smallestResponse', entry, function(stack, entry) {
			return stack.contentLength &gt; entry.contentLength;
		});

		pushToStack('biggestResponse', entry, function(stack, entry) {
			return stack.contentLength &lt; entry.contentLength;
		});

		// time (from sent to last byte)
		pushToStack('fastestResponse', entry, function(stack, entry) {
			return stack.timeToLastByte &gt; entry.timeToLastByte;
		});

		pushToStack('slowestResponse', entry, function(stack, entry) {
			return stack.timeToLastByte &lt; entry.timeToLastByte;
		});

		// latency
		pushToStack('smallestLatency', entry, function(stack, entry) {
			return stack.timeToFirstByte &gt; entry.timeToFirstByte;
		});

		pushToStack('biggestLatency', entry, function(stack, entry) {
			return stack.timeToFirstByte &lt; entry.timeToFirstByte;
		});

		// stats
		responseTimes.push(entry.timeToLastByte);
		latencyTimes.push(entry.timeToFirstByte);
	});

	phantomas.on('report', function() {
		var entries = Object.keys(stack).length;

		if (entries === 0) {
			phantomas.log('requestsStats: no requests data gathered!');
			return;
		}

		// set metrics and provide offenders with URLs
		[
			'smallestResponse',
			'biggestResponse',
			'fastestResponse',
			'slowestResponse',
			'smallestLatency',
			'biggestLatency'
		].forEach(function(metric) {
			var entry = getFromStack(metric),
				details = '';

			switch (metric) {
				case 'smallestResponse':
				case 'biggestResponse':
					phantomas.setMetric(metric, entry.contentLength);
					details = (entry.contentLength / 1024).toFixed(2) + ' kB';
					break;

				case 'fastestResponse':
				case 'slowestResponse':
					phantomas.setMetric(metric, entry.timeToLastByte);
					details = entry.timeToLastByte + ' ms';
					break;

				case 'smallestLatency':
				case 'biggestLatency':
					phantomas.setMetric(metric, entry.timeToFirstByte);
					details = entry.timeToFirstByte + ' ms';
					break;
			}

			phantomas.addOffender(metric, entry.url + ' (' + details + ')');
		});

		phantomas.setMetric('medianResponse', responseTimes.median());
		phantomas.setMetric('medianLatency', latencyTimes.median());
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.requestsTo" id="apidoc.module.phantomas.requestsTo">module phantomas.requestsTo</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.requestsTo.module" id="apidoc.element.phantomas.requestsTo.module">
        function <span class="apidocSignatureSpan">phantomas.requestsTo.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric('requestsToFirstPaint'); // @desc number of HTTP requests it took to make the first paint @gecko
	phantomas.setMetric('domainsToFirstPaint'); // @desc number of domains used to make the first paint @offenders @gecko @offenders
	phantomas.setMetric('requestsToDomContentLoaded'); // @desc number of HTTP requests it took to make the page reach DomContentLoaded
 state
	phantomas.setMetric('domainsToDomContentLoaded'); // @desc number of domains used to make the page reach DomContentLoaded state
 @offenders
	phantomas.setMetric('requestsToDomComplete'); // @desc number of HTTP requests it took to make the page reach DomComplete state
	phantomas.setMetric('domainsToDomComplete'); // @desc number of domains used to make the page reach DomComplete state @offenders

	var Collection = require('../../lib/collection'),
		domains = new Collection(),
		requests = 0;

	function setDomainMetric(metricName) {
		phantomas.setMetric(metricName, domains.getLength());
		domains.sort().forEach(function(domain, cnt) {
			phantomas.addOffender(metricName, '%s (%d requests)', domain, cnt);
		});
	}

	phantomas.on('recv', function(entry, res) {
		//phantomas.log('requestsTo: #%d &lt;%s&gt; / %s', requests, entry.url, entry.domain);

		requests++;

		if (entry.domain) {
			domains.push(entry.domain);
		}
	});

	phantomas.on('milestone', function(name) {
		//phantomas.log('requestsTo: %s (after %d requests)', name, requests);

		switch (name) {
			case 'firstPaint':
				phantomas.setMetric('requestsToFirstPaint', requests);
				setDomainMetric('domainsToFirstPaint');
				break;

			case 'domInteractive':
				phantomas.setMetric('requestsToDomContentLoaded', requests);
				setDomainMetric('domainsToDomContentLoaded');
				break;

			case 'domComplete':
				phantomas.setMetric('requestsToDomComplete', requests);
				setDomainMetric('domainsToDomComplete');
				break;
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.screenshot" id="apidoc.module.phantomas.screenshot">module phantomas.screenshot</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.screenshot.module" id="apidoc.element.phantomas.screenshot.module">
        function <span class="apidocSignatureSpan">phantomas.screenshot.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var param = phantomas.getParam('screenshot'),
		path = '';

	if (typeof param === 'undefined') {
		phantomas.log('Screenshot: to enable screenshot of the fully loaded page run phantomas with --screenshot option');
		return;
	}

	// --screenshot
	if (param === true) {
		// defaults to "2013-12-07T20:15:01.521Z.png"
		path = (new Date()).toJSON().
		replace(/:/g, '-'); // be M$ Windows compatible (issue #454)

		path += '.png';
	}
	// --screenshot [file name]
	else {
		path = param;
	}

	phantomas.on('report', function() {
		var then = Date.now(),
			time;

		phantomas.render(path);

		time = Date.now() - then;

		phantomas.log('Screenshot: rendered to %s in %d ms', path, time);
		phantomas.emit('screenshot', path, time);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.scroll" id="apidoc.module.phantomas.scroll">module phantomas.scroll</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.scroll.module" id="apidoc.element.phantomas.scroll.module">
        function <span class="apidocSignatureSpan">phantomas.scroll.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var scroll = phantomas.getParam('scroll') === true;

	if (!scroll) {
		phantomas.log('Scroll: pass --scroll option to scroll down the page when it\'s loaded');
		return;
	}

	phantomas.log('Scroll: the page will be scrolled down when loaded');

	phantomas.reportQueuePush(function(done) {
		phantomas.on('loadFinished', function() {
			phantomas.evaluate(function() {
				(function(phantomas) {
					phantomas.log('Scroll: scrolling the page down...');
					document.body.scrollIntoView(false);

					var offset = document.body.scrollTop;
					phantomas.log('Scroll: scroll offset is %d px', offset);
				})(window.__phantomas);
			});

			// wait for lazy loading to do its job
			setTimeout(done, 250);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.staticAssets" id="apidoc.module.phantomas.staticAssets">module phantomas.staticAssets</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.staticAssets.module" id="apidoc.element.phantomas.staticAssets.module">
        function <span class="apidocSignatureSpan">phantomas.staticAssets.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var SIZE_THRESHOLD = 2 * 1024;

	// count requests for each asset
	var Collection = require('../../lib/collection'),
		assetsReqCounter = new Collection(),
		cookieDomains = new Collection(),
		// TODO: use 3pc database with tracking services
		trackingUrls = /google-analytics.com\/__utm.gif|pixel.quantserve.com\/pixel/;

	phantomas.setMetric('assetsNotGzipped'); // @desc number of static assets that were not gzipped @unreliable
	phantomas.setMetric('assetsWithQueryString'); // @desc number of static assets requested with query string (e.g. ?foo) in URL
	phantomas.setMetric('assetsWithCookies'); // @desc number of static assets requested from domains with cookie set
	phantomas.setMetric('smallImages'); // @desc number of images smaller than 2 KiB that can be base64 encoded @unreliable
	phantomas.setMetric('smallCssFiles'); // @desc number of CSS assets smaller than 2 KiB that can be inlined or merged @unreliable
	phantomas.setMetric('smallJsFiles'); // @desc number of JS assets smaller than 2 KiB that can be inlined or merged @unreliable
	phantomas.setMetric('multipleRequests'); // @desc number of static assets that are requested more than once

	phantomas.on('recv', function(entry, res) {
		var isContent = (entry.status === 200),
			sizeFormatted;

		// mark domains with cookie set
		if (entry.hasCookies) {
			cookieDomains.push(entry.domain);
		}

		// skip tracking requests
		if (trackingUrls.test(entry.url)) {
			return;
		}

		// check for query string -&gt; foo.css?123
		if (entry.isImage || entry.isJS || entry.isCSS) {
			if (entry.url.indexOf('?') &gt; -1) {
				phantomas.incrMetric('assetsWithQueryString');
				phantomas.addOffender('assetsWithQueryString', entry.url + ' (' + entry.type.toUpperCase() + ')');
			}
		}

		// check for not-gzipped assets (issue #515)
		if (entry.isJS || entry.isCSS || entry.isHTML || entry.isJSON || entry.isSVG || entry.isTTF || entry.isXML || entry.isFavicon) {
			if (!entry.gzip &amp;&amp; isContent) {
				phantomas.incrMetric('assetsNotGzipped');
				phantomas.addOffender('assetsNotGzipped', entry.url + ' (' + entry.type.toUpperCase() + ')');
			}
		}

		// small assets can be inlined
		if (entry.contentLength &lt; SIZE_THRESHOLD) {
			sizeFormatted = (entry.contentLength / 1024).toFixed(2);

			// check small images that can be base64 encoded
			if (entry.isImage) {
				phantomas.incrMetric('smallImages');
				phantomas.addOffender('smallImages', '%s (%s kB)', entry.url, sizeFormatted);
			}
			// CSS / JS that can be inlined
			else if (entry.isCSS) {
				phantomas.incrMetric('smallCssFiles');
				phantomas.addOffender('smallCssFiles', '%s (%s kB)', entry.url, sizeFormatted);
			} else if (entry.isJS) {
				phantomas.incrMetric('smallJsFiles');
				phantomas.addOffender('smallJsFiles', '%s (%s kB)', entry.url, sizeFormatted);
			}
		}

		if (entry.isImage || entry.isJS || entry.isCSS) {
			// count number of requests to each asset
			assetsReqCounter.push(entry.url);

			// count static assets requested from domains with cookie set
			if (cookieDomains.has(entry.domain)) {
				phantomas.incrMetric('assetsWithCookies');
				phantomas.addOffender('assetsWithCookies', '%s (%s)', entry.url, entry.type.toUpperCase());
			}
		}
	});

	phantomas.on('report', function() {
		assetsReqCounter.forEach(function(asset, cnt) {
			if (cnt &gt; 1) {
				phantomas.incrMetric('multipleRequests');
				phantomas.addOffender('multipleRequests', asset);
			}
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.stats" id="apidoc.module.phantomas.stats">module phantomas.stats</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.stats.stats" id="apidoc.element.phantomas.stats.stats">
        function <span class="apidocSignatureSpan">phantomas.</span>stats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stats() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	// use pushMetrics() to add results for each run
	this.metrics = [];
	this.runs = 0;

	// stats to be calculated
	// @see https://github.com/bluesmoon/node-faststats
	this.stats = {
		min: function(values) {
			return values.range()[0];
		},
		max: function(values) {
			return values.range()[1];
		},
		average: function(values) {
			return values.amean().toFixed(2);
		},
		median: function(values) {
			return values.median().toFixed(2);
		},
		stddev: function(values) {
			return values.stddev().toFixed(2);
		}
	};

	this.statsNames = Object.keys(this.stats);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.stats.prototype" id="apidoc.module.phantomas.stats.prototype">module phantomas.stats.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.getAvailableStats" id="apidoc.element.phantomas.stats.prototype.getAvailableStats">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getAvailableStats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAvailableStats = function () {
	return this.statsNames;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		if (typeof value === 'number') {
			values.push(this.metrics[i][metricName]);
		}
	}

	// apply stats functions
	this.<span class="apidocCodeKeywordSpan">getAvailableStats</span>().forEach(function(fnName) {
		stats[fnName] = parseFloat(this.stats[fnName](values));
	}, this);

	return stats;
};

stats.prototype.getAvailableStats = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.getMetricStats" id="apidoc.element.phantomas.stats.prototype.getMetricStats">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetricStats
        <span class="apidocSignatureSpan">(metricName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMetricStats = function (metricName) {
	var i,
		stats = {},
		value,
		values = new Stats();

	for (i = 0; i &lt; this.runs; i++) {
		value = this.metrics[i][metricName];

		if (typeof value === 'number') {
			values.push(this.metrics[i][metricName]);
		}
	}

	// apply stats functions
	this.getAvailableStats().forEach(function(fnName) {
		stats[fnName] = parseFloat(this.stats[fnName](values));
	}, this);

	return stats;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

				// generate metrics stats (issue #285)
				for (var i = 0, runs = results.length; i &lt; runs; i++) {
					stats.pushMetrics(results[i].getMetrics());
				}

				stats.getMetrics().forEach(function(metricName) {
					res.stats[metricName] = stats.<span class="apidocCodeKeywordSpan">getMetricStats</span>(metricName);
				});
			}

			// -R json:pretty
			if (reporterOptions.pretty === true) {
				return JSON.stringify(res, null, 2);
			} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.getMetrics" id="apidoc.element.phantomas.stats.prototype.getMetrics">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetrics
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMetrics = function () {
	if (this.runs &gt; 0) {
		return Object.keys(this.metrics[0]);
	} else {
		return [];
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
'use strict';

module.exports = function(results) {
	var res = {
		generator: results.getGenerator(),
		url: results.getUrl(),
		metrics: results.<span class="apidocCodeKeywordSpan">getMetrics</span>(),
		offenders: results.getAllOffenders(),
		asserts: false
	};

	// add asserts
	var asserts = results.getAsserts();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.pushMetrics" id="apidoc.element.phantomas.stats.prototype.pushMetrics">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>pushMetrics
        <span class="apidocSignatureSpan">(metrics)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pushMetrics = function (metrics) {
	this.metrics.push(metrics);
	this.runs++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						return formatSingleRunResults(run);
					}),
					stats: {}
				};

				// generate metrics stats (issue #285)
				for (var i = 0, runs = results.length; i &lt; runs; i++) {
					stats.<span class="apidocCodeKeywordSpan">pushMetrics</span>(results[i].getMetrics());
				}

				stats.getMetrics().forEach(function(metricName) {
					res.stats[metricName] = stats.getMetricStats(metricName);
				});
			}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.timeToFirst" id="apidoc.module.phantomas.timeToFirst">module phantomas.timeToFirst</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.timeToFirst.module" id="apidoc.element.phantomas.timeToFirst.module">
        function <span class="apidocSignatureSpan">phantomas.timeToFirst.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	function capitalize(txt) {
		return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
	}

	var types = ['css', 'js', 'image'],
		hasReceived = {},
		timestampStart;

	// init metrics
	types.forEach(function(key) {
		phantomas.setMetric('timeToFirst' + capitalize(key));
	});

	// register the timestamp when the request for the page was sent
	phantomas.on('pageOpen', function() {
		timestampStart = Date.now();
	});

	phantomas.on('recv', function(entry, res) {
		var type = entry.type,
			time = 0,
			metricName = '';

		// report only the first asset of supported type
		if ((types.indexOf(type) === -1) || (hasReceived[type] === true)) {
			return;
		}

		// calculate relative timestamp
		time = Date.now() - timestampStart;

		metricName = 'timeToFirst' + capitalize(type);

		phantomas.setMetric(metricName, time);
		phantomas.addOffender(metricName, entry.url + ' received in ' + time + ' ms');

		// set the flag
		hasReceived[type] = true;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.timeToFirstByte" id="apidoc.module.phantomas.timeToFirstByte">module phantomas.timeToFirstByte</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.timeToFirstByte.module" id="apidoc.element.phantomas.timeToFirstByte.module">
        function <span class="apidocSignatureSpan">phantomas.timeToFirstByte.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var measured = false,
		reqId = 1; // request ID to consider when calculating TTFB / TTLB

	phantomas.setMetric('timeToFirstByte'); // @desc time it took to receive the first byte of the first response (that was not a redirect
)
	phantomas.setMetric('timeToLastByte'); // @desc time it took to receive the last byte of the first response (that was not a redirect
)

	phantomas.on('recv', function(entry, res) {
		// metrics already calculated
		if (measured) {
			return;
		}

		if (entry.isRedirect) {
			// wait for the next request
			reqId = entry.id + 1;

			phantomas.log('Time to first byte: response #%d &lt;%s&gt; is a redirect (waiting for response #%d)', entry.id, entry.url, reqId);
			return;
		}

		// check the first response which is not a redirect (issue #74)
		if (entry.id === reqId) {
			phantomas.setMetric('timeToFirstByte', entry.timeToFirstByte, true);
			phantomas.setMetric('timeToLastByte', entry.timeToLastByte, true);

			measured = true;

			phantomas.log('Time to first byte: set to %d ms for #%d request to &lt;%s&gt; (HTTP %d)', entry.timeToFirstByte, entry.id, entry.url
, entry.status);
			phantomas.log('Time to last byte: set to %d ms', entry.timeToLastByte);

			phantomas.emitInternal('responseEnd', entry, res); // @desc the first response (that was not a redirect) fully received
			phantomas.emit('milestone', 'responseEnd');
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.tty" id="apidoc.module.phantomas.tty">module phantomas.tty</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.tty.getWindowSize" id="apidoc.element.phantomas.tty.getWindowSize">
        function <span class="apidocSignatureSpan">phantomas.tty.</span>getWindowSize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getWindowSize = function (){
  return [window.innerHeight, window.innerWidth];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.tty.isatty" id="apidoc.element.phantomas.tty.isatty">
        function <span class="apidocSignatureSpan">phantomas.tty.</span>isatty
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isatty = function (){
  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.url" id="apidoc.module.phantomas.url">module phantomas.url</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.url.format" id="apidoc.element.phantomas.url.format">
        function <span class="apidocSignatureSpan">phantomas.url.</span>format
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlFormat(obj) {
  // ensure it's an object, and not a string url.
  // If it's an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (typeof(obj) === 'string') obj = urlParse(obj);

  var auth = obj.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = obj.protocol || '',
      pathname = obj.pathname || '',
      hash = obj.hash || '',
      host = false,
      query = '';

  if (obj.host !== undefined) {
    host = auth + obj.host;
  } else if (obj.hostname !== undefined) {
    host = auth + (obj.hostname.indexOf(':') === -1 ?
        obj.hostname :
        '[' + obj.hostname + ']');
    if (obj.port) {
      host += ':' + obj.port;
    }
  }

  if (obj.query &amp;&amp; typeof obj.query === 'object' &amp;&amp;
      Object.keys(obj.query).length) {
    query = querystring.stringify(obj.query);
  }

  var search = obj.search || (query &amp;&amp; ('?' + query)) || '';

  if (protocol &amp;&amp; protocol.substr(-1) !== ':') protocol += ':';

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (obj.slashes ||
      (!protocol || slashedProtocol[protocol]) &amp;&amp; host !== false) {
    host = '//' + (host || '');
    if (pathname &amp;&amp; pathname.charAt(0) !== '/') pathname = '/' + pathname;
  } else if (!host) {
    host = '';
  }

  if (hash &amp;&amp; hash.charAt(0) !== '#') hash = '#' + hash;
  if (search &amp;&amp; search.charAt(0) !== '?') search = '?' + search;

  return protocol + host + pathname + search + hash;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (now - lastScreenshot &lt; SCREENSHOTS_MIN_INTERVAL) {
			//phantomas.log('Film strip: skipped');
			return;
		}

		// time offset excluding time it took to render screenshots
		ts = ts || (now - start - timeTotal);
		path = util.<span class="apidocCodeKeywordSpan">format</span>('%s/%s-%s-%d.png', filmStripOutputDir, filmStripPrefix
, startFormatted, ts);

		phantomas.render(path);
		lastScreenshot = Date.now();

		// verify that the screnshot was really taken
		if (fs.isReadable(path)) {
			phantomas.log('Film strip: rendered to %s in %d ms', path, Date.now() - now);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.url.parse" id="apidoc.element.phantomas.url.parse">
        function <span class="apidocSignatureSpan">phantomas.url.</span>parse
        <span class="apidocSignatureSpan">(url, parseQueryString, slashesDenoteHost)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url &amp;&amp; typeof(url) === 'object' &amp;&amp; url.href) return url;

  if (typeof url !== 'string') {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  var out = {},
      rest = url;

  // trim before proceeding.
  // This is to support parse stuff like "  http://foo.com  \n"
  rest = rest.trim();

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    out.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it's got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that's
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes &amp;&amp; !(proto &amp;&amp; hostlessProtocol[proto])) {
      rest = rest.substr(2);
      out.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &amp;&amp;
      (slashes || (proto &amp;&amp; !slashedProtocol[proto]))) {
    // there's a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    // don't enforce full RFC correctness, just be unstupid about it.

    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the first @ sign, unless some non-auth character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    var atSign = rest.indexOf('@');
    if (atSign !== -1) {
      var auth = rest.slice(0, atSign);

      // there *may be* an auth
      var hasAuth = true;
      for (var i = 0, l = nonAuthChars.length; i &lt; l; i++) {
        if (auth.indexOf(nonAuthChars[i]) !== -1) {
          // not a valid auth.  Something like http://foo.com/bar@baz/
          hasAuth = false;
          break;
        }
      }

      if (hasAuth) {
        // pluck off the auth portion.
        out.auth = decodeURIComponent(auth);
        rest = rest.substr(atSign + 1);
      }
    }

    var firstNonHost = -1;
    for (var i = 0, l = nonHostChars.length; i &lt; l; i++) {
      var index = rest.indexOf(nonHostChars[i]);
      if (index !== -1 &amp;&amp;
          (firstNonHost &lt; 0 || index &lt; firstNonHost)) firstNonHost = index;
    }

    if (firstNonHost !== -1) {
      out.host = rest.substr(0, firstNonHost);
      rest = rest.substr(firstNonHost);
    } else {
      out.host = rest;
      rest = '';
    }

    // pull out port.
    var p = parseHost(out.host);
    var keys = Object.keys(p);
    for (var i = 0, l = keys.length; i &lt; l; i++) {
      var key = keys[i];
      out[key] = p[key];
    }

    // we've indicated that there is a hostname,
    // so even if it's empty, it has to be present.
    out.hostname = out.hostname || '';

    // if hostname begins with [ and ends with ]
    // assume that it's an IPv6 address.
    var ipv6Hostname = out.hostname[0] === '[' &amp;&amp;
        out.hostname[out.hostname.length - 1] === ']';

    // validate a little.
    if (out.hostname.length &gt; hostnameMaxLen) {
      out.hostname = '';
    } else if (!ipv6Hostname) {
      var hostparts = out.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i &lt; l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j &lt; k; j++) {
            if (part.charCodeAt(j) &gt; 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe('screenshot', 'render fully loaded page to a given file')
	.describe('silent', 'don\'t write anything to the console').boolean('silent');

// handle --config (issue #209)
program.setConfigFile('config');

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log('phantomas v%s', phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.url.resolve" id="apidoc.element.phantomas.url.resolve">
        function <span class="apidocSignatureSpan">phantomas.url.</span>resolve
        <span class="apidocSignatureSpan">(source, relative)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlResolve(source, relative) {
  return urlFormat(urlResolveObject(source, relative));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var result2 = splitTailRe.exec(tail),
    dir = result2[1] || '',
    basename = result2[2] || '',
    ext = result2[3] || '';
return [device, dir, basename, ext];
  };

  // path.<span class="apidocCodeKeywordSpan">resolve</span>([from ...], to)
  // windows version
  exports.resolve = function() {
var resolvedDevice = '',
    resolvedTail = '',
    resolvedAbsolute = false;

for (var i = arguments.length - 1; i &gt;= -1; i--) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.url.resolveObject" id="apidoc.element.phantomas.url.resolveObject">
        function <span class="apidocSignatureSpan">phantomas.url.</span>resolveObject
        <span class="apidocSignatureSpan">(source, relative)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlResolveObject(source, relative) {
  if (!source) return relative;

  source = urlParse(urlFormat(source), false, true);
  relative = urlParse(urlFormat(relative), false, true);

  // hash is always overridden, no matter what.
  source.hash = relative.hash;

  if (relative.href === '') {
    source.href = urlFormat(source);
    return source;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes &amp;&amp; !relative.protocol) {
    relative.protocol = source.protocol;
    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[relative.protocol] &amp;&amp;
        relative.hostname &amp;&amp; !relative.pathname) {
      relative.path = relative.pathname = '/';
    }
    relative.href = urlFormat(relative);
    return relative;
  }

  if (relative.protocol &amp;&amp; relative.protocol !== source.protocol) {
    // if it's a known url protocol, then changing
    // the protocol does weird things
    // first, if it's not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that's known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      relative.href = urlFormat(relative);
      return relative;
    }
    source.protocol = relative.protocol;
    if (!relative.host &amp;&amp; !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length &amp;&amp; !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = '';
      if (!relative.hostname) relative.hostname = '';
      if (relPath[0] !== '') relPath.unshift('');
      if (relPath.length &lt; 2) relPath.unshift('');
      relative.pathname = relPath.join('/');
    }
    source.pathname = relative.pathname;
    source.search = relative.search;
    source.query = relative.query;
    source.host = relative.host || '';
    source.auth = relative.auth;
    source.hostname = relative.hostname || relative.host;
    source.port = relative.port;
    //to support http.request
    if (source.pathname !== undefined || source.search !== undefined) {
      source.path = (source.pathname ? source.pathname : '') +
                    (source.search ? source.search : '');
    }
    source.slashes = source.slashes || relative.slashes;
    source.href = urlFormat(source);
    return source;
  }

  var isSourceAbs = (source.pathname &amp;&amp; source.pathname.charAt(0) === '/'),
      isRelAbs = (
          relative.host !== undefined ||
          relative.pathname &amp;&amp; relative.pathname.charAt(0) === '/'
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (source.host &amp;&amp; relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = source.pathname &amp;&amp; source.pathname.split('/') || [],
      relPath = relative.pathname &amp;&amp; relative.pathname.split('/') || [],
      psychotic = source.protocol &amp;&amp;
          !slashedProtocol[source.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // source.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {

    delete source.hostname;
    delete source.port;
    if (source.host) {
      if (srcPath[0] === '') srcPath[0] = source.host;
      else srcPath.unshift(source.host);
    }
    delete source.host;
    if (relative.protocol) {
      delete relative.hostname;
      delete relative.port;
      if (relative.host) {
        if (relPath[0] === '') relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      delete relative.host;
    }
    mustEndAbs = mustEndAbs &amp;&amp; (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    source.host = (relative.host || relative.host === '') ?
                      relative.host : source.host;
    source.hostname = (relative.hostname || relative.hostname === '') ?
                      r ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// just pull out the search.
// like href='?foo'.
// Put this after the other two cases because it simplifies the booleans
if (psychotic) {
  source.hostname = source.host = srcPath.shift();
  //occationaly the auth can get stuck only in host
  //this especialy happens in cases like
  //url.<span class="apidocCodeKeywordSpan">resolveObject</span>('mailto:local1@domain1', 'local2@domain2')
  var authInHost = source.host &amp;&amp; source.host.indexOf('@') &gt; 0 ?
                   source.host.split('@') : false;
  if (authInHost) {
    source.auth = authInHost.shift();
    source.host = source.hostname = authInHost.shift();
  }
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.util" id="apidoc.module.phantomas.util">module phantomas.util</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.util.debug" id="apidoc.element.phantomas.util.debug">
        function <span class="apidocSignatureSpan">phantomas.util.</span>debug
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (x) {
  process.stderr.write('DEBUG: ' + x + '\n');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.error" id="apidoc.element.phantomas.util.error">
        function <span class="apidocSignatureSpan">phantomas.util.</span>error
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (x) {
  for (var i = 0, len = arguments.length; i &lt; len; ++i) {
    process.stderr.write(arguments[i] + '\n');
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      m = this._maxListeners;
    } else {
      m = defaultMaxListeners;
    }

    if (m &amp;&amp; m &gt; 0 &amp;&amp; this._events[type].length &gt; m) {
      this._events[type].warned = true;
      console.<span class="apidocCodeKeywordSpan">error</span>('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      console.trace();
    }
  }
} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.exec" id="apidoc.element.phantomas.util.exec">
        function <span class="apidocSignatureSpan">phantomas.util.</span>exec
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exec = function () {
  if (!execWarning) {
    execWarning = 'util.exec has moved to the "child_process" module.' +
                  ' Please update your source code.';
    error(execWarning);
  }
  return require('child_process').exec.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		matches,
		moduleName,
		re = /(setMetric|setMetricEvaluate|incrMetric)\(['"]([^'"]+)['"](\)|,)(.*@desc.*$)?/mg;

	moduleName = moduleFile.split('/').pop().replace(/\.js$/, '');

	// scan the source code
	while ((matches = re.<span class="apidocCodeKeywordSpan">exec</span>(content)) !== null) {
		var entry = {},
			metricName = matches[2],
			metricComment = matches[4],
			metricUnit = 'ms',
			hasDesc = (metricComment &amp;&amp; metricComment.indexOf('@desc') &gt; -1);

		if (typeof data.metrics[metricName] !== 'undefined') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.format" id="apidoc.element.phantomas.util.format">
        function <span class="apidocSignatureSpan">phantomas.util.</span>format
        <span class="apidocSignatureSpan">(f)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">format = function (f) {
  if (typeof f !== 'string') {
    var objects = [];
    for (var i = 0; i &lt; arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(' ');
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (i &gt;= len) return x;
    switch (x) {
      case '%s': return String(args[i++]);
      case '%d': return Number(args[i++]);
      case '%j': return JSON.stringify(args[i++]);
      case '%%': return '%';
      default:
        return x;
    }
  });
  for (var x = args[i]; i &lt; len; x = args[++i]) {
    if (x === null || typeof x !== 'object') {
      str += ' ' + x;
    } else {
      str += ' ' + inspect(x);
    }
  }
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (now - lastScreenshot &lt; SCREENSHOTS_MIN_INTERVAL) {
			//phantomas.log('Film strip: skipped');
			return;
		}

		// time offset excluding time it took to render screenshots
		ts = ts || (now - start - timeTotal);
		path = util.<span class="apidocCodeKeywordSpan">format</span>('%s/%s-%s-%d.png', filmStripOutputDir, filmStripPrefix
, startFormatted, ts);

		phantomas.render(path);
		lastScreenshot = Date.now();

		// verify that the screnshot was really taken
		if (fs.isReadable(path)) {
			phantomas.log('Film strip: rendered to %s in %d ms', path, Date.now() - now);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.inherits" id="apidoc.element.phantomas.util.inherits">
        function <span class="apidocSignatureSpan">phantomas.util.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {
  ctor.super_ = superCtor;
  ctor.prototype = Object.create(superCtor.prototype, {
    constructor: {
      value: ctor,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.operator = options.operator;
var stackStartFunction = options.stackStartFunction || fail;

if (Error.captureStackTrace) {
  Error.captureStackTrace(this, stackStartFunction);
}
};
util.<span class="apidocCodeKeywordSpan">inherits</span>(assert.AssertionError, Error);

function replacer(key, value) {
if (value === undefined) {
  return '' + value;
}
if (typeof value === 'number' &amp;&amp; (isNaN(value) || !isFinite(value))) {
  return value.toString();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.inspect" id="apidoc.element.phantomas.util.inspect">
        function <span class="apidocSignatureSpan">phantomas.util.</span>inspect
        <span class="apidocSignatureSpan">(obj, showHidden, depth, colors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function inspect(obj, showHidden, depth, colors) {
  var ctx = {
    showHidden: showHidden,
    seen: [],
    stylize: colors ? stylizeWithColor : stylizeNoColor
  };
  return formatValue(ctx, obj, (typeof depth === 'undefined' ? 2 : depth));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Provide a hook for user-specified inspect functions.
// Check that value is an object with an inspect function on it
if (value &amp;&amp; typeof value.inspect === 'function' &amp;&amp;
    // Filter out the util module, it's inspect function is special
    value !== exports &amp;&amp;
    // Also filter out any prototype objects using the circular check.
    !(value.constructor &amp;&amp; value.constructor.prototype === value)) {
  return value.<span class="apidocCodeKeywordSpan">inspect</span>(recurseTimes);
}

// Primitive types cannot have properties
var primitive = formatPrimitive(ctx, value);
if (primitive) {
  return primitive;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isArray" id="apidoc.element.phantomas.util.isArray">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isArray
        <span class="apidocSignatureSpan">(ar)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isArray(ar) {
  return Array.isArray(ar) ||
         (typeof ar === 'object' &amp;&amp; objectToString(ar) === '[object Array]');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (!parseInt(option)) {
			reporterOptions[option] = true;
		}
	});

	debug('Setting up %s reporter (options: %j)...', reporterName, reporterOptions);

	if (Array.<span class="apidocCodeKeywordSpan">isArray</span>(results)) {
		debug('Multiple runs mode');
		inMultipleMode = true;
	}

	try {
		reporter = new(_requireReporter(reporterName))(results, reporterOptions, options);
	} catch (ex) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isDate" id="apidoc.element.phantomas.util.isDate">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isDate
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isDate(d) {
  return typeof d === 'object' &amp;&amp; objectToString(d) === '[object Date]';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isError" id="apidoc.element.phantomas.util.isError">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isError
        <span class="apidocSignatureSpan">(e)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isError(e) {
  return typeof e === 'object' &amp;&amp; objectToString(e) === '[object Error]';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isRegExp" id="apidoc.element.phantomas.util.isRegExp">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isRegExp
        <span class="apidocSignatureSpan">(re)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isRegExp(re) {
  return typeof re === 'object' &amp;&amp; objectToString(re) === '[object RegExp]';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.log" id="apidoc.element.phantomas.util.log">
        function <span class="apidocSignatureSpan">phantomas.util.</span>log
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (msg) {
  exports.puts(timestamp() + ' - ' + msg.toString());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
program.setConfigFile('config');

// parse it
options = program.parse(process.argv);

// show version number
if (options.version === true) {
	console.<span class="apidocCodeKeywordSpan">log</span>('phantomas v%s', phantomas.version);
	process.exit(0);
}

// show help
if (options.help === true) {
	program.showHelp();
	process.exit(0);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.p" id="apidoc.element.phantomas.util.p">
        function <span class="apidocSignatureSpan">phantomas.util.</span>p
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">p = function () {
  if (!pWarning) {
    pWarning = 'util.p will be removed in future versions of Node. ' +
               'Use util.puts(util.inspect()) instead.\n';
    exports.error(pWarning);
  }
  for (var i = 0, len = arguments.length; i &lt; len; ++i) {
    error(exports.inspect(arguments[i]));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.print" id="apidoc.element.phantomas.util.print">
        function <span class="apidocSignatureSpan">phantomas.util.</span>print
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">print = function () {
  for (var i = 0, len = arguments.length; i &lt; len; ++i) {
    process.stdout.write(String(arguments[i]));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.pump" id="apidoc.element.phantomas.util.pump">
        function <span class="apidocSignatureSpan">phantomas.util.</span>pump
        <span class="apidocSignatureSpan">(readStream, writeStream, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pump = function (readStream, writeStream, callback) {
  var callbackCalled = false;

  function call(a, b, c) {
    if (callback &amp;&amp; !callbackCalled) {
      callback(a, b, c);
      callbackCalled = true;
    }
  }

  readStream.addListener('data', function(chunk) {
    if (writeStream.write(chunk) === false) readStream.pause();
  });

  writeStream.addListener('drain', function() {
    readStream.resume();
  });

  readStream.addListener('end', function() {
    writeStream.end();
  });

  readStream.addListener('close', function() {
    call();
  });

  readStream.addListener('error', function(err) {
    writeStream.end();
    call(err);
  });

  writeStream.addListener('error', function(err) {
    readStream.destroy();
    call(err);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.puts" id="apidoc.element.phantomas.util.puts">
        function <span class="apidocSignatureSpan">phantomas.util.</span>puts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">puts = function () {
  for (var i = 0, len = arguments.length; i &lt; len; ++i) {
    process.stdout.write(arguments[i] + '\n');
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


var pWarning;

exports.p = function() {
  if (!pWarning) {
    pWarning = 'util.p will be removed in future versions of Node. ' +
               'Use util.<span class="apidocCodeKeywordSpan">puts</span>(util.inspect()) instead.\n';
    exports.error(pWarning);
  }
  for (var i = 0, len = arguments.length; i &lt; len; ++i) {
    error(exports.inspect(arguments[i]));
  }
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.waitForEvent" id="apidoc.module.phantomas.waitForEvent">module phantomas.waitForEvent</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.waitForEvent.module" id="apidoc.element.phantomas.waitForEvent.module">
        function <span class="apidocSignatureSpan">phantomas.waitForEvent.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// e.g. --wait-for-event "done"
	var eventName = phantomas.getParam('wait-for-event');

	if (typeof eventName !== 'string') {
		return;
	}

	phantomas.log('Waiting for event: will wait for "%s" event', eventName);

	phantomas.reportQueuePush(function(done) {
		phantomas.on(eventName, done);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.waitForSelector" id="apidoc.module.phantomas.waitForSelector">module phantomas.waitForSelector</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.waitForSelector.module" id="apidoc.element.phantomas.waitForSelector.module">
        function <span class="apidocSignatureSpan">phantomas.waitForSelector.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// e.g. --wait-for-selector "body.loaded"
	var selector = phantomas.getParam('wait-for-selector');

	if (typeof selector !== 'string') {
		return;
	}

	phantomas.log('Selector: will wait for "%s" selector', selector);

	phantomas.reportQueuePush(function(done) {
		phantomas.on('loadFinished', function() {
			var intervalId,
				pollFn;

			phantomas.log('Selector: starting polling of "%s" selector', selector);

			pollFn = function() {
				var res = checkSelector(phantomas, selector);

				// complete when selector is found or DOM exception is thrown
				if (res === true || typeof res === 'string') {
					clearInterval(intervalId);
					done();
				}
			};

			intervalId = setInterval(pollFn, 200);
			pollFn();
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.webkit" id="apidoc.module.phantomas.webkit">module phantomas.webkit</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.webkit.getUserAgent" id="apidoc.element.phantomas.webkit.getUserAgent">
        function <span class="apidocSignatureSpan">phantomas.webkit.</span>getUserAgent
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserAgent = function () {
		return 'PhantomJS/' + pkg.version
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				engine = this.getEngine(key);
			}
		}, this);
	}

	// customize user agent
	if (typeof this.options['user-agent'] === 'undefined') {
		this.options['user-agent'] = "phantomas/" + VERSION + " (" + engine.<span class="apidocCodeKeywordSpan
">getUserAgent</span>() + "; " + process.platform + " " + process.arch + ")";
	}

	// build engine specific command-line arguments
	var engineArgs = [];

	Object.keys(this.options).forEach(function(key) {
		var val = this.options[key],
...</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.windowPerformance" id="apidoc.module.phantomas.windowPerformance">module phantomas.windowPerformance</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.windowPerformance.module" id="apidoc.element.phantomas.windowPerformance.module">
        function <span class="apidocSignatureSpan">phantomas.windowPerformance.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// times below are calculated relative to performance.timing.responseEnd (#117)
	phantomas.setMetric('domInteractive'); // @desc time it took to parse the HTML and construct the DOM
	phantomas.setMetric('domContentLoaded'); // @desc time it took to construct both DOM and CSSOM, no stylesheets that are blocking
 JavaScript execution (i.e. onDOMReady)
	phantomas.setMetric('domContentLoadedEnd'); // @desc time it took to finish handling of onDOMReady event @unreliable
	phantomas.setMetric('domComplete'); // @desc time it took to load all page resources, the loading spinner has stopped spinning

	// backend vs frontend time
	phantomas.setMetric('timeBackend'); // @desc time to the first byte compared to the total loading time [%]
	phantomas.setMetric('timeFrontend'); // @desc time to window.load compared to the total loading time [%]

	// measure dom... metrics from the moment HTML response was fully received
	var responseEndTime = Date.now();

	phantomas.on('responseEnd', function() {
		responseEndTime = Date.now();
		phantomas.log('Performance timing: responseEnd = %d', responseEndTime);
	});

	phantomas.once('init', function() {
		phantomas.evaluate(function(responseEndTime) {
			(function(phantomas) {
				phantomas.spyEnabled(false, 'installing window.performance metrics');

				// extend window.performance
				// "init" event is sometimes fired twice, pass a value set by "responseEnd" event handler (fixes #192)
				if (typeof window.performance === 'undefined') {
					window.performance = {
						timing: {
							responseEnd: responseEndTime
						}
					};

					phantomas.log('Performance timing: emulating window.performance');
				} else {
					phantomas.log('Performance timing: using native window.performance');
				}

				// onDOMReady
				document.addEventListener("DOMContentLoaded", function() {
					var time = Date.now() - responseEndTime;

					phantomas.setMetric('domContentLoaded', time, true);
					phantomas.log('Performance timing: document reached "DOMContentLoaded" state after %d ms', time);

					setTimeout(function() {
						// use NavigationTiming if possible
						var time = window.performance.timing.domContentLoadedEventEnd ?
							(window.performance.timing.domContentLoadedEventEnd - window.performance.timing.responseEnd) :
							(Date.now() - responseEndTime);

						phantomas.setMetric('domContentLoadedEnd', time, true);
						phantomas.log('Performance timing: document reached "DOMContentLoadedEnd" state after %d ms', time);
					}, 0);
				});

				// emulate Navigation Timing
				document.addEventListener('readystatechange', function() {
					var readyState = document.readyState,
						responseEndTime = window.performance.timing.responseEnd,
						time = Date.now() - responseEndTime,
						metricName;

					// @see http://www.w3.org/TR/html5/dom.html#documentreadystate
					switch (readyState) {
						// the browser has finished parsing all of the HTML and DOM construction is complete
						case 'interactive':
							metricName = 'domInteractive';
							break;

							// the processing is complete and all of the resources on the page have finished downloading
						case 'complete':
							metricName = 'domComplete';
							phantomas.log('Performance timing: %j', window.performance.timing);
							break;

						default:
							phantomas.log('Performance timing: unhandled "%s" state!', readyState);
							return;
					}

					phantomas.setMetric(metricName, time, true);

					phantomas.log('Performance timing: document reached "%s" state after %d ms', readyState, time);
				});

				phantomas.spyEnabled(true);
			})(window.__phantomas);
		}, responseEndTime);
	});

	<span class="apidocCodeCommentSpan">/**
	 * Emit metrics with backend vs frontend time
	 *
	 * Performance Golden Rule:
	 * "80-90% of the end-user response time is spent on the frontend. Start there."
	 *
	 * @see http://www.stevesouders.com/blog/2012/02/10/the-performance-golden-rule/
	 */
</span>	phantomas.on('report', function() {
		//  The backend time is the time it takes the server to get the first byte back to the client.
		//  The frontend ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>