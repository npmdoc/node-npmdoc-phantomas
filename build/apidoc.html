<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/macbre/phantomas#readme"

    >phantomas (v1.18.0)</a>
</h1>
<h4>PhantomJS-based web performance metrics collector</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas">module phantomas</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.phantomas">
            function <span class="apidocSignatureSpan"></span>phantomas
            <span class="apidocSignatureSpan">(url, opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert">
            function <span class="apidocSignatureSpan">phantomas.</span>assert
            <span class="apidocSignatureSpan">(value, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection">
            function <span class="apidocSignatureSpan">phantomas.</span>collection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines">
            function <span class="apidocSignatureSpan">phantomas.</span>engines
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc">
            function <span class="apidocSignatureSpan">phantomas.</span>ipc
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats">
            function <span class="apidocSignatureSpan">phantomas.</span>stats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>ajaxRequests</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>alerts</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>analyzeCss</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>ansicolors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>assetsTypes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>blockDomains</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>cacheHits</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>caching</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>collection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>console</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>cookies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>devices</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>documentHeight</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domComplexity</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domHiddenContent</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domMutations</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domQueries</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>domains</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>engines.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>fast_stats</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>filmStrip</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>gecko</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>globalVariables</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>har</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>headers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>httpAuth</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>ipc.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>jQuery</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>javaScriptBottlenecks</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>jserrors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>keepAlive</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>lazyLoadableImages</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>localStorage</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>mainRequest</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>metadata</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>navigationTiming</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>optimist_config_file</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>pads</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>pageSource</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>postLoadDelay</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>punycode</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>querystring</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>redirects</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>repaints</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>requestsMonitor</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>requestsStats</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>requestsTo</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>screenshot</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>scroll</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>staticAssets</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>stats.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>timeToFirst</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>timeToFirstByte</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>tty</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>url</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>waitForEvent</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>waitForSelector</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>webkit</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.</span>windowPerformance</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.</span>path</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ajaxRequests">module phantomas.ajaxRequests</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ajaxRequests.module">
            function <span class="apidocSignatureSpan">phantomas.ajaxRequests.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.ajaxRequests.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.alerts">module phantomas.alerts</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.alerts.module">
            function <span class="apidocSignatureSpan">phantomas.alerts.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.alerts.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.analyzeCss">module phantomas.analyzeCss</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.analyzeCss.module">
            function <span class="apidocSignatureSpan">phantomas.analyzeCss.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.analyzeCss.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ansicolors">module phantomas.ansicolors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBlack">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlack
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBlue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightBlack">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlack
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightBlue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightCyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightCyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightGreen">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightGreen
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightMagenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightMagenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightRed">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightRed
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightWhite">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightWhite
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgBrightYellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightYellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgCyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgCyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgGreen">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgGreen
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgMagenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgMagenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgRed">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgRed
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgWhite">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgWhite
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.bgYellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgYellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.black">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>black
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.blue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>blue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightBlack">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlack
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightBlue">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlue
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightCyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightCyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightGreen">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightGreen
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightMagenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightMagenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightRed">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightRed
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightWhite">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightWhite
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.brightYellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightYellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.cyan">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>cyan
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.disable">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>disable
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.green">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>green
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.magenta">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>magenta
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.red">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>red
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.white">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>white
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ansicolors.yellow">
            function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>yellow
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.ansicolors.</span>close</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.ansicolors.</span>open</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.assert">module phantomas.assert</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.assert">
            function <span class="apidocSignatureSpan">phantomas.</span>assert
            <span class="apidocSignatureSpan">(value, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.AssertionError">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>AssertionError
            <span class="apidocSignatureSpan">{{signature}}</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.deepEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>deepEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.doesNotThrow">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>doesNotThrow
            <span class="apidocSignatureSpan">(block, error, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.equal">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>equal
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.fail">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>fail
            <span class="apidocSignatureSpan">(actual, expected, message, operator, stackStartFunction)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.ifError">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>ifError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.notDeepEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>notDeepEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.notEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>notEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.notStrictEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>notStrictEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.ok">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>ok
            <span class="apidocSignatureSpan">(value, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.strictEqual">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>strictEqual
            <span class="apidocSignatureSpan">(actual, expected, message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assert.throws">
            function <span class="apidocSignatureSpan">phantomas.assert.</span>throws
            <span class="apidocSignatureSpan">(block, error, message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.assetsTypes">module phantomas.assetsTypes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.assetsTypes.module">
            function <span class="apidocSignatureSpan">phantomas.assetsTypes.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.assetsTypes.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.blockDomains">module phantomas.blockDomains</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.blockDomains.module">
            function <span class="apidocSignatureSpan">phantomas.blockDomains.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.blockDomains.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.cacheHits">module phantomas.cacheHits</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.cacheHits.module">
            function <span class="apidocSignatureSpan">phantomas.cacheHits.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.cacheHits.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.caching">module phantomas.caching</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.caching.module">
            function <span class="apidocSignatureSpan">phantomas.caching.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.caching.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.collection">module phantomas.collection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.collection">
            function <span class="apidocSignatureSpan">phantomas.</span>collection
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.collection.prototype">module phantomas.collection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.forEach">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>forEach
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.getLength">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>getLength
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.has">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>has
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.push">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>push
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.collection.prototype.sort">
            function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>sort
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.console">module phantomas.console</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.console.module">
            function <span class="apidocSignatureSpan">phantomas.console.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.console.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.cookies">module phantomas.cookies</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.cookies.module">
            function <span class="apidocSignatureSpan">phantomas.cookies.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.cookies.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.devices">module phantomas.devices</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.devices.module">
            function <span class="apidocSignatureSpan">phantomas.devices.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.devices.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.documentHeight">module phantomas.documentHeight</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.documentHeight.module">
            function <span class="apidocSignatureSpan">phantomas.documentHeight.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.documentHeight.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domComplexity">module phantomas.domComplexity</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domComplexity.module">
            function <span class="apidocSignatureSpan">phantomas.domComplexity.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domComplexity.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domHiddenContent">module phantomas.domHiddenContent</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domHiddenContent.module">
            function <span class="apidocSignatureSpan">phantomas.domHiddenContent.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domHiddenContent.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domMutations">module phantomas.domMutations</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domMutations.module">
            function <span class="apidocSignatureSpan">phantomas.domMutations.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domMutations.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domQueries">module phantomas.domQueries</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domQueries.module">
            function <span class="apidocSignatureSpan">phantomas.domQueries.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domQueries.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.domains">module phantomas.domains</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.domains.module">
            function <span class="apidocSignatureSpan">phantomas.domains.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.domains.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.engines">module phantomas.engines</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.engines">
            function <span class="apidocSignatureSpan">phantomas.</span>engines
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.engines.prototype">module phantomas.engines.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.getEngine">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngine
            <span class="apidocSignatureSpan">(engine)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.getEngines">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngines
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.registerEngine">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>registerEngine
            <span class="apidocSignatureSpan">(engineName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.engines.prototype.run">
            function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>run
            <span class="apidocSignatureSpan">(scriptFile)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.events">module phantomas.events</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.events.EventEmitter">
            function <span class="apidocSignatureSpan">phantomas.events.</span>EventEmitter
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.fast_stats">module phantomas.fast_stats</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.fast_stats.Stats">
            function <span class="apidocSignatureSpan">phantomas.fast_stats.</span>Stats
            <span class="apidocSignatureSpan">(c)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.filmStrip">module phantomas.filmStrip</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.filmStrip.module">
            function <span class="apidocSignatureSpan">phantomas.filmStrip.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.filmStrip.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.gecko">module phantomas.gecko</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.gecko.getUserAgent">
            function <span class="apidocSignatureSpan">phantomas.gecko.</span>getUserAgent
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.gecko.spawn">
            function <span class="apidocSignatureSpan">phantomas.gecko.</span>spawn
            <span class="apidocSignatureSpan">(path, engineArgs)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.gecko.</span>engine</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.gecko.</span>name</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.gecko.</span>path</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.globalVariables">module phantomas.globalVariables</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.globalVariables.module">
            function <span class="apidocSignatureSpan">phantomas.globalVariables.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.globalVariables.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.har">module phantomas.har</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.har.module">
            function <span class="apidocSignatureSpan">phantomas.har.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.har.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.headers">module phantomas.headers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.headers.module">
            function <span class="apidocSignatureSpan">phantomas.headers.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.headers.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.httpAuth">module phantomas.httpAuth</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.httpAuth.module">
            function <span class="apidocSignatureSpan">phantomas.httpAuth.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.httpAuth.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ipc">module phantomas.ipc</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.ipc">
            function <span class="apidocSignatureSpan">phantomas.</span>ipc
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.ipc.prototype">module phantomas.ipc.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.init">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>init
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.on">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>on
            <span class="apidocSignatureSpan">(event, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.parse">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>parse
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.ipc.prototype.setEventEmitter">
            function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>setEventEmitter
            <span class="apidocSignatureSpan">(emitter)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.jQuery">module phantomas.jQuery</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.jQuery.module">
            function <span class="apidocSignatureSpan">phantomas.jQuery.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.jQuery.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.javaScriptBottlenecks">module phantomas.javaScriptBottlenecks</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.javaScriptBottlenecks.module">
            function <span class="apidocSignatureSpan">phantomas.javaScriptBottlenecks.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.javaScriptBottlenecks.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.jserrors">module phantomas.jserrors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.jserrors.module">
            function <span class="apidocSignatureSpan">phantomas.jserrors.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.jserrors.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.keepAlive">module phantomas.keepAlive</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.keepAlive.module">
            function <span class="apidocSignatureSpan">phantomas.keepAlive.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.keepAlive.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.lazyLoadableImages">module phantomas.lazyLoadableImages</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.lazyLoadableImages.module">
            function <span class="apidocSignatureSpan">phantomas.lazyLoadableImages.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.lazyLoadableImages.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.localStorage">module phantomas.localStorage</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.localStorage.module">
            function <span class="apidocSignatureSpan">phantomas.localStorage.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.localStorage.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.mainRequest">module phantomas.mainRequest</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.mainRequest.module">
            function <span class="apidocSignatureSpan">phantomas.mainRequest.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.mainRequest.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.navigationTiming">module phantomas.navigationTiming</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.navigationTiming.module">
            function <span class="apidocSignatureSpan">phantomas.navigationTiming.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.navigationTiming.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.optimist_config_file">module phantomas.optimist_config_file</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.alias">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>alias
            <span class="apidocSignatureSpan">(x, y)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.boolean">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>boolean
            <span class="apidocSignatureSpan">(bools)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.check">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>check
            <span class="apidocSignatureSpan">(f)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.default">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>default
            <span class="apidocSignatureSpan">(key, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.demand">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>demand
            <span class="apidocSignatureSpan">(keys)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.describe">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>describe
            <span class="apidocSignatureSpan">(opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.header">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>header
            <span class="apidocSignatureSpan">(s)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.help">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>help
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.option">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>option
            <span class="apidocSignatureSpan">(key, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.options">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>options
            <span class="apidocSignatureSpan">(key, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.parse">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>parse
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.setConfigFile">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>setConfigFile
            <span class="apidocSignatureSpan">(configFileParam)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.showHelp">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>showHelp
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.string">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>string
            <span class="apidocSignatureSpan">(strings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.usage">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>usage
            <span class="apidocSignatureSpan">(msg, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.optimist_config_file.wrap">
            function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>wrap
            <span class="apidocSignatureSpan">(cols)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>argv</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>configFileParam</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.pads">module phantomas.pads</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.pads.lpad">
            function <span class="apidocSignatureSpan">phantomas.pads.</span>lpad
            <span class="apidocSignatureSpan">(str, len)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.pads.rpad">
            function <span class="apidocSignatureSpan">phantomas.pads.</span>rpad
            <span class="apidocSignatureSpan">(str, len)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.pageSource">module phantomas.pageSource</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.pageSource.module">
            function <span class="apidocSignatureSpan">phantomas.pageSource.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.pageSource.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.path">module phantomas.path</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path._makeLong">
            function <span class="apidocSignatureSpan">phantomas.path.</span>_makeLong
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.basename">
            function <span class="apidocSignatureSpan">phantomas.path.</span>basename
            <span class="apidocSignatureSpan">(path, ext)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.dirname">
            function <span class="apidocSignatureSpan">phantomas.path.</span>dirname
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.exists">
            function <span class="apidocSignatureSpan">phantomas.path.</span>exists
            <span class="apidocSignatureSpan">(path, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.existsSync">
            function <span class="apidocSignatureSpan">phantomas.path.</span>existsSync
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.extname">
            function <span class="apidocSignatureSpan">phantomas.path.</span>extname
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.join">
            function <span class="apidocSignatureSpan">phantomas.path.</span>join
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.normalize">
            function <span class="apidocSignatureSpan">phantomas.path.</span>normalize
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.relative">
            function <span class="apidocSignatureSpan">phantomas.path.</span>relative
            <span class="apidocSignatureSpan">(from, to)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.path.resolve">
            function <span class="apidocSignatureSpan">phantomas.path.</span>resolve
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.postLoadDelay">module phantomas.postLoadDelay</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.postLoadDelay.module">
            function <span class="apidocSignatureSpan">phantomas.postLoadDelay.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.postLoadDelay.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.punycode">module phantomas.punycode</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.decode">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>decode
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.encode">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>encode
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.toASCII">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>toASCII
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.punycode.toUnicode">
            function <span class="apidocSignatureSpan">phantomas.punycode.</span>toUnicode
            <span class="apidocSignatureSpan">(domain)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">phantomas.punycode.</span>ucs2</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.punycode.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.querystring">module phantomas.querystring</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.decode">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>decode
            <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.encode">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>encode
            <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.escape">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>escape
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.parse">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>parse
            <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.stringify">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>stringify
            <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.unescape">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescape
            <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.querystring.unescapeBuffer">
            function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescapeBuffer
            <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.redirects">module phantomas.redirects</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.redirects.module">
            function <span class="apidocSignatureSpan">phantomas.redirects.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.redirects.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.repaints">module phantomas.repaints</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.repaints.module">
            function <span class="apidocSignatureSpan">phantomas.repaints.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.repaints.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.requestsMonitor">module phantomas.requestsMonitor</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.requestsMonitor.module">
            function <span class="apidocSignatureSpan">phantomas.requestsMonitor.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.requestsMonitor.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.requestsStats">module phantomas.requestsStats</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.requestsStats.module">
            function <span class="apidocSignatureSpan">phantomas.requestsStats.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.requestsStats.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.requestsTo">module phantomas.requestsTo</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.requestsTo.module">
            function <span class="apidocSignatureSpan">phantomas.requestsTo.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.requestsTo.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.screenshot">module phantomas.screenshot</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.screenshot.module">
            function <span class="apidocSignatureSpan">phantomas.screenshot.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.screenshot.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.scroll">module phantomas.scroll</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.scroll.module">
            function <span class="apidocSignatureSpan">phantomas.scroll.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.scroll.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.staticAssets">module phantomas.staticAssets</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.staticAssets.module">
            function <span class="apidocSignatureSpan">phantomas.staticAssets.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.staticAssets.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.stats">module phantomas.stats</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.stats">
            function <span class="apidocSignatureSpan">phantomas.</span>stats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.stats.prototype">module phantomas.stats.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.getAvailableStats">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getAvailableStats
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.getMetricStats">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetricStats
            <span class="apidocSignatureSpan">(metricName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.getMetrics">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetrics
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.stats.prototype.pushMetrics">
            function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>pushMetrics
            <span class="apidocSignatureSpan">(metrics)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.timeToFirst">module phantomas.timeToFirst</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.timeToFirst.module">
            function <span class="apidocSignatureSpan">phantomas.timeToFirst.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.timeToFirst.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.timeToFirstByte">module phantomas.timeToFirstByte</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.timeToFirstByte.module">
            function <span class="apidocSignatureSpan">phantomas.timeToFirstByte.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.timeToFirstByte.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.tty">module phantomas.tty</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.tty.getWindowSize">
            function <span class="apidocSignatureSpan">phantomas.tty.</span>getWindowSize
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.tty.isatty">
            function <span class="apidocSignatureSpan">phantomas.tty.</span>isatty
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.url">module phantomas.url</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.format">
            function <span class="apidocSignatureSpan">phantomas.url.</span>format
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.parse">
            function <span class="apidocSignatureSpan">phantomas.url.</span>parse
            <span class="apidocSignatureSpan">(url, parseQueryString, slashesDenoteHost)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.resolve">
            function <span class="apidocSignatureSpan">phantomas.url.</span>resolve
            <span class="apidocSignatureSpan">(source, relative)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.url.resolveObject">
            function <span class="apidocSignatureSpan">phantomas.url.</span>resolveObject
            <span class="apidocSignatureSpan">(source, relative)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.util">module phantomas.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.debug">
            function <span class="apidocSignatureSpan">phantomas.util.</span>debug
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.error">
            function <span class="apidocSignatureSpan">phantomas.util.</span>error
            <span class="apidocSignatureSpan">(x)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.exec">
            function <span class="apidocSignatureSpan">phantomas.util.</span>exec
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.format">
            function <span class="apidocSignatureSpan">phantomas.util.</span>format
            <span class="apidocSignatureSpan">(f)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.inherits">
            function <span class="apidocSignatureSpan">phantomas.util.</span>inherits
            <span class="apidocSignatureSpan">(ctor, superCtor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.inspect">
            function <span class="apidocSignatureSpan">phantomas.util.</span>inspect
            <span class="apidocSignatureSpan">(obj, showHidden, depth, colors)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isArray">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isArray
            <span class="apidocSignatureSpan">(ar)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isDate">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isDate
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isError">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isError
            <span class="apidocSignatureSpan">(e)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.isRegExp">
            function <span class="apidocSignatureSpan">phantomas.util.</span>isRegExp
            <span class="apidocSignatureSpan">(re)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.log">
            function <span class="apidocSignatureSpan">phantomas.util.</span>log
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.p">
            function <span class="apidocSignatureSpan">phantomas.util.</span>p
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.print">
            function <span class="apidocSignatureSpan">phantomas.util.</span>print
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.pump">
            function <span class="apidocSignatureSpan">phantomas.util.</span>pump
            <span class="apidocSignatureSpan">(readStream, writeStream, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.util.puts">
            function <span class="apidocSignatureSpan">phantomas.util.</span>puts
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.waitForEvent">module phantomas.waitForEvent</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.waitForEvent.module">
            function <span class="apidocSignatureSpan">phantomas.waitForEvent.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.waitForEvent.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.waitForSelector">module phantomas.waitForSelector</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.waitForSelector.module">
            function <span class="apidocSignatureSpan">phantomas.waitForSelector.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.waitForSelector.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.webkit">module phantomas.webkit</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.webkit.getUserAgent">
            function <span class="apidocSignatureSpan">phantomas.webkit.</span>getUserAgent
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>engine</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>name</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>path</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.webkit.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.phantomas.windowPerformance">module phantomas.windowPerformance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.phantomas.windowPerformance.module">
            function <span class="apidocSignatureSpan">phantomas.windowPerformance.</span>module
            <span class="apidocSignatureSpan">(phantomas)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">phantomas.windowPerformance.</span>version</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas" id="apidoc.module.phantomas">module phantomas</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.phantomas" id="apidoc.element.phantomas.phantomas">
        function <span class="apidocSignatureSpan"></span>phantomas
        <span class="apidocSignatureSpan">(url, opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function phantomas(url, opts, callback) {
	var engineArgs = [],
		deferred = Q.defer(),
		events = new emitter(),
		proc,
		engine,
		data = &#x27;&#x27;,
		tmpDir,
		options;

	// options can be omitted
	if (typeof opts === &#x27;function&#x27;) {
		callback = opts;
		opts = {};
	}

	debug(&#x27;nodejs %s&#x27;, process.version);
	debug(&#x27;phantomas v%s installed in %s&#x27;, VERSION, phantomas.path);
	debug(&#x27;URL: &#x3c;%s&#x3e;&#x27;, url);
	debug(&#x27;Options: %s&#x27;, JSON.stringify(opts));

	// options handling
	options = util._extend({}, opts || {}); // use util._extend to avoid #563
	options.url = options.url || url || false;

	// generate unique temporary directory name
	// and pass it to PhantomJS script as an environment variable
	tmpDir = getTmpDir();
	process.env.PHANTOMAS_TMP_DIR = tmpDir;

	// path to analyze-css main script (#664)
	process.env.ANALYZE_CSS_BIN = require(&#x27;analyze-css&#x27;).pathBin;

	debug(&#x27;Environment: %j&#x27;, process.env);

	// select the engine and run phantomas
	engine = new Engines(options);
	proc = engine.run(phantomas.path + &#x27;/scripts/phantomas.js&#x27;);

	debug(&#x27;Spawned with pid #%d&#x27;, proc.pid);

	proc.on(&#x27;error&#x27;, function(err) {
		debug(&#x27;Error: %s&#x27;, err);
	});

	<span class="apidocCodeCommentSpan">/**
	 * Set up IPC channel
	 *
	 * It will receive JSON-formatted messages from phantomjs / slimerjs process
	 * (send over stdout stream of spawned process) and emit events
	 */
</span>	var ipc = new(require(&#x27;./ipc&#x27;))(proc.stdout);
	ipc.setEventEmitter(events);

	// pipe log messages to error stream
	var errStream = new Stream.Readable();
	errStream._read = function() {
		return true;
	};

	ipc.on(&#x27;log&#x27;, function(msg) {
		errStream.push(msg + &#x22;\n&#x22;);
	});

	// push raw messages from stderr (PhantomJS run in --debug=true mode) to errStream
	proc.stderr.on(&#x27;data&#x27;, function(data) {
		var msg = data.toString().
		split(&#x27;[DEBUG]&#x27;).pop().
		trim();

		errStream.push(&#x27;Debug: &#x27; + msg + &#x22;\n&#x22;);
	});

	// handle loading progress
	var progressDebug = require(&#x27;debug&#x27;)(&#x27;phantomas:progress&#x27;);

	ipc.on(&#x27;progress&#x27;, function(progress, inc) {
		progressDebug(&#x27;%d% (+%d%)&#x27;, progress, inc);
		deferred.notify(progress / 100);
	});

	// handle --socket &#x3c;UNIX IPC socket&#x3e; option
	// @see http://nodejs.org/api/net.html#net_new_net_socket_options
	if (typeof options.socket === &#x27;string&#x27;) {
		var socket,
			socketName = options.socket;

		// @see http://nodejs.org/api/net.html#net_net_connect_options_connectionlistener
		debug(&#x27;Using UNIX socket for IPC: %s&#x27;, socketName);

		socket = new net.Socket();
		socket.connect(socketName, function() {
			debug(&#x27;Socket connected&#x27;);
		});

		socket.on(&#x27;error&#x27;, function(err) {
			debug(&#x27;Socket error: %s&#x27;, err);

			throw &#x27;Socket &#x22;&#x27; + socketName + &#x27;&#x22; error - &#x27; + err;
		});

		ipc.on(&#x27;_msg&#x27;, function(data) {
			// example: [&#x22;metric&#x22;,&#x22;bodyHTMLSize&#x22;,75193]
			socket.write(JSON.stringify(data) + &#x22;\n&#x22;);
		});
	}

	// get JSON results
	ipc.on(&#x27;json&#x27;, function(raw) {
		data = raw;
	});

	// failures handling
	var exitCode = 0;
	ipc.on(&#x27;exit&#x27;, function(code, msg) {
		if ((code &#x3e; 0) &#x26;&#x26; (typeof msg === &#x27;string&#x27;)) {
			exitCode = code;
			errStream.push(&#x27;phantomas: (&#x27; + code + &#x27;) &#x27; + msg + &#x22;\n&#x22;);
		}
	});

	// process results
	proc.on(&#x27;close&#x27;, function(code) {
		var debug = require(&#x27;debug&#x27;)(&#x27;phantomas:results&#x27;),
			json,
			results;

		// PhantomJS made a core dump (#382)
		if (code === null) {
			code = 255; // EXIT_ERROR
			errStream.push(&#x27;phantomas: (&#x27; + code + &#x27;) Engine crashed unexpectedly\n&#x27;);
		}

		// apply the code from &#x27;exit&#x27; event
		code = code || exitCode;

		debug(&#x27;Process returned code #%d&#x27;, code);

		// (try to) parse to JSON
		try {
			json = JSON.parse(data);
		} catch (ex) {
			debug(&#x27;Error when parsing JSON (%s): &#x22;%s&#x22;&#x27;, ex, data);
			errStream.push(data);

			// Return EXIT_ERROR when JSON can not be parsed (and there was no error earlier)
			if (code &#x3c; 250) {
				code = 255;
			}

			errStream.push(&#x27;phantomas: (&#x27; + code + &#x27;) Failed to parse JSON with the results\n&#x27;);
		}

		// finish the readable stream
		errStream.emit(&#x27;end&#x27;);

		if (typeof json !== &#x27;undefined&#x27;) {
			events.emit(&#x27;data&#x27;, json);

			// wrap JSON data into results object
			results = new(require(&#x27;../core/results&#x27;))(json ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert" id="apidoc.element.phantomas.assert">
        function <span class="apidocSignatureSpan">phantomas.</span>assert
        <span class="apidocSignatureSpan">(value, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ok(value, message) {
  if (!!!value) fail(value, true, message, &#x27;==&#x27;, assert.ok);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return true;
			}

			return (typeof val === &#x27;number&#x27;) ? val &#x3c;= expected : true;
		},
		getFailedAsserts: function() {
			return this.getMetricsNames().filter(function(metric) {
				return this.<span class="apidocCodeKeywordSpan">assert</span>(metric) === false;
			}, this);
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection" id="apidoc.element.phantomas.collection">
        function <span class="apidocSignatureSpan">phantomas.</span>collection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function collection() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.items = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines" id="apidoc.element.phantomas.engines">
        function <span class="apidocSignatureSpan">phantomas.</span>engines
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function engines(options) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.options = options;

	//--debug can be either &#x27;true&#x27; or &#x27;false&#x27;
	this.options.debug = (this.options.debug === true) ? &#x27;true&#x27; : &#x27;false&#x27;;

	// engines storage
	this.engines = {};
	[
		// the first one is a default one
		&#x27;webkit&#x27;,
		&#x27;gecko&#x27;
	].forEach(this.registerEngine, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc" id="apidoc.element.phantomas.ipc">
        function <span class="apidocSignatureSpan">phantomas.</span>ipc
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ipc(stream) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.stream = stream;
	this.events = new emitter();

	this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats" id="apidoc.element.phantomas.stats">
        function <span class="apidocSignatureSpan">phantomas.</span>stats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stats() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	// use pushMetrics() to add results for each run
	this.metrics = [];
	this.runs = 0;

	// stats to be calculated
	// @see https://github.com/bluesmoon/node-faststats
	this.stats = {
		min: function(values) {
			return values.range()[0];
		},
		max: function(values) {
			return values.range()[1];
		},
		average: function(values) {
			return values.amean().toFixed(2);
		},
		median: function(values) {
			return values.median().toFixed(2);
		},
		stddev: function(values) {
			return values.stddev().toFixed(2);
		}
	};

	this.statsNames = Object.keys(this.stats);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
































































































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ajaxRequests" id="apidoc.module.phantomas.ajaxRequests">module phantomas.ajaxRequests</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ajaxRequests.module" id="apidoc.element.phantomas.ajaxRequests.module">
        function <span class="apidocSignatureSpan">phantomas.ajaxRequests.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;ajaxRequests&#x27;); // @desc number of AJAX requests

	phantomas.on(&#x27;init&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				phantomas.spy(window.XMLHttpRequest.prototype, &#x27;open&#x27;, function(result, method, url, async) {
					phantomas.incrMetric(&#x27;ajaxRequests&#x27;);
					phantomas.addOffender(&#x27;ajaxRequests&#x27;, &#x27;&#x3c;%s&#x3e; [%s]&#x27;, url, method);
				}, true);
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.alerts" id="apidoc.module.phantomas.alerts">module phantomas.alerts</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.alerts.module" id="apidoc.element.phantomas.alerts.module">
        function <span class="apidocSignatureSpan">phantomas.alerts.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var alerts = [],
		confirms = [],
		prompts = [];

	phantomas.on(&#x27;alert&#x27;, function(msg) {
		alerts.push(msg);
	});

	phantomas.on(&#x27;confirm&#x27;, function(msg) {
		confirms.push(msg);
	});

	phantomas.on(&#x27;prompt&#x27;, function(msg) {
		prompts.push(msg);
	});

	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.setMetric(&#x27;windowAlerts&#x27;, alerts.length); // @desc number of calls to window.alert
		phantomas.setMetric(&#x27;windowConfirms&#x27;, confirms.length); // @desc number of calls to window.confirm
		phantomas.setMetric(&#x27;windowPrompts&#x27;, prompts.length); // @desc number of calls to window.prompt
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.analyzeCss" id="apidoc.module.phantomas.analyzeCss">module phantomas.analyzeCss</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.analyzeCss.module" id="apidoc.element.phantomas.analyzeCss.module">
        function <span class="apidocSignatureSpan">phantomas.analyzeCss.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	if (!phantomas.getParam(&#x27;analyze-css&#x27;)) {
		phantomas.log(&#x27;To enable CSS in-depth metrics please run phantomas with --analyze-css option&#x27;);
		return;
	}

	phantomas.setMetric(&#x27;cssParsingErrors&#x27;); // @desc number of CSS files (or embeded CSS) that failed to be parse by analyze-css @
optional
	phantomas.setMetric(&#x27;cssInlineStyles&#x27;); // @desc number of inline styles @optional

	function ucfirst(str) {
		// http://kevin.vanzonneveld.net
		// +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
		// +   bugfixed by: Onno Marsman
		// +   improved by: Brett Zamir (http://brett-zamir.me)
		// *     example 1: ucfirst(&#x27;kevin van zonneveld&#x27;);
		// *     returns 1: &#x27;Kevin van zonneveld&#x27;
		str += &#x27;&#x27;;
		var f = str.charAt(0).toUpperCase();
		return f + str.substr(1);
	}

	// run analyze-css &#x22;binary&#x22; installed by npm
	function analyzeCss(options) {
		var system = require(&#x27;system&#x27;),
			isWindows = (system.os.name === &#x27;windows&#x27;),
			binary = system.env.ANALYZE_CSS_BIN,
			proxy;

		// force JSON output format
		options.push(&#x27;--json&#x27;);

		// set basic auth if needed
		if (phantomas.getParam(&#x27;auth-user&#x27;) &#x26;&#x26; phantomas.getParam(&#x27;auth-pass&#x27;)) {
			options.push(&#x27;--auth-user&#x27;, phantomas.getParam(&#x27;auth-user&#x27;));
			options.push(&#x27;--auth-pass&#x27;, phantomas.getParam(&#x27;auth-pass&#x27;));
		}

		// HTTP proxy (#500)
		proxy = phantomas.getParam(&#x27;proxy&#x27;, false, &#x27;string&#x27;);

		if (proxy !== false) {
			if (proxy.indexOf(&#x27;http:&#x27;) &#x3c; 0) {
				proxy = &#x27;http://&#x27; + proxy; // http-proxy-agent (used by analyze-css) expects a protocol as well
			}

			options.push(&#x27;--proxy&#x27;, proxy);
		}

		phantomas.runScript(binary, options, function(err, results) {
			var offenderSrc = (options[0] === &#x27;--url&#x27;) ? &#x27;&#x3c;&#x27; + options[1] + &#x27;&#x3e;&#x27; : &#x27;[inline CSS]&#x27;;

			if (err !== null) {
				phantomas.log(&#x27;analyzeCss: sub-process failed! - %s&#x27;, err);

				// report failed CSS parsing (issue #494(
				var offender = offenderSrc;
				if (err.message) { // Error object returned
					if (err.message.indexOf(&#x27;Unable to parse JSON string&#x27;) &#x3e; 0) {
						offender += &#x27; (analyzeCss output error)&#x27;;
					}
				} else { // Error string returned (stderror)
					if (err.indexOf(&#x27;CSS parsing failed&#x27;) &#x3e; 0 || err.indexOf(&#x27;is an invalid expression&#x27;) &#x3e; 0) {
						offender += &#x27; (&#x27; + err.trim() + &#x27;)&#x27;;
					} else if (err.indexOf(&#x27;Empty CSS was provided&#x27;) &#x3e; 0) {
						offender += &#x27; (Empty CSS was provided)&#x27;;
					}
				}

				phantomas.incrMetric(&#x27;cssParsingErrors&#x27;);
				phantomas.addOffender(&#x27;cssParsingErrors&#x27;, offender);
				return;
			}

			phantomas.log(&#x27;analyzeCss: using &#x27; + results.generator);

			var metrics = results.metrics || {},
				offenders = results.offenders || {};

			Object.keys(metrics).forEach(function(metric) {
				var metricPrefixed = &#x27;css&#x27; + ucfirst(metric);

				if (/Avg$/.test(metricPrefixed)) {
					// update the average value (see #641)
					phantomas.addToAvgMetric(metricPrefixed, metrics[metric]);
				} else {
					// increase metrics
					phantomas.incrMetric(metricPrefixed, metrics[metric]);
				}

				// and add offenders
				if (typeof offenders[metric] !== &#x27;undefined&#x27;) {
					offenders[metric].forEach(function(msg) {
						var re = / @ \d+:\d+$/;

						// add the file name to offenders (issue #442)
						// the message ends with something similar to &#x22; @ 25:1&#x22;
						if (re.test(msg)) {
							msg = msg.replace(re, &#x27; &#x27; + offenderSrc + &#x27;$&#x26;&#x27;);
						}

						phantomas.addOffender(metricPrefixed, msg);
					});
				}
				// add more offenders (#578)
				else {
					switch (metricPrefixed) {
						case &#x27;cssLength&#x27;:
						case &#x27;cssRules&#x27;:
						case &#x27;cssSelectors&#x27;:
						case &#x27;cssDeclarations&#x27;:
						case &#x27;cssNotMinified&#x27;:
						case &#x27;cssSelectorLengthAvg&#x27;:
						case &#x27;cssSpecificityIdAvg&#x27;:
						case &#x27;cssSpecificityClassAvg&#x27;:
						case &#x27;cssSpecificityTagAvg&#x27;:
							phantomas.addOffender(metricPrefixed, offenderSrc + &#x27;: &#x27; + metrics[metric]);
							break;
					}
				}
			});
		});
	}

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		if (entry.isCSS) {
			phantomas.log(&#x27;CSS: analyzing &#x3c;%s&#x3e;...&#x27;, entry.url);
			analyzeCss([&#x27;--url&#x27;, entry.url]);
		}
	}); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ansicolors" id="apidoc.module.phantomas.ansicolors">module phantomas.ansicolors</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBlack" id="apidoc.element.phantomas.ansicolors.bgBlack">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlack
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBlack = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBlue" id="apidoc.element.phantomas.ansicolors.bgBlue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBlue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBlue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightBlack" id="apidoc.element.phantomas.ansicolors.bgBrightBlack">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlack
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightBlack = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightBlue" id="apidoc.element.phantomas.ansicolors.bgBrightBlue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightBlue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightBlue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightCyan" id="apidoc.element.phantomas.ansicolors.bgBrightCyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightCyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightCyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightGreen" id="apidoc.element.phantomas.ansicolors.bgBrightGreen">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightGreen
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightGreen = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightMagenta" id="apidoc.element.phantomas.ansicolors.bgBrightMagenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightMagenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightMagenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightRed" id="apidoc.element.phantomas.ansicolors.bgBrightRed">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightRed
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightRed = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightWhite" id="apidoc.element.phantomas.ansicolors.bgBrightWhite">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightWhite
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightWhite = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgBrightYellow" id="apidoc.element.phantomas.ansicolors.bgBrightYellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgBrightYellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgBrightYellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgCyan" id="apidoc.element.phantomas.ansicolors.bgCyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgCyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgCyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgGreen" id="apidoc.element.phantomas.ansicolors.bgGreen">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgGreen
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgGreen = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgMagenta" id="apidoc.element.phantomas.ansicolors.bgMagenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgMagenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgMagenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgRed" id="apidoc.element.phantomas.ansicolors.bgRed">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgRed
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgRed = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgWhite" id="apidoc.element.phantomas.ansicolors.bgWhite">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgWhite
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgWhite = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.bgYellow" id="apidoc.element.phantomas.ansicolors.bgYellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>bgYellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgYellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.black" id="apidoc.element.phantomas.ansicolors.black">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>black
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">black = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.blue" id="apidoc.element.phantomas.ansicolors.blue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>blue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">blue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightBlack" id="apidoc.element.phantomas.ansicolors.brightBlack">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlack
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightBlack = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			// error!
			if (/!$/.test(consoleMsg) || /Error:/.test(consoleMsg)) {
				consoleMsg = colors.brightRed(styles.bright(consoleMsg));
			}
			// label: message
			else if (/^(.*): /.test(consoleMsg)) {
				var idx = consoleMsg.indexOf(&#x27;: &#x27;) + 1;
				consoleMsg = colors.brightGreen(consoleMsg.substr(0, idx)) + colors.<span class="apidocCodeKeywordSpan">brightBlack</span>(consoleMsg
.substr(idx));
			}
			// the rest
			else {
				consoleMsg = colors.brightBlack(consoleMsg);
			}

			if (!beSilent) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightBlue" id="apidoc.element.phantomas.ansicolors.brightBlue">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightBlue
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightBlue = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightCyan" id="apidoc.element.phantomas.ansicolors.brightCyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightCyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightCyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightGreen" id="apidoc.element.phantomas.ansicolors.brightGreen">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightGreen
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightGreen = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			// error!
			if (/!$/.test(consoleMsg) || /Error:/.test(consoleMsg)) {
				consoleMsg = colors.brightRed(styles.bright(consoleMsg));
			}
			// label: message
			else if (/^(.*): /.test(consoleMsg)) {
				var idx = consoleMsg.indexOf(&#x27;: &#x27;) + 1;
				consoleMsg = colors.<span class="apidocCodeKeywordSpan">brightGreen</span>(consoleMsg.substr(0, idx)) + colors.brightBlack(consoleMsg
.substr(idx));
			}
			// the rest
			else {
				consoleMsg = colors.brightBlack(consoleMsg);
			}

			if (!beSilent) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightMagenta" id="apidoc.element.phantomas.ansicolors.brightMagenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightMagenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightMagenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightRed" id="apidoc.element.phantomas.ansicolors.brightRed">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightRed
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightRed = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		// log to the console (--verbose)
		if (beVerbose) {
			var consoleMsg = msg;

			// error!
			if (/!$/.test(consoleMsg) || /Error:/.test(consoleMsg)) {
				consoleMsg = colors.<span class="apidocCodeKeywordSpan">brightRed</span>(styles.bright(consoleMsg));
			}
			// label: message
			else if (/^(.*): /.test(consoleMsg)) {
				var idx = consoleMsg.indexOf(&#x27;: &#x27;) + 1;
				consoleMsg = colors.brightGreen(consoleMsg.substr(0, idx)) + colors.brightBlack(consoleMsg.substr(idx));
			}
			// the rest
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightWhite" id="apidoc.element.phantomas.ansicolors.brightWhite">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightWhite
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightWhite = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.brightYellow" id="apidoc.element.phantomas.ansicolors.brightYellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>brightYellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">brightYellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.cyan" id="apidoc.element.phantomas.ansicolors.cyan">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>cyan
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cyan = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.disable" id="apidoc.element.phantomas.ansicolors.disable">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>disable
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function disable() {
	keys.forEach(function(key) {
		colors[key] = nop;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var isMultiple = Array.isArray(results),
		noColor = (reporterOptions[&#x27;no-color&#x27;] === true);

	function formatSingleRunResults(results) {
		var res = [];

		if (noColor) {
			colors.<span class="apidocCodeKeywordSpan">disable</span>();
		}

		// header
		res.push(results.getGenerator() + &#x27; metrics for &#x3c;&#x27; + results.getUrl() + &#x27;&#x3e;:&#x27;);
		res.push(&#x27;&#x27;);

		// metrics
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.green" id="apidoc.element.phantomas.ansicolors.green">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>green
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">green = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.magenta" id="apidoc.element.phantomas.ansicolors.magenta">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>magenta
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">magenta = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.red" id="apidoc.element.phantomas.ansicolors.red">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>red
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">red = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.white" id="apidoc.element.phantomas.ansicolors.white">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>white
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">white = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ansicolors.yellow" id="apidoc.element.phantomas.ansicolors.yellow">
        function <span class="apidocSignatureSpan">phantomas.ansicolors.</span>yellow
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">yellow = function (s) {
  return o + s + c;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.assert" id="apidoc.module.phantomas.assert">module phantomas.assert</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.assert.assert" id="apidoc.element.phantomas.assert.assert">
        function <span class="apidocSignatureSpan">phantomas.</span>assert
        <span class="apidocSignatureSpan">(value, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ok(value, message) {
  if (!!!value) fail(value, true, message, &#x27;==&#x27;, assert.ok);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return true;
			}

			return (typeof val === &#x27;number&#x27;) ? val &#x3c;= expected : true;
		},
		getFailedAsserts: function() {
			return this.getMetricsNames().filter(function(metric) {
				return this.<span class="apidocCodeKeywordSpan">assert</span>(metric) === false;
			}, this);
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.AssertionError" id="apidoc.element.phantomas.assert.AssertionError">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>AssertionError
        <span class="apidocSignatureSpan">{{signature}}</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">AssertionError</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// 1. The assert module provides functions that throw
// AssertionError&#x27;s when particular conditions are not met. The
// assert module must conform to the following interface.

var assert = module.exports = ok;

// 2. The AssertionError is defined in assert.
// new assert.<span class="apidocCodeKeywordSpan">AssertionError</span>({ message: message,
// actual: actual,
// expected: expected })

assert.AssertionError = function AssertionError(options) {
this.name = &#x27;AssertionError&#x27;;
this.message = options.message;
this.actual = options.actual;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.deepEqual" id="apidoc.element.phantomas.assert.deepEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>deepEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected)) {
    fail(actual, expected, message, &#x27;deepEqual&#x27;, assert.deepEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, &#x27;!=&#x27;, assert.notEqual);
  }
};

// 7. The equivalence assertion tests a deep equality relation.
// assert.<span class="apidocCodeKeywordSpan">deepEqual</span>(actual, expected, message_opt);

assert.deepEqual = function deepEqual(actual, expected, message) {
  if (!_deepEqual(actual, expected)) {
    fail(actual, expected, message, &#x27;deepEqual&#x27;, assert.deepEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.doesNotThrow" id="apidoc.element.phantomas.assert.doesNotThrow">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>doesNotThrow
        <span class="apidocSignatureSpan">(block, error, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">doesNotThrow = function (block, error, message) {
  _throws.apply(this, [false].concat(pSlice.call(arguments)));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.equal" id="apidoc.element.phantomas.assert.equal">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>equal
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, &#x27;==&#x27;, assert.equal);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.<span class="apidocCodeKeywordSpan">equal</span>(true, guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!!!value) fail(value, true, message, &#x27;==&#x27;, assert.ok);
}
assert.ok = ok;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.fail" id="apidoc.element.phantomas.assert.fail">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>fail
        <span class="apidocSignatureSpan">(actual, expected, message, operator, stackStartFunction)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function fail(actual, expected, message, operator, stackStartFunction) {
  throw new assert.AssertionError({
    message: message,
    actual: actual,
    expected: expected,
    operator: operator,
    stackStartFunction: stackStartFunction
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.ifError" id="apidoc.element.phantomas.assert.ifError">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>ifError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ifError = function (err) { if (err) {throw err;}}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.notDeepEqual" id="apidoc.element.phantomas.assert.notDeepEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>notDeepEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected)) {
    fail(actual, expected, message, &#x27;notDeepEqual&#x27;, assert.notDeepEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    key = ka[i];
    if (!_deepEqual(a[key], b[key])) return false;
  }
  return true;
}

// 8. The non-equivalence assertion tests for any deep inequality.
// assert.<span class="apidocCodeKeywordSpan">notDeepEqual</span>(actual, expected, message_opt);

assert.notDeepEqual = function notDeepEqual(actual, expected, message) {
  if (_deepEqual(actual, expected)) {
    fail(actual, expected, message, &#x27;notDeepEqual&#x27;, assert.notDeepEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.notEqual" id="apidoc.element.phantomas.assert.notEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>notEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, &#x27;!=&#x27;, assert.notEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// assert.equal(actual, expected, message_opt);

assert.equal = function equal(actual, expected, message) {
  if (actual != expected) fail(actual, expected, message, &#x27;==&#x27;, assert.equal);
};

// 6. The non-equality assertion tests for whether two objects are not equal
// with != assert.<span class="apidocCodeKeywordSpan">notEqual</span>(actual, expected, message_opt);

assert.notEqual = function notEqual(actual, expected, message) {
  if (actual == expected) {
    fail(actual, expected, message, &#x27;!=&#x27;, assert.notEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.notStrictEqual" id="apidoc.element.phantomas.assert.notStrictEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>notStrictEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, &#x27;!==&#x27;, assert.notStrictEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
assert.strictEqual = function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, &#x27;===&#x27;, assert.strictEqual);
  }
};

// 10. The strict non-equality assertion tests for strict inequality, as
// determined by !==. assert.<span class="apidocCodeKeywordSpan">notStrictEqual</span>(actual, expected, message_opt);

assert.notStrictEqual = function notStrictEqual(actual, expected, message) {
  if (actual === expected) {
    fail(actual, expected, message, &#x27;!==&#x27;, assert.notStrictEqual);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.ok" id="apidoc.element.phantomas.assert.ok">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>ok
        <span class="apidocSignatureSpan">(value, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ok(value, message) {
  if (!!!value) fail(value, true, message, &#x27;==&#x27;, assert.ok);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

// EXTENSION! allows for well behaved errors defined elsewhere.
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.<span class="apidocCodeKeywordSpan">ok</span>(guard, message_opt);
// This statement is equivalent to assert.equal(true, guard,
// message_opt);. To test strictly for the value true, use
// assert.strictEqual(true, guard, message_opt);.

function ok(value, message) {
  if (!!!value) fail(value, true, message, &#x27;==&#x27;, assert.ok);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.strictEqual" id="apidoc.element.phantomas.assert.strictEqual">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>strictEqual
        <span class="apidocSignatureSpan">(actual, expected, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function strictEqual(actual, expected, message) {
  if (actual !== expected) {
    fail(actual, expected, message, &#x27;===&#x27;, assert.strictEqual);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
assert.fail = fail;

// 4. Pure assertion tests whether a value is truthy, as determined
// by !!guard.
// assert.ok(guard, message_opt);
// This statement is equivalent to assert.equal(true, guard,
// message_opt);. To test strictly for the value true, use
// assert.<span class="apidocCodeKeywordSpan">strictEqual</span>(true, guard, message_opt);.

function ok(value, message) {
  if (!!!value) fail(value, true, message, &#x27;==&#x27;, assert.ok);
}
assert.ok = ok;

// 5. The equality assertion tests shallow, coercive equality with
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.assert.throws" id="apidoc.element.phantomas.assert.throws">
        function <span class="apidocSignatureSpan">phantomas.assert.</span>throws
        <span class="apidocSignatureSpan">(block, error, message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">throws = function (block, error, message) {
  _throws.apply(this, [true].concat(pSlice.call(arguments)));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if ((shouldThrow &#x26;&#x26; actual &#x26;&#x26; expected &#x26;&#x26;
      !expectedException(actual, expected)) || (!shouldThrow &#x26;&#x26; actual)) {
    throw actual;
  }
}

// 11. Expected to throw an error:
// assert.<span class="apidocCodeKeywordSpan">throws</span>(block, Error_opt, message_opt);

assert.throws = function(block, /*optional*/error, /*optional*/message) {
  _throws.apply(this, [true].concat(pSlice.call(arguments)));
};

// EXTENSION! This is annoying to write outside this module.
assert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.assetsTypes" id="apidoc.module.phantomas.assetsTypes">module phantomas.assetsTypes</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.assetsTypes.module" id="apidoc.element.phantomas.assetsTypes.module">
        function <span class="apidocSignatureSpan">phantomas.assetsTypes.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	[&#x27;html&#x27;, &#x27;css&#x27;, &#x27;js&#x27;, &#x27;json&#x27;, &#x27;image&#x27;, &#x27;video&#x27;, &#x27;webfont&#x27;, &#x27;base64&#x27;, &#x27;other&#x27;].forEach(function(key) {
		phantomas.setMetric(key + &#x27;Count&#x27;);
		phantomas.setMetric(key + &#x27;Size&#x27;);
	});

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var size = entry.contentLength;

		phantomas.incrMetric(entry.type + &#x27;Count&#x27;);
		phantomas.incrMetric(entry.type + &#x27;Size&#x27;, size);

		phantomas.addOffender(entry.type + &#x27;Count&#x27;, entry.url + &#x27; (size: &#x27; + (size / 1024).toFixed(2) + &#x27; kB, latency: &#x27; + entry.timeToFirstByte
 + &#x27; ms)&#x27;);
	});

	phantomas.on(&#x27;base64recv&#x27;, function(entry, res) {
		phantomas.incrMetric(&#x27;base64Count&#x27;);
		phantomas.incrMetric(&#x27;base64Size&#x27;, entry.contentLength);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.blockDomains" id="apidoc.module.phantomas.blockDomains">module phantomas.blockDomains</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.blockDomains.module" id="apidoc.element.phantomas.blockDomains.module">
        function <span class="apidocSignatureSpan">phantomas.blockDomains.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var ourDomain = false,

		// --no-externals
		noExternalsMode = (phantomas.getParam(&#x27;no-externals&#x27;) === true),
		// --allow-domain .fastly.net,.googleapis.com
		allowedDomains = phantomas.getParam(&#x27;allow-domain&#x27;),
		allowedDomainsRegExp,
		// --block-domain google-analytics.com
		blockedDomains = phantomas.getParam(&#x27;block-domain&#x27;),
		blockedDomainsRegExp;

	function checkBlock(domain) {
		var blocked = false;

		// --no-externals
		if (noExternalsMode &#x26;&#x26; ourDomain !== false &#x26;&#x26; domain !== ourDomain) {
			blocked = true;
		}

		// match blacklist (--block-domain)
		if (blockedDomainsRegExp &#x26;&#x26; blockedDomainsRegExp.test(domain)) {
			blocked = true;
		}

		// match whitelist (--allow-domain)
		if (allowedDomainsRegExp) {
			if (allowedDomainsRegExp.test(domain) || domain === ourDomain) {
				blocked = false;
			} else {
				blocked = true;
			}
		}

		return blocked;
	}

	// parse settings
	function parseParameter(value) {
		return value.
		split(&#x27;,&#x27;).
		map(function(item) {
			return item.trim();
		});
	}

	allowedDomains = (typeof allowedDomains === &#x27;string&#x27;) ? parseParameter(allowedDomains) : false;
	blockedDomains = (typeof blockedDomains === &#x27;string&#x27;) ? parseParameter(blockedDomains) : false;

	if (noExternalsMode) {
		phantomas.log(&#x27;Block domains: working in --no-externals mode&#x27;);
	}

	if (allowedDomains !== false) {
		phantomas.log(&#x27;Block domains: whitelist - &#x27; + allowedDomains.join(&#x27;, &#x27;));
		allowedDomainsRegExp = new RegExp(&#x27;(&#x27; + allowedDomains.join(&#x27;|&#x27;) + &#x27;)$&#x27;);
	}

	if (blockedDomains !== false) {
		phantomas.log(&#x27;Block domains: blacklist - &#x27; + blockedDomains.join(&#x27;, &#x27;));
		blockedDomainsRegExp = new RegExp(&#x27;(&#x27; + blockedDomains.join(&#x27;|&#x27;) + &#x27;)$&#x27;);
	}

	// get the &#x22;main&#x22; domain from the first request (see issues #197 and #535)
	phantomas.on(&#x27;beforeSend&#x27;, function(entry) {
		if (!ourDomain) {
			ourDomain = entry.domain;
			phantomas.log(&#x27;Block domains: assuming &#x22;%s&#x22; to be the main domain (from the first request sent)&#x27;, ourDomain);
		}
	});

	// check each request before sending
	phantomas.on(&#x27;beforeSend&#x27;, function(entry) {
		if (checkBlock(entry.domain)) {
			entry.block();

			// stats
			phantomas.incrMetric(&#x27;blockedRequests&#x27;); // @desc number of requests blocked due to domain filtering @optional
			phantomas.addOffender(&#x27;blockedRequests&#x27;, entry.url);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.cacheHits" id="apidoc.module.phantomas.cacheHits">module phantomas.cacheHits</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.cacheHits.module" id="apidoc.element.phantomas.cacheHits.module">
        function <span class="apidocSignatureSpan">phantomas.cacheHits.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;cacheHits&#x27;); // @desc number of cache hits @offenders
	phantomas.setMetric(&#x27;cacheMisses&#x27;); // @desc number of cache misses @offenders
	phantomas.setMetric(&#x27;cachePasses&#x27;); // @desc number of cache passes @offenders

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var age, xCacheHeader,
			isHit, isMiss, isPass;

		// parser response headers
		//
		// X-Cache:HIT, HIT
		// X-Cache:arsenic miss (0)
		// Age: 170221
		age = parseInt(entry.headers.Age, 10);
		xCacheHeader = (entry.headers[&#x27;X-Cache&#x27;] || &#x27;&#x27;).toLowerCase();

		if (xCacheHeader !== &#x27;&#x27;) {
			isHit = xCacheHeader.indexOf(&#x27;hit&#x27;) &#x3e; -1;

			if (!isHit) {
				isPass = xCacheHeader.indexOf(&#x27;pass&#x27;) &#x3e; -1;
				isMiss = xCacheHeader.indexOf(&#x27;miss&#x27;) &#x3e; -1;
			}
		}
		// @see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.6
		else if (typeof age === &#x27;number&#x27;) {
			isHit = age &#x3e; 0;
			// Varnish sets age to 0 for fresh &#x26; not cached objects
			isMiss = age === 0;
		}

		// now set metrics
		if (isHit) {
			phantomas.incrMetric(&#x27;cacheHits&#x27;);
			phantomas.addOffender(&#x27;cacheHits&#x27;, entry.url);
		} else if (isPass) {
			phantomas.incrMetric(&#x27;cachePasses&#x27;);
			phantomas.addOffender(&#x27;cachePasses&#x27;, entry.url);
		} else if (isMiss) {
			phantomas.incrMetric(&#x27;cacheMisses&#x27;);
			phantomas.addOffender(&#x27;cacheMisses&#x27;, entry.url);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.caching" id="apidoc.module.phantomas.caching">module phantomas.caching</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.caching.module" id="apidoc.element.phantomas.caching.module">
        function <span class="apidocSignatureSpan">phantomas.caching.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var cacheControlRegExp = /max-age=(\d+)/;

	function getCachingTime(url, headers) {
		// false means &#x22;no caching&#x22;
		var ttl = false,
			headerName,
			now = new Date(),
			headerDate;

		for (headerName in headers) {
			var value = headers[headerName];

			switch (headerName.toLowerCase()) {
				// parse max-age=...
				//
				// max-age=2592000
				// public, max-age=300, must-revalidate
				case &#x27;cache-control&#x27;:
					var matches = value.match(cacheControlRegExp);

					if (matches) {
						ttl = parseInt(matches[1], 10);
					}
					break;

					// catch Expires and Pragma headers
				case &#x27;expires&#x27;:
				case &#x27;pragma&#x27;:
					// and Varnish specific headers
				case &#x27;x-pass-expires&#x27;:
				case &#x27;x-pass-cache-control&#x27;:
					phantomas.incrMetric(&#x27;oldCachingHeaders&#x27;); // @desc number of responses with old, HTTP 1.0 caching headers (Expires and Pragma
)
					phantomas.addOffender(&#x27;oldCachingHeaders&#x27;, url + &#x27; - &#x27; + headerName + &#x27;: &#x27; + value);
					if (ttl === false) {
						headerDate = Date.parse(value);
						if (headerDate) ttl = Math.round((headerDate - now) / 1000);
					}
					break;
			}
		}

		//console.log(JSON.stringify(headers)); console.log(&#x22;TTL: &#x22; + ttl + &#x27; s&#x27;);

		return ttl;
	}

	phantomas.setMetric(&#x27;cachingNotSpecified&#x27;); // @desc number of responses with no caching header sent (no Cache-Control header)
	phantomas.setMetric(&#x27;cachingTooShort&#x27;); // @desc number of responses with too short (less than a week) caching time
	phantomas.setMetric(&#x27;cachingDisabled&#x27;); // @desc number of responses with caching disabled (max-age=0)

	phantomas.setMetric(&#x27;oldCachingHeaders&#x27;);

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var ttl = getCachingTime(entry.url, entry.headers);

		// static assets
		if (entry.isImage || entry.isJS || entry.isCSS) {
			if (ttl === false) {
				phantomas.incrMetric(&#x27;cachingNotSpecified&#x27;);
				phantomas.addOffender(&#x27;cachingNotSpecified&#x27;, entry.url);
			} else if (ttl &#x3c;= 0) {
				phantomas.incrMetric(&#x27;cachingDisabled&#x27;);
				phantomas.addOffender(&#x27;cachingDisabled&#x27;, entry.url);
			} else if (ttl &#x3c; 7 * 86400) {
				phantomas.incrMetric(&#x27;cachingTooShort&#x27;);
				phantomas.addOffender(&#x27;cachingTooShort&#x27;, entry.url + &#x27; cached for &#x27; + ttl + &#x27; s&#x27;);
			}
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.collection" id="apidoc.module.phantomas.collection">module phantomas.collection</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.collection.collection" id="apidoc.element.phantomas.collection.collection">
        function <span class="apidocSignatureSpan">phantomas.</span>collection
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function collection() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.items = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.collection.prototype" id="apidoc.module.phantomas.collection.prototype">module phantomas.collection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.forEach" id="apidoc.element.phantomas.collection.prototype.forEach">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>forEach
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forEach = function (callback) {
		Object.keys(this.items).forEach(function(key) {
			callback(key, this.items[key].cnt);
		}, this);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// -R plain
	// -R csv
	// -R csv:no-header:url:timestamp
	reporterOptions = (options.reporter + &#x27;&#x27;).split(&#x27;:&#x27;);
	reporterName = reporterOptions.shift();

	// allow access to options via object.key (for non-numeric values)
	reporterOptions.<span class="apidocCodeKeywordSpan">forEach</span>(function(option) {
		if (!parseInt(option)) {
			reporterOptions[option] = true;
		}
	});

	debug(&#x27;Setting up %s reporter (options: %j)...&#x27;, reporterName, reporterOptions);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.getLength" id="apidoc.element.phantomas.collection.prototype.getLength">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>getLength
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLength = function () {
		return Object.keys(this.items).length;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		domains.sort().forEach(function(name, cnt) {
			phantomas.addOffender(&#x27;domains&#x27;, &#x27;%s: %d request(s)&#x27;, name, cnt);

			domainsRequests.push(cnt);
		});

		if (domains.<span class="apidocCodeKeywordSpan">getLength</span>() &#x3e; 0) {
			phantomas.setMetric(&#x27;domains&#x27;, domains.getLength());
			phantomas.setMetric(&#x27;maxRequestsPerDomain&#x27;, domainsRequests.range()[1]);
			phantomas.setMetric(&#x27;medianRequestsPerDomain&#x27;, domainsRequests.median());
		}
	});
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.has" id="apidoc.element.phantomas.collection.prototype.has">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>has
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">has = function (item) {
		return (typeof this.items[item] !== &#x27;undefined&#x27;);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		}

		if (entry.isImage || entry.isJS || entry.isCSS) {
			// count number of requests to each asset
			assetsReqCounter.push(entry.url);

			// count static assets requested from domains with cookie set
			if (cookieDomains.<span class="apidocCodeKeywordSpan">has</span>(entry.domain)) {
				phantomas.incrMetric(&#x27;assetsWithCookies&#x27;);
				phantomas.addOffender(&#x27;assetsWithCookies&#x27;, &#x27;%s (%s)&#x27;, entry.url, entry.type.toUpperCase());
			}
		}
	});

	phantomas.on(&#x27;report&#x27;, function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.push" id="apidoc.element.phantomas.collection.prototype.push">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>push
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">push = function (item) {
		if (typeof this.items[item] === &#x27;undefined&#x27;) {
			this.items[item] = {
				cnt: 1
			};
		} else {
			this.items[item].cnt++;
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// @see https://github.com/caolan/async#seriestasks-callback
var series = [];

debug(&#x27;Preparing %d run(s)...&#x27;, runs);

for (var r = 0; r &#x3c; runs; r++) {
	series.<span class="apidocCodeKeywordSpan">push</span>(task);
}

async.series(
	series,
	function(err, results) {
		var debug = require(&#x27;debug&#x27;)(&#x27;phantomas:runs&#x27;),
			needDrain,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.collection.prototype.sort" id="apidoc.element.phantomas.collection.prototype.sort">
        function <span class="apidocSignatureSpan">phantomas.collection.prototype.</span>sort
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sort = function () {
		var newItems = {},
			sortedKeys;

		// sort in descending order (by cnt)
		sortedKeys = Object.keys(this.items).sort((function(a, b) {
			return this.items[b].cnt - this.items[a].cnt;
		}).bind(this));

		// build new items dictionary
		sortedKeys.forEach(function(key) {
			newItems[key] = this.items[key];
		}, this);

		this.items = newItems;
		return this;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	},

	sort: function() {
		var newItems = {},
			sortedKeys;

		// sort in descending order (by cnt)
		sortedKeys = Object.keys(this.items).<span class="apidocCodeKeywordSpan">sort</span>((function(a, b) {
			return this.items[b].cnt - this.items[a].cnt;
		}).bind(this));

		// build new items dictionary
		sortedKeys.forEach(function(key) {
			newItems[key] = this.items[key];
		}, this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.console" id="apidoc.module.phantomas.console">module phantomas.console</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.console.module" id="apidoc.element.phantomas.console.module">
        function <span class="apidocSignatureSpan">phantomas.console.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;consoleMessages&#x27;); // @desc number of calls to console.* functions

	phantomas.on(&#x27;consoleLog&#x27;, function(msg) {
		phantomas.incrMetric(&#x27;consoleMessages&#x27;);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.cookies" id="apidoc.module.phantomas.cookies">module phantomas.cookies</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.cookies.module" id="apidoc.element.phantomas.cookies.module">
        function <span class="apidocSignatureSpan">phantomas.cookies.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	var cookiesJar = phantomas.getParam(&#x27;cookies&#x27;, [], &#x27;object&#x27;),
		COOKIE_SEPARATOR = &#x27;|&#x27;;

	// setup cookies handling
	function initCookies() {
		// cookie handling via command line and config.json
		phantom.cookiesEnabled = true;

		// handles multiple cookies from config.json, and used for storing
		// constructed cookies from command line.

		// --cookie=&#x27;bar=foo;domain=url&#x27;
		// for multiple cookies, please use pipe-separated string (issue #667)
		// --cookie=&#x27;foo=42|test=123&#x27;
		var cookieParam = phantomas.getParam(&#x27;cookie&#x27;, false, &#x27;string&#x27;);

		if (cookieParam !== false) {
			phantomas.log(&#x27;Cookies: parsing &#x22;cookie&#x22; parameter&#x27;); // issue #667

			cookieParam.split(COOKIE_SEPARATOR).forEach(function(cookieParam) {
				// Parse cookie. at minimum, need a key=value pair, and a domain.
				// Domain attr, if unavailble, is created from `phantomas.url` during
				//  addition to phantomjs in injectCookies function
				// Full JS cookie syntax is supported.
				var cookieComponents = cookieParam.split(&#x27;;&#x27;),
					cookie = {};

				for (var i = 0, len = cookieComponents.length; i &#x3c; len; i++) {
					var frag = cookieComponents[i].split(&#x27;=&#x27;);

					// special case: key-value
					if (i === 0) {
						cookie.name = frag[0];
						cookie.value = frag[1];

						// special case: secure
					} else if (frag[0] === &#x27;secure&#x27;) {
						cookie.secure = true;

						// everything else
					} else {
						cookie[frag[0]] = frag[1];
					}
				}

				// see injectCookies for validation
				cookiesJar.push(cookie);
			});
		}
	}

	// add cookies, if any, providing a domain shim
	function injectCookies() {
		if (cookiesJar &#x26;&#x26; cookiesJar.length &#x3e; 0) {
			// @see http://nodejs.org/docs/latest/api/url.html
			var parseUrl = phantomas.require(&#x27;url&#x27;).parse;

			cookiesJar.forEach(function(cookie) {
				// phantomjs required attrs: *name, *value, *domain
				if (!cookie.name || !cookie.value) {
					throw &#x27;this cookie is missing a name or value property: &#x27; + JSON.stringify(cookie);
				}

				if (!cookie.domain) {
					var parsed = parseUrl(phantomas.url),
						root = (parsed.hostname || &#x27;&#x27;).replace(/^www/, &#x27;&#x27;); // strip www

					cookie.domain = root;
					phantomas.log(&#x27;Cookies: domain fallback applied - %s&#x27;, root);
				}

				if (!phantom.addCookie(cookie)) {
					// In PhantomJS 2.1, the addCookie function always returns false (#597).
					//throw &#x27;PhantomJS could not add cookie: &#x27; + JSON.stringify(cookie);
				}

				phantomas.log(&#x27;Cookies: set &#x27; + JSON.stringify(cookie));
			});
		}
	}

	initCookies();
	phantomas.on(&#x27;pageBeforeOpen&#x27;, injectCookies);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.devices" id="apidoc.module.phantomas.devices">module phantomas.devices</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.devices.module" id="apidoc.element.phantomas.devices.module">
        function <span class="apidocSignatureSpan">phantomas.devices.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var device,
		// @see https://developers.google.com/chrome/mobile/docs/user-agent?hl=pl
		// @see http://viewportsizes.com/
		devices = {
			// pretend we&#x27;re iPhone
			phone: {
				viewport: &#x27;320x568&#x27;,
				&#x27;user-agent&#x27;: &#x27;Mozilla/5.0 (iPhone; CPU iPhone OS 9_0_2 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0
Mobile/13A452 Safari/601.1&#x27;
			},
			// pretend we&#x27;re iPad
			tablet: {
				viewport: &#x27;768x1024&#x27;,
				&#x27;user-agent&#x27;: &#x27;Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B5110e
 Safari/601.1&#x27;
			}
		},
		availableDevices = Object.keys(devices);

	// check if --phone or --tablet option was passed
	availableDevices.forEach(function(item) {
		if (phantomas.getParam(item) === true) {
			device = item;
			return false;
		}
	});

	// no profile selected, add a hint to the logs
	if (typeof device === &#x27;undefined&#x27;) {
		phantomas.log(&#x27;Devices: no profile selected (available: %s)&#x27;, availableDevices.join(&#x27;, &#x27;));
		return;
	}

	// apply the profile
	phantomas.log(&#x27;Devices: using &#x22;%s&#x22; profile&#x27;, device);

	Object.keys(devices[device]).forEach(function(key) {
		phantomas.setParam(key, devices[device][key]);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.documentHeight" id="apidoc.module.phantomas.documentHeight">module phantomas.documentHeight</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.documentHeight.module" id="apidoc.element.phantomas.documentHeight.module">
        function <span class="apidocSignatureSpan">phantomas.documentHeight.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;documentHeight&#x27;); // @desc the page height [px]

	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.setMetricEvaluate(&#x27;documentHeight&#x27;, function() {
			// @see https://github.com/HTTPArchive/httparchive/blob/master/custom_metrics/document_height.js
			var doc = document,
				body = doc.body,
				docelem = doc.documentElement;

			return Math.max(body.scrollHeight, body.offsetHeight, docelem.clientHeight, docelem.scrollHeight, docelem.offsetHeight);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domComplexity" id="apidoc.module.phantomas.domComplexity">module phantomas.domComplexity</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domComplexity.module" id="apidoc.element.phantomas.domComplexity.module">
        function <span class="apidocSignatureSpan">phantomas.domComplexity.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	// total length of HTML comments (including &#x3c;!-- --&#x3e; brackets)
	phantomas.setMetric(&#x27;commentsSize&#x27;); // @desc the size of HTML comments on the page @offenders

	// total length of text nodes with whitespaces only (i.e. pretty formatting of HTML)
	phantomas.setMetric(&#x27;whiteSpacesSize&#x27;); // @desc the size of text nodes with whitespaces only

	// count all tags
	phantomas.setMetric(&#x27;DOMelementsCount&#x27;); // @desc total number of HTML element nodes
	phantomas.setMetric(&#x27;DOMelementMaxDepth&#x27;); // @desc maximum level on nesting of HTML element node

	// nodes with inlines CSS (style attribute)
	phantomas.setMetric(&#x27;nodesWithInlineCSS&#x27;); // @desc number of nodes with inline CSS styling (with style attribute) @offenders

	// images
	// TODO: move to a separate module
	phantomas.setMetric(&#x27;imagesScaledDown&#x27;); // @desc number of &#x3c;img&#x3e; nodes that have images scaled down in HTML @offenders
	phantomas.setMetric(&#x27;imagesWithoutDimensions&#x27;); // @desc number of &#x3c;img&#x3e; nodes without both width and height attribute @offenders

	// keep the track of SVG graphics (#479)
	var svgResources = [];
	phantomas.on(&#x27;recv&#x27;, function(entry) {
		if (entry.isSVG) {
			svgResources.push(entry.url);
			phantomas.log(&#x27;imagesScaledDown: will ignore &#x3c;%s&#x3e; [%s]&#x27;, entry.url, entry.contentType);
		}
	});

	// duplicated ID (issue #392)
	phantomas.setMetric(&#x27;DOMidDuplicated&#x27;); // @desc number of duplicated IDs found in DOM

	var Collection = require(&#x27;../../lib/collection&#x27;),
		DOMids = new Collection();

	phantomas.on(&#x27;domId&#x27;, function(id) {
		DOMids.push(id);
	});

	// HTML size
	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.setMetricEvaluate(&#x27;bodyHTMLSize&#x27;, function() { // @desc the size of body tag content (document.body.innerHTML.length
)
			return document.body &#x26;&#x26; document.body.innerHTML.length || 0;
		});

		var scope = {
			svgResources: svgResources
		};

		phantomas.evaluate(function(scope) {
			(function(phantomas) {
				var runner = new phantomas.nodeRunner(),
					whitespacesRegExp = /^\s+$/,
					DOMelementMaxDepth = 0,
					DOMelementMaxDepthNodes = [], // stores offenders for DOMelementMaxDepth (issue #414)
					size = 0;

				runner.walk(document.body, function(node, depth) {
					var path = &#x27;&#x27;;

					switch (node.nodeType) {
						case Node.COMMENT_NODE:
							size = node.textContent.length + 7; // &#x27;&#x3c;!--&#x27; + &#x27;--&#x3e;&#x27;.length
							phantomas.incrMetric(&#x27;commentsSize&#x27;, size);

							// log HTML comments bigger than 64 characters
							if (size &#x3e; 64) {
								phantomas.addOffender(&#x27;commentsSize&#x27;, &#x27;%s (%d characters)&#x27;, phantomas.getDOMPath(node), size);
							}
							break;

						case Node.ELEMENT_NODE:
							path = phantomas.getDOMPath(node);

							phantomas.incrMetric(&#x27;DOMelementsCount&#x27;);

							if (depth &#x3e; DOMelementMaxDepth) {
								DOMelementMaxDepth = depth;
								DOMelementMaxDepthNodes = [path];
							} else if (depth === DOMelementMaxDepth) {
								DOMelementMaxDepthNodes.push(path);
							}

							// report duplicated ID (issue #392)
							if (typeof node.id === &#x27;string&#x27; &#x26;&#x26; node.id !== &#x27;&#x27;) {
								phantomas.emit(&#x27;domId&#x27;, node.id);
							}

							// ignore inline &#x3c;script&#x3e; tags
							if (node.nodeName === &#x27;SCRIPT&#x27;) {
								return false;
							}

							// images
							if (node.nodeName === &#x27;IMG&#x27;) {
								var imgWidth = node.hasAttribute(&#x27;width&#x27;) ? node.getAttribute(&#x27;width&#x27;) : false,
									imgHeight = node.hasAttribute(&#x27;height&#x27;) ? node.getAttribute(&#x27;height&#x27;) : false,
									nodeStyle;

								// get dimensions from inline CSS (issue #399)
								if (imgWidth === false || imgHeight === false) {
									nodeStyle = node.style;

									imgWidth = parseInt(node.style.width, 10) || false;
									imgHeight = parseInt(node.style.height, 10) || false;
								}

								if (imgWidth === false || imgHeight === false) {
									phantomas.incrMetric(&#x27;imagesWithoutDimensions&#x27;);
									phantomas.addOffender(&#x27;imagesWithoutDimensions&#x27;, &#x27;%s &#x3c;%s&#x3e;&#x27;, path, node.src);
								}

								if (node.naturalHeight &#x26;&#x26; node.naturalWidth &#x26;&#x26; imgHeight &#x26;&#x26; imgWidth) {
									if (node.naturalHeight &#x3e; imgHeigh ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domHiddenContent" id="apidoc.module.phantomas.domHiddenContent">module phantomas.domHiddenContent</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domHiddenContent.module" id="apidoc.element.phantomas.domHiddenContent.module">
        function <span class="apidocSignatureSpan">phantomas.domHiddenContent.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	// total length of HTML of hidden elements (i.e. display: none)
	phantomas.setMetric(&#x27;hiddenContentSize&#x27;); // @desc the size of content of hidden elements on the page (with CSS display: none) @
offenders
	phantomas.setMetric(&#x27;hiddenImages&#x27;); // @desc number of hidden images that can be lazy-loaded @offenders

	// HTML size
	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				var runner = new phantomas.nodeRunner(),
					lazyLoadableImages = {};

				phantomas.spyEnabled(false, &#x27;analyzing hidden content&#x27;);

				runner.walk(document.body, function(node, depth) {
					switch (node.nodeType) {
						case Node.ELEMENT_NODE:
							// @see https://developer.mozilla.org/en/DOM%3awindow.getComputedStyle
							var styles = window.getComputedStyle(node);

							if (styles &#x26;&#x26; styles.getPropertyValue(&#x27;display&#x27;) === &#x27;none&#x27;) {
								if (typeof node.innerHTML === &#x27;string&#x27;) {
									var size = node.innerHTML.length;
									phantomas.incrMetric(&#x27;hiddenContentSize&#x27;, size);

									// log hidden containers bigger than 1 kB
									if (size &#x3e; 1024) {
										phantomas.addOffender(&#x27;hiddenContentSize&#x27;, phantomas.getDOMPath(node) + &#x27; (&#x27; + size + &#x27; characters)&#x27;);
									}
								}

								// count hidden images that can be lazy loaded (issue #524)
								var images = [];
								if (node.tagName === &#x27;IMG&#x27;) {
									images = [node];
								} else if (typeof node.querySelectorAll === &#x27;function&#x27;) {
									images = node.querySelectorAll(&#x27;img&#x27;) || [];
								}

								for (var i = 0, len = images.length; i &#x3c; len; i++) {
									var src = images[i].src,
										path;

									if (src === &#x27;&#x27; || src.indexOf(&#x27;data:image&#x27;) === 0) continue;

									if (!lazyLoadableImages[src]) {
										path = phantomas.getDOMPath(images[i]);

										lazyLoadableImages[src] = {
											path: path
										};
									}
								}

								// don&#x27;t run for child nodes as they&#x27;re hidden as well
								return false;
							}
							break;
					}
				});

				Object.keys(lazyLoadableImages).forEach(function(img) {
					var entry = lazyLoadableImages[img];

					phantomas.incrMetric(&#x27;hiddenImages&#x27;);
					phantomas.addOffender(&#x27;hiddenImages&#x27;, img);

					phantomas.log(&#x27;hiddenImages: &#x3c;%s&#x3e; image (%s) is hidden and can be lazy-loaded&#x27;, img, entry.path);
				});

				phantomas.spyEnabled(true);
			}(window.__phantomas));
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domMutations" id="apidoc.module.phantomas.domMutations">module phantomas.domMutations</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domMutations.module" id="apidoc.element.phantomas.domMutations.module">
        function <span class="apidocSignatureSpan">phantomas.domMutations.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// SlimerJS only metrics
	phantomas.setMetric(&#x27;DOMmutationsInserts&#x27;); // @desc number of &#x3c;body&#x3e; node inserts
	phantomas.setMetric(&#x27;DOMmutationsRemoves&#x27;); // @desc number of &#x3c;body&#x3e; node removes
	phantomas.setMetric(&#x27;DOMmutationsAttributes&#x27;); // @desc number of DOM nodes attributes changes

	phantomas.on(&#x27;init&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				if (&#x27;MutationObserver&#x27; in window) {
					// wait for DOM ready
					document.addEventListener(&#x27;readystatechange&#x27;, function() {
						if (document.readyState !== &#x27;interactive&#x27;) {
							return;
						}

						phantomas.log(&#x27;DOM query: setting up MutationObserver...&#x27;);

						var observer = new MutationObserver(function(allmutations) {
							allmutations.map(function(mutation) {
								// @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver#MutationRecord
								var targetPath = phantomas.getDOMPath(mutation.target, true /* dontGoUpTheDom */ );

								switch (mutation.type) {
									case &#x27;attributes&#x27;:
										phantomas.log(&#x27;DOM mutation: &#x22;%s&#x22; attr (was &#x22;%s&#x22;) set on %s&#x27;,
											mutation.attributeName,
											mutation.oldValue || &#x27;&#x27;,
											targetPath
										);

										phantomas.incrMetric(&#x27;DOMmutationsAttributes&#x27;);
										phantomas.addOffender(&#x27;DOMmutationsAttributes&#x27;, &#x27;&#x22;%s&#x22; attr set on %s&#x27;, mutation.attributeName, targetPath);
										break;

									case &#x27;childList&#x27;:
										var wereAdded = (mutation.addedNodes.length &#x3e; 0),
											nodes = wereAdded ? mutation.addedNodes : mutation.removedNodes,
											nodePath;

										for (var n = 0, nodesLen = nodes.length; n &#x3c; nodesLen; n++) {
											nodePath = phantomas.getDOMPath(nodes[n], true /* dontGoUpTheDom */ );

											phantomas.log(&#x27;DOM mutation: node &#x22;%s&#x22; %s &#x22;%s&#x22;&#x27;,
												nodePath,
												wereAdded ? &#x27;added to&#x27; : &#x27;removed from&#x27;,
												targetPath
											);

											if (wereAdded) {
												phantomas.incrMetric(&#x27;DOMmutationsInserts&#x27;);
												phantomas.addOffender(&#x27;DOMmutationsInserts&#x27;, &#x27;&#x22;%s&#x22; added to &#x22;%s&#x22;&#x27;, nodePath, targetPath);
											} else {
												phantomas.incrMetric(&#x27;DOMmutationsRemoves&#x27;);
												phantomas.addOffender(&#x27;DOMmutationsRemoves&#x27;, &#x27;&#x22;%s&#x22; removed from &#x22;%s&#x22;&#x27;, nodePath, targetPath);
											}
										}
										break;

									default:
										phantomas.log(&#x27;DOM mutation: %s&#x27;, mutation.type);
								}
							});
						});

						observer.observe(document.body, {
							childList: true,
							attributes: true,
							characterData: true,
							subtree: true,
							attributeOldValue: true
						});
					});
				} else {
					phantomas.log(&#x27;DOM query: MutationObserver not available!&#x27;);
				}
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domQueries" id="apidoc.module.phantomas.domQueries">module phantomas.domQueries</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domQueries.module" id="apidoc.element.phantomas.domQueries.module">
        function <span class="apidocSignatureSpan">phantomas.domQueries.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;DOMqueries&#x27;); // @desc number of all DOM queries @offenders
	phantomas.setMetric(&#x27;DOMqueriesWithoutResults&#x27;); // @desc number of DOM queries that returned nothing @offenders
	phantomas.setMetric(&#x27;DOMqueriesById&#x27;); // @desc number of document.getElementById calls
	phantomas.setMetric(&#x27;DOMqueriesByClassName&#x27;); // @desc number of document.getElementsByClassName calls
	phantomas.setMetric(&#x27;DOMqueriesByTagName&#x27;); // @desc number of document.getElementsByTagName calls
	phantomas.setMetric(&#x27;DOMqueriesByQuerySelectorAll&#x27;); // @desc number of document.querySelector(All) calls
	phantomas.setMetric(&#x27;DOMinserts&#x27;); // @desc number of DOM nodes inserts
	phantomas.setMetric(&#x27;DOMqueriesDuplicated&#x27;); // @desc number of DOM queries called more than once
	phantomas.setMetric(&#x27;DOMqueriesAvoidable&#x27;); // @desc number of repeated uses of a duplicated query

	// fake native DOM functions
	phantomas.on(&#x27;init&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				function querySpy(type, query, fnName, context, hasNoResults) {
					phantomas.emit(&#x27;domQuery&#x27;, type, query, fnName, context, hasNoResults); // @desc DOM query has been made
				}

				phantomas.spy(Document.prototype, &#x27;getElementById&#x27;, function(results, id) {
					phantomas.incrMetric(&#x27;DOMqueriesById&#x27;);
					phantomas.addOffender(&#x27;DOMqueriesById&#x27;, &#x27;#%s (in %s)&#x27;, id, &#x27;#document&#x27;);
					querySpy(&#x27;id&#x27;, &#x27;#&#x27; + id, &#x27;getElementById&#x27;, &#x27;#document&#x27;, (results === null));
				}, true);

				// selectors by class name
				function selectorClassNameSpy(results, className) {
					<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>					var context = phantomas.getDOMPath(this);

					phantomas.incrMetric(&#x27;DOMqueriesByClassName&#x27;);
					phantomas.addOffender(&#x27;DOMqueriesByClassName&#x27;, &#x27;.%s (in %s)&#x27;, className, context);
					querySpy(&#x27;class&#x27;, &#x27;.&#x27; + className, &#x27;getElementsByClassName&#x27;, context, (results.length === 0));
				}

				phantomas.spy(Document.prototype, &#x27;getElementsByClassName&#x27;, selectorClassNameSpy, true);
				phantomas.spy(Element.prototype, &#x27;getElementsByClassName&#x27;, selectorClassNameSpy, true);

				// selectors by tag name
				function selectorTagNameSpy(results, tagName) {
					/* jshint validthis: true */
					var context = phantomas.getDOMPath(this);

					// querying by BODY and body is the same (issue #419)
					tagName = tagName.toLowerCase();

					phantomas.incrMetric(&#x27;DOMqueriesByTagName&#x27;);
					phantomas.addOffender(&#x27;DOMqueriesByTagName&#x27;, &#x27;%s (in %s)&#x27;, tagName, context);
					querySpy(&#x27;tag name&#x27;, tagName, &#x27;getElementsByTagName&#x27;, context, (results.length === 0));
				}

				phantomas.spy(Document.prototype, &#x27;getElementsByTagName&#x27;, selectorTagNameSpy, true);
				phantomas.spy(Element.prototype, &#x27;getElementsByTagName&#x27;, selectorTagNameSpy, true);

				// selector queries
				function selectorQuerySpy(results, selector) {
					/* jshint validthis: true */
					var context = phantomas.getDOMPath(this);

					phantomas.incrMetric(&#x27;DOMqueriesByQuerySelectorAll&#x27;);
					phantomas.addOffender(&#x27;DOMqueriesByQuerySelectorAll&#x27;, &#x27;%s (in %s)&#x27;, selector, context);
					querySpy(&#x27;selector&#x27;, selector, &#x27;querySelectorAll&#x27;, context, (results === null || results.length === 0));
				}

				phantomas.spy(Document.prototype, &#x27;querySelector&#x27;, selectorQuerySpy, true);
				phantomas.spy(Document.prototype, &#x27;querySelectorAll&#x27;, selectorQuerySpy, true);
				phantomas.spy(Element.prototype, &#x27;querySelector&#x27;, selectorQuerySpy, true);
				phantomas.spy(Element.prototype, &#x27;querySelectorAll&#x27;, selectorQuerySpy, true);

				// count DOM inserts
				function appendSpy(child) {
					/* jshint validthis: true */
					// ignore appending to the node that&#x27;s not yet added to DOM tree
					if (!this.parentNode) {
						return;
					}

					var destNodePath = phantomas.getDOMPath(this),
						appendedNodePath = phantomas.getDOMPath(child);

					// skip undefined nodes (issue #560)
					if (destNodePath === false) {
						return;
					}

					// don&#x27;t count elements added to fragments as a DOM inserts (issue #350)
					// DocumentFragment &#x3e; div[0]
					if (destNodePath.indexOf(&#x27;Documen ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.domains" id="apidoc.module.phantomas.domains">module phantomas.domains</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.domains.module" id="apidoc.element.phantomas.domains.module">
        function <span class="apidocSignatureSpan">phantomas.domains.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var Collection = require(&#x27;../../lib/collection&#x27;),
		domains = new Collection();

	phantomas.setMetric(&#x27;domains&#x27;); // @desc number of domains used to fetch the page @offenders
	phantomas.setMetric(&#x27;maxRequestsPerDomain&#x27;); // @desc maximum number of requests fetched from a single domain
	phantomas.setMetric(&#x27;medianRequestsPerDomain&#x27;); // @desc median of number of requests fetched from each domain

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var domain = entry.domain;

		if (domain) {
			domains.push(domain);
		}
	});

	// add metrics
	phantomas.on(&#x27;report&#x27;, function() {
		var domainsRequests = new Stats();

		domains.sort().forEach(function(name, cnt) {
			phantomas.addOffender(&#x27;domains&#x27;, &#x27;%s: %d request(s)&#x27;, name, cnt);

			domainsRequests.push(cnt);
		});

		if (domains.getLength() &#x3e; 0) {
			phantomas.setMetric(&#x27;domains&#x27;, domains.getLength());
			phantomas.setMetric(&#x27;maxRequestsPerDomain&#x27;, domainsRequests.range()[1]);
			phantomas.setMetric(&#x27;medianRequestsPerDomain&#x27;, domainsRequests.median());
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.engines" id="apidoc.module.phantomas.engines">module phantomas.engines</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.engines.engines" id="apidoc.element.phantomas.engines.engines">
        function <span class="apidocSignatureSpan">phantomas.</span>engines
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function engines(options) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.options = options;

	//--debug can be either &#x27;true&#x27; or &#x27;false&#x27;
	this.options.debug = (this.options.debug === true) ? &#x27;true&#x27; : &#x27;false&#x27;;

	// engines storage
	this.engines = {};
	[
		// the first one is a default one
		&#x27;webkit&#x27;,
		&#x27;gecko&#x27;
	].forEach(this.registerEngine, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.engines.prototype" id="apidoc.module.phantomas.engines.prototype">module phantomas.engines.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.getEngine" id="apidoc.element.phantomas.engines.prototype.getEngine">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngine
        <span class="apidocSignatureSpan">(engine)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEngine = function (engine) {
	return this.engines[engine];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
engines.prototype.getEngine = function(engine) {
	return this.engines[engine];
};

engines.prototype.run = function(scriptFile) {
	// select the engine
	var engines = this.getEngines(),
		engine = this.<span class="apidocCodeKeywordSpan">getEngine</span>(engines[0]);

	// --engine=[gecko|webkit]
	if (typeof this.options.engine === &#x27;string&#x27;) {
		engine = this.getEngine(this.options.engine);

		if (typeof engine === &#x27;undefined&#x27;) {
			throw &#x27;Engine &#x22;&#x27; + this.options.engine + &#x27;&#x22; not found!&#x27;;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.getEngines" id="apidoc.element.phantomas.engines.prototype.getEngines">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>getEngines
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getEngines = function () {
	return Object.keys(this.engines);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

engines.prototype.getEngine = function(engine) {
	return this.engines[engine];
};

engines.prototype.run = function(scriptFile) {
	// select the engine
	var engines = this.<span class="apidocCodeKeywordSpan">getEngines</span>(),
		engine = this.getEngine(engines[0]);

	// --engine=[gecko|webkit]
	if (typeof this.options.engine === &#x27;string&#x27;) {
		engine = this.getEngine(this.options.engine);

		if (typeof engine === &#x27;undefined&#x27;) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.registerEngine" id="apidoc.element.phantomas.engines.prototype.registerEngine">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>registerEngine
        <span class="apidocSignatureSpan">(engineName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerEngine = function (engineName) {
	var def;

	try {
		def = require(&#x27;./engines/&#x27; + engineName);
		this.engines[engineName] = def;

		debug(&#x27;Engine &#x22;%s&#x22;: %s v%s installed in %s&#x27;, engineName, def.name, def.version, def.path);
	} catch (ex) {
		debug(&#x27;Engine &#x22;%s&#x22;: failed to import - %s&#x27;, engineName, ex);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.engines.prototype.run" id="apidoc.element.phantomas.engines.prototype.run">
        function <span class="apidocSignatureSpan">phantomas.engines.prototype.</span>run
        <span class="apidocSignatureSpan">(scriptFile)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function (scriptFile) {
	// select the engine
	var engines = this.getEngines(),
		engine = this.getEngine(engines[0]);

	// --engine=[gecko|webkit]
	if (typeof this.options.engine === &#x27;string&#x27;) {
		engine = this.getEngine(this.options.engine);

		if (typeof engine === &#x27;undefined&#x27;) {
			throw &#x27;Engine &#x22;&#x27; + this.options.engine + &#x27;&#x22; not found!&#x27;;
		}
	}
	// PHANTOMAS_ENGINE=gecko phantomas &#x22;http://example.com&#x22;
	else if (typeof process.env.PHANTOMAS_ENGINE === &#x27;string&#x27;) {
		engine = this.getEngine(process.env.PHANTOMAS_ENGINE);

		if (typeof engine === &#x27;undefined&#x27;) {
			throw &#x27;Engine &#x22;&#x27; + process.env.PHANTOMAS_ENGINE + &#x27;&#x22; not found!&#x27;;
		}
	}
	// --gecko / --webkit
	else {
		engines.forEach(function(key) {
			if (this.options[key] === true) {
				engine = this.getEngine(key);
			}
		}, this);
	}

	// customize user agent
	if (typeof this.options[&#x27;user-agent&#x27;] === &#x27;undefined&#x27;) {
		this.options[&#x27;user-agent&#x27;] = &#x22;phantomas/&#x22; + VERSION + &#x22; (&#x22; + engine.getUserAgent() + &#x22;; &#x22; + process.platform + &#x22; &#x22; + process.arch
 + &#x22;)&#x22;;
	}

	// build engine specific command-line arguments
	var engineArgs = [];

	Object.keys(this.options).forEach(function(key) {
		var val = this.options[key],
			nativeOptions = [
				&#x27;cookies-file&#x27;,
				&#x27;debug&#x27;,
				&#x27;ignore-ssl-errors&#x27;,
				&#x27;ssl-protocol&#x27;,
				&#x27;proxy&#x27;,
				&#x27;proxy-auth&#x27;,
				&#x27;proxy-type&#x27;
			];

		if (val === false) {
			return;
		}

		// handle native PhantomJS options (#163)
		// @see http://phantomjs.org/api/command-line.html
		if (nativeOptions.indexOf(key) &#x3e; -1) {
			engineArgs.push(&#x27;--&#x27; + key + &#x27;=&#x27; + val);
		}
	}, this);

	debug(&#x27;Running %s (using %s)&#x27;, scriptFile, engine.name);
	debug(&#x27;Passing phantomas options: %j&#x27;, this.options);
	debug(&#x27;Passing engine options: %j&#x27;, engineArgs);

	// add a script to run
	engineArgs.push(scriptFile);

	// pass JSON encoded options
	engineArgs.push(JSON.stringify(this.options));

	// spawn the process
	var proc;

	if (typeof engine.spawn === &#x27;function&#x27;) {
		debug(&#x27;Using custom spawn function&#x27;);
		proc = engine.spawn(engine.path, engineArgs);
	} else {
		proc = spawn(engine.path, engineArgs, {
			env: process.env
		});
	}

	return proc;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.events" id="apidoc.module.phantomas.events">module phantomas.events</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.events.EventEmitter" id="apidoc.element.phantomas.events.EventEmitter">
        function <span class="apidocSignatureSpan">phantomas.events.</span>EventEmitter
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() { }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.fast_stats" id="apidoc.module.phantomas.fast_stats">module phantomas.fast_stats</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.fast_stats.Stats" id="apidoc.element.phantomas.fast_stats.Stats">
        function <span class="apidocSignatureSpan">phantomas.fast_stats.</span>Stats
        <span class="apidocSignatureSpan">(c)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stats(c) {
	this._config = {
		store_data: true
	};

	if (c) {
		for (var k in config_params) {
			if (c.hasOwnProperty(k)) {
				config_params[k](this, c[k]);
			}
		}
	}

	this.reset();

	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.filmStrip" id="apidoc.module.phantomas.filmStrip">module phantomas.filmStrip</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.filmStrip.module" id="apidoc.element.phantomas.filmStrip.module">
        function <span class="apidocSignatureSpan">phantomas.filmStrip.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	if (!phantomas.getParam(&#x27;film-strip&#x27;)) {
		phantomas.log(&#x27;filmStrip: to enable screenshots of page being loaded run phantomas with --film-strip option&#x27;);
		return;
	}

	var filmStripOutputDir = phantomas.getParam(&#x27;film-strip-dir&#x27;, &#x27;filmstrip&#x27;, &#x27;string&#x27;).replace(/\/+$/, &#x27;&#x27;),
		filmStripPrefix = phantomas.getParam(&#x27;film-strip-prefix&#x27;, &#x27;screenshot&#x27;, &#x27;string&#x27;).replace(/[^a-z0-9\-]+/ig, &#x27;-&#x27;);

	var zoomFactor = 0.5;
	phantomas.setZoom(zoomFactor);

	phantomas.log(&#x27;filmStrip: film strip will be stored as %s/%s-*.png files (zoom: %d)&#x27;, filmStripOutputDir, filmStripPrefix, zoomFactor
);

	var util = phantomas.require(&#x27;util&#x27;),
		fs = require(&#x27;fs&#x27;),
		// throttling
		SCREENSHOTS_MIN_INTERVAL = 75,
		lastScreenshot = 0,
		start = Date.now(),
		startFormatted = (new Date()).toJSON().substr(0, 19).replace(/:/g, &#x27;-&#x27;), // be M$ Windows compatible (issue #498) (2014-05-18T13
:08:13 converts to 2014-05-18T13-08-13)
		// stats
		timeTotal = 0,
		screenshots = [];

	function screenshot(ts /* force timestamp in file name */ ) {
		var now = Date.now(),
			path;

		// check when was the last screenshot taken (exclude time it took to render the screenshot)
		if (now - lastScreenshot &#x3c; SCREENSHOTS_MIN_INTERVAL) {
			//phantomas.log(&#x27;Film strip: skipped&#x27;);
			return;
		}

		// time offset excluding time it took to render screenshots
		ts = ts || (now - start - timeTotal);
		path = util.format(&#x27;%s/%s-%s-%d.png&#x27;, filmStripOutputDir, filmStripPrefix, startFormatted, ts);

		phantomas.render(path);
		lastScreenshot = Date.now();

		// verify that the screnshot was really taken
		if (fs.isReadable(path)) {
			phantomas.log(&#x27;Film strip: rendered to %s in %d ms&#x27;, path, Date.now() - now);
			phantomas.emit(&#x27;filmStrip&#x27;, path, ts);

			screenshots.push({
				path: path,
				ts: ts
			});

			// stats
			timeTotal += (Date.now() - now);
		} else {
			phantomas.log(&#x27;Film strip: rendering to %s failed!&#x27;, path);
		}
	}

	if (phantomas.getParam(&#x27;film-strip&#x27;, false, &#x27;string&#x27;)) {
		// a comma separated list of milliseconds was passed (issue #174)
		var timePoints = phantomas.getParam(&#x27;film-strip&#x27;).split(&#x27;,&#x27;);
		phantomas.log(&#x27;Film strip: screenshots will be taken at: %s ms&#x27;, timePoints.join(&#x27;, &#x27;));

		phantomas.on(&#x27;responseEnd&#x27;, function() {
			timePoints.forEach(function(point) {
				setTimeout(function() {
					phantomas.log(&#x27;Film strip: rendering for %d ms&#x27;, point);
					screenshot(point);
				}, point);
			});
		});
	} else {
		// bind to events to render screenshots on
		[
			&#x27;loadStarted&#x27;,
			&#x27;send&#x27;,
			&#x27;recv&#x27;,
			&#x27;loadFinished&#x27;,
			&#x27;report&#x27;,
		].forEach(function(ev) {
			phantomas.on(ev, function() {
				screenshot();
			});
		});
	}

	// print-out stats
	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.log(&#x27;Film strip: spent %d ms on rendering %d screenshots&#x27;, timeTotal, screenshots.length);

		// TODO: generate a movie
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.gecko" id="apidoc.module.phantomas.gecko">module phantomas.gecko</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.gecko.getUserAgent" id="apidoc.element.phantomas.gecko.getUserAgent">
        function <span class="apidocSignatureSpan">phantomas.gecko.</span>getUserAgent
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserAgent = function () {
		return &#x27;SlimerJS/&#x27; + pkg.version
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				engine = this.getEngine(key);
			}
		}, this);
	}

	// customize user agent
	if (typeof this.options[&#x27;user-agent&#x27;] === &#x27;undefined&#x27;) {
		this.options[&#x27;user-agent&#x27;] = &#x22;phantomas/&#x22; + VERSION + &#x22; (&#x22; + engine.<span class="apidocCodeKeywordSpan
">getUserAgent</span>() + &#x22;; &#x22; + process.platform + &#x22; &#x22; + process.arch + &#x22;)&#x22;;
	}

	// build engine specific command-line arguments
	var engineArgs = [];

	Object.keys(this.options).forEach(function(key) {
		var val = this.options[key],
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.gecko.spawn" id="apidoc.element.phantomas.gecko.spawn">
        function <span class="apidocSignatureSpan">phantomas.gecko.</span>spawn
        <span class="apidocSignatureSpan">(path, engineArgs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">spawn = function (path, engineArgs) {
		// xvfb arguments
		var args = [
			&#x27;--auto-servernum&#x27;,
			&#x27;--server-num=1&#x27;,
			//&#x27;--server-args=\&#x27;:1 -noreset -screen 1 1600x1200x24\&#x27;&#x27;
		];

		// SlimerJS binary
		args.push(path);

		// filter out --ssl-protocol option
		// supoorted by PhantomJS, but not by SlimerJS
		engineArgs = engineArgs.filter(function(opt) {
			return (opt.indexOf(&#x27;--ssl-protocol=&#x27;) === 0) ? false /* remove */ : true;
		});

		// pass runner and phantomas options
		args = args.concat(engineArgs);

		debug(&#x27;xvfb-run %s&#x27;, args.join(&#x27; &#x27;));

		// spawn SlimerJS using xvfb
		//
		// sudo aptitude install xvfb libasound2 libgtk2.0-0
		//
		// @see https://gist.github.com/macbre/e7e2e35caf9d91af5ecf
		return spawn(&#x27;xvfb-run&#x27;, args, {
			env: process.env
		});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	engineArgs.push(JSON.stringify(this.options));

	// spawn the process
	var proc;

	if (typeof engine.spawn === &#x27;function&#x27;) {
		debug(&#x27;Using custom spawn function&#x27;);
		proc = engine.<span class="apidocCodeKeywordSpan">spawn</span>(engine.path, engineArgs);
	} else {
		proc = spawn(engine.path, engineArgs, {
			env: process.env
		});
	}

	return proc;
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.globalVariables" id="apidoc.module.phantomas.globalVariables">module phantomas.globalVariables</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.globalVariables.module" id="apidoc.element.phantomas.globalVariables.module">
        function <span class="apidocSignatureSpan">phantomas.globalVariables.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;globalVariables&#x27;); // @desc number of JS globals variables @offenders
	phantomas.setMetric(&#x27;globalVariablesFalsy&#x27;); // @desc number of JS globals variables with falsy value @offenders

	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				var globals = [],
					allowed = [&#x27;Components&#x27;, &#x27;XPCNativeWrapper&#x27;, &#x27;XPCSafeJSObjectWrapper&#x27;, &#x27;getInterface&#x27;, &#x27;netscape&#x27;, &#x27;GetWeakReference&#x27;, &#x27;_phantom
&#x27;, &#x27;callPhantom&#x27;, &#x27;__phantomas&#x27;, &#x27;performance&#x27;],
					varName,
					iframe,
					cleanWindow;

				if (!document.body) {
					return false;
				}

				phantomas.spyEnabled(false, &#x27;counting global variables (injecting an empty iframe)&#x27;);

				// create an empty iframe to get the list of core members
				iframe = document.createElement(&#x27;iframe&#x27;);
				iframe.style.display = &#x27;none&#x27;;
				iframe.src = &#x27;about:blank&#x27;;
				document.body.appendChild(iframe);

				cleanWindow = iframe.contentWindow;

				for (varName in cleanWindow) {
					allowed.push(varName);
				}

				// get all members of window and filter them
				for (varName in window) {
					try {
						if ((allowed.indexOf(varName) &#x3e; -1) || (typeof window[varName] === &#x27;undefined&#x27;) /* ignore variables exposed by window.__defineGetter__
 */ ) {
							continue;
						}

						// filter out 0, 1, 2, ...
						if (/^\d+$/.test(varName)) {
							continue;
						}

						phantomas.incrMetric(&#x27;globalVariables&#x27;);
						phantomas.addOffender(&#x27;globalVariables&#x27;, varName);

						if ([false, null].indexOf(window[varName]) &#x3e; -1) {
							phantomas.incrMetric(&#x27;globalVariablesFalsy&#x27;);
							phantomas.addOffender(&#x27;globalVariablesFalsy&#x27;, &#x27;%s = %j&#x27;, varName, window[varName]);
						}
					} catch (ex) {
						// handle errors (issue #560)
						phantomas.log(&#x27;globalVariables: error when checking %s - %s!&#x27;, varName, ex.message);
					}
				}

				// cleanup (issue #297)
				document.body.removeChild(iframe);

				phantomas.spyEnabled(true);
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.har" id="apidoc.module.phantomas.har">module phantomas.har</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.har.module" id="apidoc.element.phantomas.har.module">
        function <span class="apidocSignatureSpan">phantomas.har.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {

	var param = phantomas.getParam(&#x27;har&#x27;),
		path = &#x27;&#x27;,
		timeToLastByte = undefined;

	var page = {
		origin: undefined,
		resources: [],
		title: undefined,
		address: undefined,
		startTime: undefined,
		endTime: undefined,
		onDOMReadyTime: undefined,
		windowOnLoadTime: undefined,
		timeToLastByte: undefined,
		onLoad: undefined,
		onContentLoad: undefined
	};

	var creator = {
		name: &#x22;Phantomas - (using phantomHAR)&#x22;,
		version: phantomas.getVersion()
	};

	if (typeof param === &#x27;undefined&#x27;) {
		phantomas.log(&#x27;HAR: no path specified, use --har &#x3c;path&#x3e;&#x27;);
		return;
	}

	// --har
	if (param === true) {
		// defaults to &#x22;2013-12-07T20:15:01.521Z.har&#x22;
		path = (new Date()).toJSON() + &#x27;.har&#x27;;
	}
	// --har [file name]
	else {
		path = param;
	}

	phantomas.log(&#x27;HAR: will be stored in %s&#x27;, path);

	phantomas.on(&#x27;pageBeforeOpen&#x27;, function(p) {
		page.origin = p;
	});

	phantomas.on(&#x27;pageOpen&#x27;, function() {
		page.startTime = new Date();
	});

	phantomas.on(&#x27;loadFinished&#x27;, function() {
		page.endTime = new Date();
	});

	phantomas.on(&#x27;send&#x27;, function(entry, res) {
		page.resources[res.id] = {
			request: res,
			response: null,
			entry: null
		};
	});

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		page.resources[res.id].response = res;
		page.resources[res.id].entry = entry;
		timeToLastByte = entry.timeToLastByte;
	});

	phantomas.on(&#x27;metric&#x27;, function(name, value) {
		switch (name) {
			case &#x27;domContentLoaded&#x27;:
				page.onDOMReadyTime = value;
				break;
			case &#x27;domComplete&#x27;:
				page.windowOnLoadTime = value;
				break;
			case &#x27;timeToLastByte&#x27;:
				page.timeToLastByte = value;
				break;
		}
	});

	phantomas.on(&#x27;report&#x27;, function() {
		// Set endTime if page was not finished correctly
		if (!page.endTime)
			page.endTime = new Date();

		// If metric &#x27;windowOnLoadTime&#x27; hasn&#x27;t been fired, compute it
		if (!page.windowOnLoadTime)
			page.windowOnLoadTime = page.endTime.getTime() - page.startTime.getTime();

		// If metric &#x27;timeToLastByte&#x27; hasn&#x27;t been fired, use last entry
		if (!page.timeToLastByte)
			page.timeToLastByte = timeToLastByte;

		page.address = page.origin.url;
		page.title = page.origin.title;

		// Times (windowOnLoadTime, onDOMReadyTime) are relative to responseEnd entry
		// in NavigationTiming (represented by timeToLastByte metric)
		page.onLoad = page.timeToLastByte + page.windowOnLoadTime;
		page.onContentLoad = page.timeToLastByte + page.onDOMReadyTime;

		phantomas.log(&#x27;HAR: generating for &#x3c;%s&#x3e; (&#x22;%s&#x22;)&#x27;, page.address, page.title);

		var har,
			dump;

		try {
			har = createHAR(page, creator);
		} catch (e) {
			phantomas.log(&#x27;HAR: failed to build - %s&#x27;, e);
			return;
		}

		try {
			dump = JSON.stringify(har);
		} catch (e) {
			phantomas.log(&#x27;HAR: failed to stringify HAR to JSON - %s!&#x27;, e);
			return;
		}

		phantomas.log(&#x22;HAR: saving to &#x27;%s&#x27;,,,&#x22;, path);
		try {
			fs.write(path, dump);
		} catch (e) {
			phantomas.log(&#x27;HAR: failed to save HAR - %s!&#x27;, e);
			return;
		}

		phantomas.log(&#x27;HAR: done&#x27;);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.headers" id="apidoc.module.phantomas.headers">module phantomas.headers</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.headers.module" id="apidoc.element.phantomas.headers.module">
        function <span class="apidocSignatureSpan">phantomas.headers.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;headersCount&#x27;); // @desc number of requests and responses headers
	phantomas.setMetric(&#x27;headersSentCount&#x27;); // @desc number of headers sent in requests
	phantomas.setMetric(&#x27;headersRecvCount&#x27;); // @desc number of headers received in responses

	phantomas.setMetric(&#x27;headersSize&#x27;); // @desc size of all headers
	phantomas.setMetric(&#x27;headersSentSize&#x27;); // @desc size of sent headers
	phantomas.setMetric(&#x27;headersRecvSize&#x27;); // @desc size of received headers

	phantomas.setMetric(&#x27;headersBiggerThanContent&#x27;); // @desc number of responses with headers part bigger than the response body

	function processHeaders(headers) {
		var res = {
			count: 0,
			size: 0
		};

		if (headers) {
			headers.forEach(function(header) {
				res.count++;
				res.size += (header.name + &#x27;: &#x27; + header.value + &#x27;\r\n&#x27;).length;
			});
		}

		return res;
	}

	phantomas.on(&#x27;send&#x27;, function(entry, res) {
		var headers = processHeaders(res.headers);

		phantomas.incrMetric(&#x27;headersCount&#x27;, headers.count);
		phantomas.incrMetric(&#x27;headersSize&#x27;, headers.size);

		phantomas.incrMetric(&#x27;headersSentCount&#x27;, headers.count);
		phantomas.incrMetric(&#x27;headersSentSize&#x27;, headers.size);
	});

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var headers = processHeaders(res.headers);

		phantomas.incrMetric(&#x27;headersCount&#x27;, headers.count);
		phantomas.incrMetric(&#x27;headersSize&#x27;, headers.size);

		phantomas.incrMetric(&#x27;headersRecvCount&#x27;, headers.count);
		phantomas.incrMetric(&#x27;headersRecvSize&#x27;, headers.size);

		// skip HTTP 204 No Content responses
		if ((entry.status !== 204) &#x26;&#x26; (headers.size &#x3e; entry.contentLength)) {
			phantomas.incrMetric(&#x27;headersBiggerThanContent&#x27;);
			phantomas.addOffender(&#x27;headersBiggerThanContent&#x27;, &#x27;%s (body: %s kB / headers: %s kB)&#x27;, entry.url, (entry.contentLength / 1024
).toFixed(2), (headers.size / 1024).toFixed(2));
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.httpAuth" id="apidoc.module.phantomas.httpAuth">module phantomas.httpAuth</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.httpAuth.module" id="apidoc.element.phantomas.httpAuth.module">
        function <span class="apidocSignatureSpan">phantomas.httpAuth.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var userName = phantomas.getParam(&#x27;auth-user&#x27;, &#x27;&#x27;, &#x27;string&#x27;),
		password = phantomas.getParam(&#x27;auth-pass&#x27;, &#x27;&#x27;, &#x27;string&#x27;);

	if (userName === &#x27;&#x27; || password === &#x27;&#x27;) {
		return;
	}

	phantomas.on(&#x27;pageBeforeOpen&#x27;, function(page) {
		phantomas.log(&#x27;Using HTTP auth: %s (pass: %s)&#x27;, userName, new Array(password.length + 1).join(&#x27;*&#x27;));

		page.settings.userName = userName;
		page.settings.password = password;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ipc" id="apidoc.module.phantomas.ipc">module phantomas.ipc</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ipc.ipc" id="apidoc.element.phantomas.ipc.ipc">
        function <span class="apidocSignatureSpan">phantomas.</span>ipc
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ipc(stream) {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	this.stream = stream;
	this.events = new emitter();

	this.init();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.ipc.prototype" id="apidoc.module.phantomas.ipc.prototype">module phantomas.ipc.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.init" id="apidoc.element.phantomas.ipc.prototype.init">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>init
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function () {
	var self = this,
		buffer = &#x27;&#x27;;

	this.stream.on(&#x27;data&#x27;, function(data) {
		buffer += data.toString().trim();

		// check for the separator at the of the buffer - parse the data
		if (buffer.substr(-2) === SEPARATOR) {
			self.parse(buffer);
			buffer = &#x27;&#x27;;
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	SEPARATOR = &#x22;\xFF\xFF&#x22;;

function ipc(stream) {
	/* jshint validthis: true */
	this.stream = stream;
	this.events = new emitter();

	this.<span class="apidocCodeKeywordSpan">init</span>();
}

ipc.prototype.setEventEmitter = function(emitter) {
	this.events = emitter;
};

ipc.prototype.init = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.on" id="apidoc.element.phantomas.ipc.prototype.on">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>on
        <span class="apidocSignatureSpan">(event, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (event, fn) {
	this.events.on(event, fn);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var child = phantomas(url, options, function(err, data, results) {
		callback(
			null, // pass null even in case of an error to continue async.series processing (issue #380)
			[err, results]
		);
	});

	child.<span class="apidocCodeKeywordSpan">on</span>(&#x27;progress&#x27;, function(progress, inc) {
		if (bar) {
			bar.tick(inc);
		}
	});

	// pipe --verbose messages to stderr
	child.stderr.pipe(process.stderr);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.parse" id="apidoc.element.phantomas.ipc.prototype.parse">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>parse
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (data) {
	// split by separator
	data.split(SEPARATOR).forEach(function(msg) {
		msg = msg.trim();

		if (msg === &#x27;&#x27;) return;

		try {
			msg = JSON.parse(msg);
			debug(&#x27;%s: %j&#x27;, msg.event, msg.data);

			// send event name and the rest of the data
			var args = msg.data;
			args.unshift(msg.event);

			this.events.emit.apply(this.events, args);

			// send generic &#x22;_msg&#x22; event for each message received (issue #354)
			this.events.emit(&#x27;_msg&#x27;, args);
		} catch (e) {
			// send PhantomJS errors to stderr to ease debugging of issues like #302
			debug(&#x27;message parsing failed: &#x22;%s&#x22;&#x27;, msg);
			process.stderr.write(msg + &#x22;\n&#x22;);
		}
	}, this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe(&#x27;screenshot&#x27;, &#x27;render fully loaded page to a given file&#x27;)
	.describe(&#x27;silent&#x27;, &#x27;don\&#x27;t write anything to the console&#x27;).boolean(&#x27;silent&#x27;);

// handle --config (issue #209)
program.setConfigFile(&#x27;config&#x27;);

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log(&#x27;phantomas v%s&#x27;, phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.ipc.prototype.setEventEmitter" id="apidoc.element.phantomas.ipc.prototype.setEventEmitter">
        function <span class="apidocSignatureSpan">phantomas.ipc.prototype.</span>setEventEmitter
        <span class="apidocSignatureSpan">(emitter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setEventEmitter = function (emitter) {
	this.events = emitter;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.jQuery" id="apidoc.module.phantomas.jQuery">module phantomas.jQuery</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.jQuery.module" id="apidoc.element.phantomas.jQuery.module">
        function <span class="apidocSignatureSpan">phantomas.jQuery.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var lastUrl;

	phantomas.setMetric(&#x27;jQueryVersion&#x27;, &#x27;&#x27;); // @desc version of jQuery framework (if loaded) [string]
	phantomas.setMetric(&#x27;jQueryVersionsLoaded&#x27;); // @desc number of loaded jQuery &#x22;instances&#x22; (even in the same version)
	phantomas.setMetric(&#x27;jQueryOnDOMReadyFunctions&#x27;); // @desc number of functions bound to onDOMReady event
	phantomas.setMetric(&#x27;jQueryWindowOnLoadFunctions&#x27;); // @desc number of functions bound to windowOnLoad event
	phantomas.setMetric(&#x27;jQuerySizzleCalls&#x27;); // @desc number of calls to Sizzle (including those that will be resolved using querySelectorAll
)
	phantomas.setMetric(&#x27;jQueryEventTriggers&#x27;); // @desc number of jQuery event triggers
	phantomas.setMetric(&#x27;jQueryDOMReads&#x27;); // @desc number of DOM read operations
	phantomas.setMetric(&#x27;jQueryDOMWrites&#x27;); // @desc number of DOM write operations
	phantomas.setMetric(&#x27;jQueryDOMWriteReadSwitches&#x27;); // @desc number of read operations that follow a series of write operations (
will cause repaint and can cause reflow)

	// spy calls to jQuery functions
	phantomas.on(&#x27;init&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				// read &#x26; write DOM operations (issue #436)
				function spyReadsAndWrites(jQuery) {
					var TYPE_SET = &#x27;write&#x27;,
						TYPE_GET = &#x27;read&#x27;;

					function report(type, funcName, context, args) {
						var caller = phantomas.getCaller(1),
							contextPath = phantomas.getDOMPath(context);

						args = (typeof args !== &#x27;undefined&#x27;) ? Array.prototype.slice.apply(args) : undefined;

						phantomas.emit(&#x27;jQueryOp&#x27;, type, funcName, args, contextPath, caller);
					}

					// &#x22;complex&#x22; getters and setters
					[
						&#x27;attr&#x27;,
						&#x27;css&#x27;,
						&#x27;prop&#x27;,
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(propName, val) {
							// setter when called with two arguments or provided with key/value set
							var isSet = (typeof val !== &#x27;undefined&#x27;) || (propName.toString() === &#x27;[object Object]&#x27;);
							report(isSet ? TYPE_SET : TYPE_GET, funcName, this[0], arguments);
						});
					});

					// simple getters and setters
					[
						&#x27;height&#x27;,
						&#x27;innerHeight&#x27;,
						&#x27;innerWidth&#x27;,
						&#x27;offset&#x27;,
						&#x27;outerHeight&#x27;,
						&#x27;outerWidth&#x27;,
						&#x27;text&#x27;,
						&#x27;width&#x27;,
						&#x27;scrollLeft&#x27;,
						&#x27;scrollTop&#x27;
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(val) {
							// setter when called with an argument
							var isSet = (typeof val !== &#x27;undefined&#x27;);
							report(isSet ? TYPE_SET : TYPE_GET, funcName, this[0], arguments);
						});
					});

					// setters
					[
						&#x27;addClass&#x27;,
						&#x27;removeAttr&#x27;,
						&#x27;removeClass&#x27;,
						&#x27;removeProp&#x27;,
						&#x27;toggleClass&#x27;,
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(val) {
							report(TYPE_SET, funcName, this[0], [val]);
						});
					});
					// getters
					[
						&#x27;hasClass&#x27;,
						&#x27;position&#x27;,
					].forEach(function(funcName) {
						phantomas.spy(jQuery.fn, funcName, function(val) {
							report(TYPE_GET, funcName, this[0], arguments);
						});
					});
				}

				phantomas.spyGlobalVar(&#x27;jQuery&#x27;, function(jQuery) {
					var version;

					if (!jQuery || !jQuery.fn) {
						phantomas.log(&#x27;jQuery: unable to detect version!&#x27;);
						return;
					}

					// Tag the current version of jQuery to avoid multiple reports of jQuery being loaded
					// when it&#x27;s actually only restored via $.noConflict(true) - see comments in #435
					if (jQuery.__phantomas === true) {
						phantomas.log(&#x27;jQuery: this instance has already been seen by phantomas&#x27;);
						return;
					}
					jQuery.__phantomas = true;

					// report the version of jQuery
					version = jQuery.fn.jquery;
					phantomas.emit(&#x27;jQueryLoaded&#x27;, version);

					// jQuery.ready.promise
					// works for jQuery 1.8.0+ (released Aug 09 2012)
					phantomas.spy(jQuery.ready, &#x27;promise&#x27;, function() {
						phantomas.incrMetric(&#x27;jQueryOnDOMReadyFunctions&#x27;);
						phantomas.addOffender(&#x27;jQueryOnDOMReadyFunctions&#x27;, phantomas.getCaller(3));
					}) || phantomas.log(&#x27;jQuery: can not ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.javaScriptBottlenecks" id="apidoc.module.phantomas.javaScriptBottlenecks">module phantomas.javaScriptBottlenecks</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.javaScriptBottlenecks.module" id="apidoc.element.phantomas.javaScriptBottlenecks.module">
        function <span class="apidocSignatureSpan">phantomas.javaScriptBottlenecks.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;documentWriteCalls&#x27;); //@desc number of calls to either document.write or document.writeln @offenders
	phantomas.setMetric(&#x27;evalCalls&#x27;); // @desc number of calls to eval (either direct or via setTimeout / setInterval) @offenders

	// spy calls to eval only when requested (issue #467)
	var spyEval = phantomas.getParam(&#x27;spy-eval&#x27;) === true;
	if (!spyEval) {
		phantomas.log(&#x27;javaScriptBottlenecks: to spy calls to eval() run phantomas with --spy-eval option&#x27;);
	}

	phantomas.on(&#x27;init&#x27;, function() {
		phantomas.evaluate(function(spyEval) {
			(function(phantomas) {
				function report(msg, caller, backtrace, metric) {
					phantomas.log(msg + &#x27;: from &#x27; + caller + &#x27;!&#x27;);
					phantomas.log(&#x27;Backtrace: &#x27; + backtrace);

					phantomas.incrMetric(metric);
					phantomas.addOffender(metric, &#x22;%s from %s&#x22;, msg, caller);
				}

				// spy calls to eval()
				if (spyEval) {
					phantomas.spy(window, &#x27;eval&#x27;, function(code) {
						report(&#x27;eval() called directly&#x27;, phantomas.getCaller(), phantomas.getBacktrace(), &#x27;evalCalls&#x27;);
						phantomas.log(&#x27;eval\&#x27;ed code: &#x27; + (code || &#x27;&#x27;).substring(0, 150) + &#x27;(...)&#x27;);
					});
				}

				// spy calls to setTimeout / setInterval with string passed instead of a function
				phantomas.spy(window, &#x27;setTimeout&#x27;, function(fn, interval) {
					if (typeof fn !== &#x27;string&#x27;) return;

					report(&#x27;eval() called via setTimeout(&#x22;&#x27; + fn + &#x27;&#x22;)&#x27;, phantomas.getCaller(), phantomas.getBacktrace(), &#x27;evalCalls&#x27;);
				});

				phantomas.spy(window, &#x27;setInterval&#x27;, function(fn, interval) {
					if (typeof fn !== &#x27;string&#x27;) return;

					report(&#x27;eval() called via setInterval(&#x22;&#x27; + fn + &#x27;&#x22;)&#x27;, phantomas.getCaller(), phantomas.getBacktrace(), &#x27;evalCalls&#x27;);
				});

				// spy document.write(ln)
				phantomas.spy(document, &#x27;write&#x27;, function(arg) {
					report(&#x27;document.write() used&#x27;, phantomas.getCaller(), phantomas.getBacktrace(), &#x27;documentWriteCalls&#x27;);
				});

				phantomas.spy(document, &#x27;writeln&#x27;, function(arg) {
					report(&#x27;document.writeln() used&#x27;, phantomas.getCaller(), phantomas.getBacktrace(), &#x27;documentWriteCalls&#x27;);
				});
			})(window.__phantomas);
		}, spyEval);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.jserrors" id="apidoc.module.phantomas.jserrors">module phantomas.jserrors</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.jserrors.module" id="apidoc.element.phantomas.jserrors.module">
        function <span class="apidocSignatureSpan">phantomas.jserrors.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;jsErrors&#x27;); // @desc number of JavaScript errors

	function formatTrace(trace) {
		var ret = [];

		if (Array.isArray(trace)) {
			trace.forEach(function(entry) {
				ret.push((entry.function ? entry.function+&#x27;(): &#x27; : &#x27;unknown fn: &#x27;) + (entry.sourceURL || entry.file) + &#x27; @ &#x27; + entry.line);
			});
		}

		return ret;
	}

	phantomas.on(&#x27;jserror&#x27;, function(msg, trace) {
		trace = formatTrace(trace);

		phantomas.log(msg);
		phantomas.log(&#x27;Backtrace: &#x27; + trace.join(&#x27; / &#x27;));

		phantomas.incrMetric(&#x27;jsErrors&#x27;);
		phantomas.addOffender(&#x27;jsErrors&#x27;, msg + &#x27; - &#x27; + trace.join(&#x27; / &#x27;));
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.keepAlive" id="apidoc.module.phantomas.keepAlive">module phantomas.keepAlive</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.keepAlive.module" id="apidoc.element.phantomas.keepAlive.module">
        function <span class="apidocSignatureSpan">phantomas.keepAlive.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var closedConnectionHosts = {};

	phantomas.setMetric(&#x27;closedConnections&#x27;); // @desc number of requests not keeping the connection alive and slowing down the next
 request

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var connectionHeader = (entry.headers.Connection || &#x27;&#x27;).toLowerCase(),
			// Taking the protocol in account, in case the same domain is called with two different protocols.
			host = entry.protocol + &#x27;://&#x27; + entry.domain;

		if (connectionHeader.indexOf(&#x27;close&#x27;) !== -1) {
			// Don&#x27;t blame it immediatly, wait to see if the connection is needed a second time.
			closedConnectionHosts[host] = entry.url;
		}
	});

	phantomas.on(&#x27;send&#x27;, function(entry, res) {
		var host = entry.protocol + &#x27;://&#x27; + entry.domain,
			previousClosedConnection = closedConnectionHosts[host];

		if (typeof previousClosedConnection !== &#x27;undefined&#x27;) {
			// There was a closed connection. We can blame it safely now!
			phantomas.incrMetric(&#x27;closedConnections&#x27;);
			phantomas.addOffender(&#x27;closedConnections&#x27;, previousClosedConnection);

			phantomas.log(&#x27;keepAlive: connection for &#x3c;%s&#x3e; was closed, but the page requested &#x3c;%s&#x3e;&#x27;, host, entry.url);

			closedConnectionHosts[host] = undefined;
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.lazyLoadableImages" id="apidoc.module.phantomas.lazyLoadableImages">module phantomas.lazyLoadableImages</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.lazyLoadableImages.module" id="apidoc.element.phantomas.lazyLoadableImages.module">
        function <span class="apidocSignatureSpan">phantomas.lazyLoadableImages.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;lazyLoadableImagesBelowTheFold&#x27;); // @desc number of images displayed below the fold that can be lazy-loaded

	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.log(&#x27;lazyLoadableImages: analyzing which images can be lazy-loaded...&#x27;);

		phantomas.evaluate(function() {
			(function(phantomas) {
				phantomas.spyEnabled(false, &#x27;analyzing which images can be lazy-loaded&#x27;);

				var images = document.body.getElementsByTagName(&#x27;img&#x27;),
					i,
					len = images.length,
					offset,
					path,
					processedImages = {},
					src,
					viewportHeight = window.innerHeight;

				phantomas.log(&#x27;lazyLoadableImages: %d image(s) found, assuming %dpx offset to be the fold&#x27;, len, viewportHeight);

				for (i = 0; i &#x3c; len; i++) {
					// @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect
					offset = images[i].getBoundingClientRect().top;
					src = images[i].getAttribute(&#x27;src&#x27;);

					// ignore base64-encoded images
					if (src === null || src === &#x27;&#x27; || /^data:/.test(src)) {
						continue;
					}

					path = phantomas.getDOMPath(images[i]);

					// get the most top position for a given image (deduplicate by src)
					if (typeof processedImages[src] === &#x27;undefined&#x27;) {
						processedImages[src] = {
							offset: offset,
							path: path
						};
					}

					// maybe there&#x27;s the same image loaded above the fold?
					if (offset &#x3c; processedImages[src].offset) {
						processedImages[src] = {
							offset: offset,
							path: path
						};
					}
				}

				phantomas.log(&#x27;lazyLoadableImages: checking %d unique image(s)&#x27;, Object.keys(processedImages).length);

				Object.keys(processedImages).forEach(function(src) {
					var img = processedImages[src];

					if (img.offset &#x3e; viewportHeight) {
						phantomas.log(&#x27;lazyLoadableImages: &#x3c;%s&#x3e; image (%s) is below the fold (at %dpx)&#x27;, src, img.path, img.offset);

						phantomas.incrMetric(&#x27;lazyLoadableImagesBelowTheFold&#x27;);
						phantomas.addOffender(&#x27;lazyLoadableImagesBelowTheFold&#x27;, src);
					}
				});

				phantomas.spyEnabled(true);
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.localStorage" id="apidoc.module.phantomas.localStorage">module phantomas.localStorage</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.localStorage.module" id="apidoc.element.phantomas.localStorage.module">
        function <span class="apidocSignatureSpan">phantomas.localStorage.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;localStorageEntries&#x27;); // @desc number of entries in local storage

	phantomas.on(&#x27;report&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				var entries;

				try {
					entries = Object.keys(window.localStorage);

					phantomas.setMetric(&#x27;localStorageEntries&#x27;, entries.length);

					entries.forEach(function(entry) {
						phantomas.addOffender(&#x27;localStorageEntries&#x27;, entry);
					});
				} catch (ex) {
					phantomas.log(&#x27;localStorageEntries: not set because &#x27; + ex + &#x27;!&#x27;);
				}
			}(window.__phantomas));
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.mainRequest" id="apidoc.module.phantomas.mainRequest">module phantomas.mainRequest</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.mainRequest.module" id="apidoc.element.phantomas.mainRequest.module">
        function <span class="apidocSignatureSpan">phantomas.mainRequest.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var isMainRequest = true;
	var statusCodes = [];

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		if (isMainRequest) {
			captureStatusCode(statusCodes, res.status);
		}
	});

	phantomas.on(&#x27;responseEnd&#x27;, function(entry, res) {
		isMainRequest = false;
		captureStatusCode(statusCodes, res.status);

		phantomas.setMetric(&#x27;statusCodesTrail&#x27;, statusCodes.join(&#x27;,&#x27;), true); // @desc comma-separated list of HTTP status codes that
main request followed through (could contain a single element if the main request is a terminal one) [string]
	});

	function captureStatusCode(codes, code) {
		codes.push(code);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.navigationTiming" id="apidoc.module.phantomas.navigationTiming">module phantomas.navigationTiming</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.navigationTiming.module" id="apidoc.element.phantomas.navigationTiming.module">
        function <span class="apidocSignatureSpan">phantomas.navigationTiming.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.once(&#x27;init&#x27;, function() {
		phantomas.evaluate(function () {
			(function(phantomas) {
				function emit(eventName) {
					phantomas.log(&#x27;Navigation Timing milestone: %s&#x27;, eventName);
					phantomas.emit(&#x27;milestone&#x27;, eventName);
				}

				document.addEventListener(&#x22;DOMContentLoaded&#x22;, function() {
					// both DOM and CSSOM are constructed, no stylesheets are blocking JavaScript execution
					emit(&#x27;domReady&#x27;);
				});

				// domInteractive and domComplete
				document.addEventListener(&#x27;readystatechange&#x27;, function() {
					var readyState = document.readyState;

					// @see http://www.w3.org/TR/html5/dom.html#documentreadystate
					switch (readyState) {
						// the browser has finished parsing all of the HTML and DOM construction is complete
						case &#x27;interactive&#x27;:
							emit(&#x27;domInteractive&#x27;);
							break;

							// the processing is complete and all of the resources on the page have finished downloading
						case &#x27;complete&#x27;:
							emit(&#x27;domComplete&#x27;);
							break;
					}
				});
			})(window.__phantomas);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.optimist_config_file" id="apidoc.module.phantomas.optimist_config_file">module phantomas.optimist_config_file</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.alias" id="apidoc.element.phantomas.optimist_config_file.alias">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>alias
        <span class="apidocSignatureSpan">(x, y)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">alias = function (x, y) {
    if (typeof x === &#x27;object&#x27;) {
        Object.keys(x).forEach(function (key) {
            self.alias(key, x[key]);
        });
    }
    else {
        options.alias[x] = (options.alias[x] || []).concat(y);
    }
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// parse options
program
	.usage(&#x27;PhantomJS-based web performance metrics collector\n\nphantomas &#x3c;url&#x3e; [options]&#x27;)
	// mandatory
	.header(&#x27;General options&#x27;)
	.describe(&#x27;url&#x27;, &#x27;Set URL to work with&#x27;).string(&#x27;url&#x27;)
	// version / help
	.describe(&#x27;version&#x27;, &#x27;Show version number and quit&#x27;).boolean(&#x27;version&#x27;).<span class="apidocCodeKeywordSpan
">alias</span>(&#x27;version&#x27;, &#x27;V&#x27;)
	.describe(&#x27;help&#x27;, &#x27;This help text&#x27;).boolean(&#x27;help&#x27;).alias(&#x27;help&#x27;, &#x27;h&#x27;)
	.describe(&#x27;verbose&#x27;, &#x27;print debug messages to the console&#x27;).boolean(&#x27;verbose&#x27;).alias(&#x27;verbose
&#x27;, &#x27;v&#x27;)
	.describe(&#x27;debug&#x27;, &#x27;run PhantomJS in debug mode&#x27;).default(&#x27;debug&#x27;)
	.describe(&#x27;modules&#x27;, &#x27;run selected modules only [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;include-dirs&#x27;, &#x27;load modules from specified directories [dirOne],[dirTwo],...&#x27;)
	.describe(&#x27;skip-modules&#x27;, &#x27;skip selected modules [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;config&#x27;, &#x27;uses JSON or YAML-formatted config file to set parameters&#x27;).string(&#x27;config&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.boolean" id="apidoc.element.phantomas.optimist_config_file.boolean">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>boolean
        <span class="apidocSignatureSpan">(bools)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">boolean = function (bools) {
    options.boolean.push.apply(options.boolean, [].concat(bools));
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// parse options
program
	.usage(&#x27;PhantomJS-based web performance metrics collector\n\nphantomas &#x3c;url&#x3e; [options]&#x27;)
	// mandatory
	.header(&#x27;General options&#x27;)
	.describe(&#x27;url&#x27;, &#x27;Set URL to work with&#x27;).string(&#x27;url&#x27;)
	// version / help
	.describe(&#x27;version&#x27;, &#x27;Show version number and quit&#x27;).<span class="apidocCodeKeywordSpan">boolean</span>(&#x27
;version&#x27;).alias(&#x27;version&#x27;, &#x27;V&#x27;)
	.describe(&#x27;help&#x27;, &#x27;This help text&#x27;).boolean(&#x27;help&#x27;).alias(&#x27;help&#x27;, &#x27;h&#x27;)
	.describe(&#x27;verbose&#x27;, &#x27;print debug messages to the console&#x27;).boolean(&#x27;verbose&#x27;).alias(&#x27;verbose
&#x27;, &#x27;v&#x27;)
	.describe(&#x27;debug&#x27;, &#x27;run PhantomJS in debug mode&#x27;).default(&#x27;debug&#x27;)
	.describe(&#x27;modules&#x27;, &#x27;run selected modules only [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;include-dirs&#x27;, &#x27;load modules from specified directories [dirOne],[dirTwo],...&#x27;)
	.describe(&#x27;skip-modules&#x27;, &#x27;skip selected modules [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;config&#x27;, &#x27;uses JSON or YAML-formatted config file to set parameters&#x27;).string(&#x27;config&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.check" id="apidoc.element.phantomas.optimist_config_file.check">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>check
        <span class="apidocSignatureSpan">(f)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">check = function (f) {
    checks.push(f);
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.default" id="apidoc.element.phantomas.optimist_config_file.default">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>default
        <span class="apidocSignatureSpan">(key, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">default = function (key, value) {
    if (typeof key === &#x27;object&#x27;) {
        Object.keys(key).forEach(function (k) {
            self.default(k, key[k]);
        });
    }
    else {
        options.default[key] = value;
    }
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// mandatory
	.header(&#x27;General options&#x27;)
	.describe(&#x27;url&#x27;, &#x27;Set URL to work with&#x27;).string(&#x27;url&#x27;)
	// version / help
	.describe(&#x27;version&#x27;, &#x27;Show version number and quit&#x27;).boolean(&#x27;version&#x27;).alias(&#x27;version&#x27;, &#
x27;V&#x27;)
	.describe(&#x27;help&#x27;, &#x27;This help text&#x27;).boolean(&#x27;help&#x27;).alias(&#x27;help&#x27;, &#x27;h&#x27;)
	.describe(&#x27;verbose&#x27;, &#x27;print debug messages to the console&#x27;).boolean(&#x27;verbose&#x27;).alias(&#x27;verbose
&#x27;, &#x27;v&#x27;)
	.describe(&#x27;debug&#x27;, &#x27;run PhantomJS in debug mode&#x27;).<span class="apidocCodeKeywordSpan">default</span>(&#x27;
debug&#x27;)
	.describe(&#x27;modules&#x27;, &#x27;run selected modules only [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;include-dirs&#x27;, &#x27;load modules from specified directories [dirOne],[dirTwo],...&#x27;)
	.describe(&#x27;skip-modules&#x27;, &#x27;skip selected modules [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;config&#x27;, &#x27;uses JSON or YAML-formatted config file to set parameters&#x27;).string(&#x27;config&#x27;)
	// optional params
	.header(&#x27;Client options&#x27;)
	// --engine=[webkit|gecko]
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.demand" id="apidoc.element.phantomas.optimist_config_file.demand">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>demand
        <span class="apidocSignatureSpan">(keys)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">demand = function (keys) {
    if (typeof keys == &#x27;number&#x27;) {
        if (!demanded._) demanded._ = 0;
        demanded._ += keys;
    }
    else if (Array.isArray(keys)) {
        keys.forEach(function (key) {
            self.demand(key);
        });
    }
    else {
        demanded[keys] = true;
    }

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.describe" id="apidoc.element.phantomas.optimist_config_file.describe">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>describe
        <span class="apidocSignatureSpan">(opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">describe = function (opt) {
	if (nextHeader) {
		headers.push({
			label: nextHeader,
			before: opt
		});
		nextHeader = null;
	}
	return _describe.apply(optimist, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	url = &#x27;&#x27;;

// parse options
program
	.usage(&#x27;PhantomJS-based web performance metrics collector\n\nphantomas &#x3c;url&#x3e; [options]&#x27;)
	// mandatory
	.header(&#x27;General options&#x27;)
	.<span class="apidocCodeKeywordSpan">describe</span>(&#x27;url&#x27;, &#x27;Set URL to work with&#x27;).string(&#x27;url&#x27;)
	// version / help
	.describe(&#x27;version&#x27;, &#x27;Show version number and quit&#x27;).boolean(&#x27;version&#x27;).alias(&#x27;version&#x27;, &#
x27;V&#x27;)
	.describe(&#x27;help&#x27;, &#x27;This help text&#x27;).boolean(&#x27;help&#x27;).alias(&#x27;help&#x27;, &#x27;h&#x27;)
	.describe(&#x27;verbose&#x27;, &#x27;print debug messages to the console&#x27;).boolean(&#x27;verbose&#x27;).alias(&#x27;verbose
&#x27;, &#x27;v&#x27;)
	.describe(&#x27;debug&#x27;, &#x27;run PhantomJS in debug mode&#x27;).default(&#x27;debug&#x27;)
	.describe(&#x27;modules&#x27;, &#x27;run selected modules only [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;include-dirs&#x27;, &#x27;load modules from specified directories [dirOne],[dirTwo],...&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.header" id="apidoc.element.phantomas.optimist_config_file.header">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>header
        <span class="apidocSignatureSpan">(s)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">header = function (s) {
	nextHeader = s;
	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	runs,
	url = &#x27;&#x27;;

// parse options
program
	.usage(&#x27;PhantomJS-based web performance metrics collector\n\nphantomas &#x3c;url&#x3e; [options]&#x27;)
	// mandatory
	.<span class="apidocCodeKeywordSpan">header</span>(&#x27;General options&#x27;)
	.describe(&#x27;url&#x27;, &#x27;Set URL to work with&#x27;).string(&#x27;url&#x27;)
	// version / help
	.describe(&#x27;version&#x27;, &#x27;Show version number and quit&#x27;).boolean(&#x27;version&#x27;).alias(&#x27;version&#x27;, &#
x27;V&#x27;)
	.describe(&#x27;help&#x27;, &#x27;This help text&#x27;).boolean(&#x27;help&#x27;).alias(&#x27;help&#x27;, &#x27;h&#x27;)
	.describe(&#x27;verbose&#x27;, &#x27;print debug messages to the console&#x27;).boolean(&#x27;verbose&#x27;).alias(&#x27;verbose
&#x27;, &#x27;v&#x27;)
	.describe(&#x27;debug&#x27;, &#x27;run PhantomJS in debug mode&#x27;).default(&#x27;debug&#x27;)
	.describe(&#x27;modules&#x27;, &#x27;run selected modules only [moduleOne],[moduleTwo],...&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.help" id="apidoc.element.phantomas.optimist_config_file.help">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>help
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">help = function () {
	var text = _help.apply(optimist, arguments),
		i, s, p, opt_header = &#x22;\nOptions:&#x22;,
		opt_header_len = opt_header.length;
	//console.log(text,headers);
	for (i = 0; i &#x3c; headers.length; i++) {
		s = &#x22;\n  --&#x22; + headers[i].before;
		p = text.indexOf(s);
		if (p != -1) {
			s = &#x22;\n&#x22; + ansistyles.bright(headers[i].label) + &#x22;:&#x22;;
			text = text.substr(0, p) + s + text.substr(p);
			if (text.substr(p - opt_header_len, opt_header_len) == opt_header) {
				text = text.substr(0, p - opt_header_len) + text.substr(p);
			}
		}
	}
	return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.option" id="apidoc.element.phantomas.optimist_config_file.option">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>option
        <span class="apidocSignatureSpan">(key, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">option = function (key, opt) {
    if (typeof key === &#x27;object&#x27;) {
        Object.keys(key).forEach(function (k) {
            self.options(k, key[k]);
        });
    }
    else {
        if (opt.alias) self.alias(key, opt.alias);
        if (opt.demand) self.demand(key);
        if (typeof opt.default !== &#x27;undefined&#x27;) {
            self.default(key, opt.default);
        }

        if (opt.boolean || opt.type === &#x27;boolean&#x27;) {
            self.boolean(key);
        }
        if (opt.string || opt.type === &#x27;string&#x27;) {
            self.string(key);
        }

        var desc = opt.describe || opt.description || opt.desc;
        if (desc) {
            self.describe(key, desc);
        }
    }

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.options" id="apidoc.element.phantomas.optimist_config_file.options">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>options
        <span class="apidocSignatureSpan">(key, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">options = function (key, opt) {
    if (typeof key === &#x27;object&#x27;) {
        Object.keys(key).forEach(function (k) {
            self.options(k, key[k]);
        });
    }
    else {
        if (opt.alias) self.alias(key, opt.alias);
        if (opt.demand) self.demand(key);
        if (typeof opt.default !== &#x27;undefined&#x27;) {
            self.default(key, opt.default);
        }

        if (opt.boolean || opt.type === &#x27;boolean&#x27;) {
            self.boolean(key);
        }
        if (opt.string || opt.type === &#x27;string&#x27;) {
            self.string(key);
        }

        var desc = opt.describe || opt.description || opt.desc;
        if (desc) {
            self.describe(key, desc);
        }
    }

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.parse" id="apidoc.element.phantomas.optimist_config_file.parse">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>parse
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (args) {
	var options = origParse(args);
	debug(&#x27;parse: %j&#x27;, args);

	// check the config file
	var configFileName = this.configFileParam &#x26;&#x26; options[this.configFileParam],
		configParsed;

	// if --config is not provided, quit
	if (!configFileName) {
		debug(&#x27;options: %j&#x27;, options);
		return options;
	}

	configParsed = parseConfigFile(configFileName);

	// apply the rest of the options provided via command line
	Object.keys(configParsed).forEach(function(key) {
		// check if given option was not provided via command line
		if (args.indexOf(&#x27;--&#x27; + key) &#x3e; -1) {
			debug(&#x27;--%s option provided via command line, will skip the value from config file&#x27;, key);
			return;
		}

		options[key] = configParsed[key];
	});

	// cleanup
	delete options[this.configFileParam];

	debug(&#x27;options: %j&#x27;, options);
	return options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe(&#x27;screenshot&#x27;, &#x27;render fully loaded page to a given file&#x27;)
	.describe(&#x27;silent&#x27;, &#x27;don\&#x27;t write anything to the console&#x27;).boolean(&#x27;silent&#x27;);

// handle --config (issue #209)
program.setConfigFile(&#x27;config&#x27;);

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log(&#x27;phantomas v%s&#x27;, phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.setConfigFile" id="apidoc.element.phantomas.optimist_config_file.setConfigFile">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>setConfigFile
        <span class="apidocSignatureSpan">(configFileParam)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setConfigFile = function (configFileParam) {
	this.configFileParam = configFileParam;
	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe(&#x27;page-source-dir&#x27;, &#x27;[experimental] folder path to output page source (default is ./html directory)&#x27
;)
	.describe(&#x27;progress&#x27;, &#x27;shows page loading progress bar (disables verbose mode)&#x27;).boolean(&#x27;progress&#x27
;)
	.describe(&#x27;reporter&#x27;, &#x27;output format / reporter&#x27;).default(&#x27;reporter&#x27;, &#x27;plain&#x27;).alias(&#
x27;reporter&#x27;, &#x27;R&#x27;).alias(&#x27;reporter&#x27;, &#x27;format&#x27;)
	.describe(&#x27;screenshot&#x27;, &#x27;render fully loaded page to a given file&#x27;)
	.describe(&#x27;silent&#x27;, &#x27;don\&#x27;t write anything to the console&#x27;).boolean(&#x27;silent&#x27;);

// handle --config (issue #209)
program.<span class="apidocCodeKeywordSpan">setConfigFile</span>(&#x27;config&#x27;);

// parse it
options = program.parse(process.argv);

// show version number
if (options.version === true) {
	console.log(&#x27;phantomas v%s&#x27;, phantomas.version);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.showHelp" id="apidoc.element.phantomas.optimist_config_file.showHelp">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>showHelp
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">showHelp = function (fn) {
    if (!fn) fn = console.error;
    fn(self.help());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (options.version === true) {
	console.log(&#x27;phantomas v%s&#x27;, phantomas.version);
	process.exit(0);
}

// show help
if (options.help === true) {
	program.<span class="apidocCodeKeywordSpan">showHelp</span>();
	process.exit(0);
}

// handle URL passed without --url option (#249)
if (typeof options._[2] === &#x27;string&#x27;) {
	options.url = options._[2];
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.string" id="apidoc.element.phantomas.optimist_config_file.string">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>string
        <span class="apidocSignatureSpan">(strings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">string = function (strings) {
    options.string.push.apply(options.string, [].concat(strings));
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	url = &#x27;&#x27;;

// parse options
program
	.usage(&#x27;PhantomJS-based web performance metrics collector\n\nphantomas &#x3c;url&#x3e; [options]&#x27;)
	// mandatory
	.header(&#x27;General options&#x27;)
	.describe(&#x27;url&#x27;, &#x27;Set URL to work with&#x27;).<span class="apidocCodeKeywordSpan">string</span>(&#x27;url&#x27;)
	// version / help
	.describe(&#x27;version&#x27;, &#x27;Show version number and quit&#x27;).boolean(&#x27;version&#x27;).alias(&#x27;version&#x27;, &#
x27;V&#x27;)
	.describe(&#x27;help&#x27;, &#x27;This help text&#x27;).boolean(&#x27;help&#x27;).alias(&#x27;help&#x27;, &#x27;h&#x27;)
	.describe(&#x27;verbose&#x27;, &#x27;print debug messages to the console&#x27;).boolean(&#x27;verbose&#x27;).alias(&#x27;verbose
&#x27;, &#x27;v&#x27;)
	.describe(&#x27;debug&#x27;, &#x27;run PhantomJS in debug mode&#x27;).default(&#x27;debug&#x27;)
	.describe(&#x27;modules&#x27;, &#x27;run selected modules only [moduleOne],[moduleTwo],...&#x27;)
	.describe(&#x27;include-dirs&#x27;, &#x27;load modules from specified directories [dirOne],[dirTwo],...&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.usage" id="apidoc.element.phantomas.optimist_config_file.usage">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>usage
        <span class="apidocSignatureSpan">(msg, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">usage = function (msg, opts) {
    if (!opts &#x26;&#x26; typeof msg === &#x27;object&#x27;) {
        opts = msg;
        msg = null;
    }

    usage = msg;

    if (opts) self.options(opts);

    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	ProgressBar = require(&#x27;progress&#x27;),
	options = {},
	runs,
	url = &#x27;&#x27;;

// parse options
program
	.<span class="apidocCodeKeywordSpan">usage</span>(&#x27;PhantomJS-based web performance metrics collector\n\nphantomas &#x3c;url
&#x3e; [options]&#x27;)
	// mandatory
	.header(&#x27;General options&#x27;)
	.describe(&#x27;url&#x27;, &#x27;Set URL to work with&#x27;).string(&#x27;url&#x27;)
	// version / help
	.describe(&#x27;version&#x27;, &#x27;Show version number and quit&#x27;).boolean(&#x27;version&#x27;).alias(&#x27;version&#x27;, &#
x27;V&#x27;)
	.describe(&#x27;help&#x27;, &#x27;This help text&#x27;).boolean(&#x27;help&#x27;).alias(&#x27;help&#x27;, &#x27;h&#x27;)
	.describe(&#x27;verbose&#x27;, &#x27;print debug messages to the console&#x27;).boolean(&#x27;verbose&#x27;).alias(&#x27;verbose
&#x27;, &#x27;v&#x27;)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.optimist_config_file.wrap" id="apidoc.element.phantomas.optimist_config_file.wrap">
        function <span class="apidocSignatureSpan">phantomas.optimist_config_file.</span>wrap
        <span class="apidocSignatureSpan">(cols)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wrap = function (cols) {
    wrap = cols;
    return self;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}

			res.push(&#x27;&#x27;);
		});

		fold.pushEnd(res, &#x27;offenders&#x27;);

		return fold.<span class="apidocCodeKeywordSpan">wrap</span>(
			results.getUrl(),
			res.join(&#x27;\n&#x27;).trim()
		) + &#x27;\n&#x27;;
	}

	function formatMultipleRunResults(results) {
		var AsciiTable = require(&#x27;ascii-table&#x27;),
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.pads" id="apidoc.module.phantomas.pads">module phantomas.pads</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.pads.lpad" id="apidoc.element.phantomas.pads.lpad">
        function <span class="apidocSignatureSpan">phantomas.pads.</span>lpad
        <span class="apidocSignatureSpan">(str, len)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function lpad(str, len) {
	var fill;
	str = typeof str !== &#x27;undefined&#x27; ? str : &#x27;-&#x27;;

	fill = new Array(Math.max(1, len - str.toString().length + 1)).join(&#x27; &#x27;);
	return fill + str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.pads.rpad" id="apidoc.element.phantomas.pads.rpad">
        function <span class="apidocSignatureSpan">phantomas.pads.</span>rpad
        <span class="apidocSignatureSpan">(str, len)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function rpad(str, len) {
	var fill;
	str = typeof str !== &#x27;undefined&#x27; ? str : &#x27;-&#x27;;

	fill = new Array(Math.max(1, len - str.toString().length + 1)).join(&#x27; &#x27;);
	return str + fill;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.pageSource" id="apidoc.module.phantomas.pageSource">module phantomas.pageSource</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.pageSource.module" id="apidoc.element.phantomas.pageSource.module">
        function <span class="apidocSignatureSpan">phantomas.pageSource.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	if (!phantomas.getParam(&#x27;page-source&#x27;)) {
		phantomas.log(&#x27;To enable page-source of page being loaded run phantomas with --page-source option&#x27;);
		return;
	}

	var util = phantomas.require(&#x27;util&#x27;),
		fs = require(&#x27;fs&#x27;),
		pageSourceOutputDir = &#x27;html&#x27;;

	// grab output dir from args
	if (phantomas.getParam(&#x27;page-source-dir&#x27;)) {
		pageSourceOutputDir = phantomas.getParam(&#x27;page-source-dir&#x27;).replace(/\/+$/, &#x27;&#x27;);
	}

	// save source data
	phantomas.on(&#x27;report&#x27;, function() {
		var now = Date.now(),
			path = util.format(pageSourceOutputDir + &#x27;/%d.html&#x27;, now);

		fs.write(path, phantomas.getSource(), &#x27;w&#x27;);

		// verify that the file was really written
		if (fs.isReadable(path)) {
			phantomas.log(&#x27;Page source: saved to %s in %d ms&#x27;, path, Date.now() - now);
		} else {
			phantomas.log(&#x27;Page source: saved to %s failed!&#x27;, path);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.path" id="apidoc.module.phantomas.path">module phantomas.path</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.path._makeLong" id="apidoc.element.phantomas.path._makeLong">
        function <span class="apidocSignatureSpan">phantomas.path.</span>_makeLong
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_makeLong = function (path) {
  return path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.basename" id="apidoc.element.phantomas.path.basename">
        function <span class="apidocSignatureSpan">phantomas.path.</span>basename
        <span class="apidocSignatureSpan">(path, ext)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">basename = function (path, ext) {
  var f = splitPath(path)[2];
  // TODO: make this comparison case-insensitive on windows?
  if (ext &#x26;&#x26; f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.dirname" id="apidoc.element.phantomas.path.dirname">
        function <span class="apidocSignatureSpan">phantomas.path.</span>dirname
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dirname = function (path) {
  var result = splitPath(path),
      root = result[0],
      dir = result[1];

  if (!root &#x26;&#x26; !dir) {
    // No dirname whatsoever
    return &#x27;.&#x27;;
  }

  if (dir) {
    // It has a dirname, strip trailing slash
    dir = dir.substring(0, dir.length - 1);
  }

  return root + dir;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.exists" id="apidoc.element.phantomas.path.exists">
        function <span class="apidocSignatureSpan">phantomas.path.</span>exists
        <span class="apidocSignatureSpan">(path, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exists = function (path, callback) {
  process.binding(&#x27;fs&#x27;).stat(path, function(err, stats) {
    if (callback) callback(err ? false : true);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.existsSync" id="apidoc.element.phantomas.path.existsSync">
        function <span class="apidocSignatureSpan">phantomas.path.</span>existsSync
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">existsSync = function (path) {
  try {
    process.binding(&#x27;fs&#x27;).stat(path);
    return true;
  } catch (e) {
    return false;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var raw,
		configMode,
		configParsed;

	debug(&#x27;using &#x22;%s&#x22; config file&#x27;, configFileName);

	// check the existance of the config file
	if (!fs.<span class="apidocCodeKeywordSpan">existsSync</span>(configFileName)) {
		throw &#x27;Config file &#x22;&#x27; + configFileName + &#x27;&#x22; cannot be found!&#x27;;
	}

	// JSON or YAML?
	configMode = /\.yaml$/.test(configFileName) ? &#x27;YAML&#x27; : &#x27;JSON&#x27;;

	// parse it
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.extname" id="apidoc.element.phantomas.path.extname">
        function <span class="apidocSignatureSpan">phantomas.path.</span>extname
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extname = function (path) {
  return splitPath(path)[3];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.join" id="apidoc.element.phantomas.path.join">
        function <span class="apidocSignatureSpan">phantomas.path.</span>join
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function () {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(paths.filter(function(p, index) {
    return p &#x26;&#x26; typeof p === &#x27;string&#x27;;
  }).join(&#x27;/&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
&#x27;use strict&#x27;;

function lpad(str, len) {
	var fill;
	str = typeof str !== &#x27;undefined&#x27; ? str : &#x27;-&#x27;;

	fill = new Array(Math.max(1, len - str.toString().length + 1)).<span class="apidocCodeKeywordSpan">join</span>(&#x27; &#x27;);
	return fill + str;
}

function rpad(str, len) {
	var fill;
	str = typeof str !== &#x27;undefined&#x27; ? str : &#x27;-&#x27;;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.normalize" id="apidoc.element.phantomas.path.normalize">
        function <span class="apidocSignatureSpan">phantomas.path.</span>normalize
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">normalize = function (path) {
  var isAbsolute = path.charAt(0) === &#x27;/&#x27;,
      trailingSlash = path.slice(-1) === &#x27;/&#x27;;

  // Normalize the path
  path = normalizeArray(path.split(&#x27;/&#x27;).filter(function(p) {
    return !!p;
  }), !isAbsolute).join(&#x27;/&#x27;);

  if (!path &#x26;&#x26; !isAbsolute) {
    path = &#x27;.&#x27;;
  }
  if (path &#x26;&#x26; trailingSlash) {
    path += &#x27;/&#x27;;
  }

  return (isAbsolute ? &#x27;/&#x27; : &#x27;&#x27;) + path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // Make sure that the joined path doesn&#x27;t start with two slashes
  // - it will be mistaken for an unc path by normalize() -
  // unless the paths[0] also starts with two slashes
  if (/^[\\\/]{2}/.test(joined) &#x26;&#x26; !/^[\\\/]{2}/.test(paths[0])) {
    joined = joined.slice(1);
  }

  return exports.<span class="apidocCodeKeywordSpan">normalize</span>(joined);
};

// path.relative(from, to)
// it will solve the relative path from &#x27;from&#x27; to &#x27;to&#x27;, for instance:
// from = &#x27;C:\\orandea\\test\\aaa&#x27;
// to = &#x27;C:\\orandea\\impl\\bbb&#x27;
// The output of the function should be: &#x27;..\\..\\impl\\bbb&#x27;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.relative" id="apidoc.element.phantomas.path.relative">
        function <span class="apidocSignatureSpan">phantomas.path.</span>relative
        <span class="apidocSignatureSpan">(from, to)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">relative = function (from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start &#x3c; arr.length; start++) {
      if (arr[start] !== &#x27;&#x27;) break;
    }

    var end = arr.length - 1;
    for (; end &#x3e;= 0; end--) {
      if (arr[end] !== &#x27;&#x27;) break;
    }

    if (start &#x3e; end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split(&#x27;/&#x27;));
  var toParts = trim(to.split(&#x27;/&#x27;));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i &#x3c; length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i &#x3c; fromParts.length; i++) {
    outputParts.push(&#x27;..&#x27;);
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join(&#x27;/&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (/^[\\\/]{2}/.test(joined) &#x26;&#x26; !/^[\\\/]{2}/.test(paths[0])) {
    joined = joined.slice(1);
  }

  return exports.normalize(joined);
};

// path.<span class="apidocCodeKeywordSpan">relative</span>(from, to)
// it will solve the relative path from &#x27;from&#x27; to &#x27;to&#x27;, for instance:
// from = &#x27;C:\\orandea\\test\\aaa&#x27;
// to = &#x27;C:\\orandea\\impl\\bbb&#x27;
// The output of the function should be: &#x27;..\\..\\impl\\bbb&#x27;
// windows version
exports.relative = function(from, to) {
  from = exports.resolve(from);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.path.resolve" id="apidoc.element.phantomas.path.resolve">
        function <span class="apidocSignatureSpan">phantomas.path.</span>resolve
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resolve = function () {
  var resolvedPath = &#x27;&#x27;,
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i &#x3e;= -1 &#x26;&#x26; !resolvedAbsolute; i--) {
    var path = (i &#x3e;= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== &#x27;string&#x27; || !path) {
      continue;
    }

    resolvedPath = path + &#x27;/&#x27; + resolvedPath;
    resolvedAbsolute = path.charAt(0) === &#x27;/&#x27;;
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(resolvedPath.split(&#x27;/&#x27;).filter(function(p) {
    return !!p;
  }), !resolvedAbsolute).join(&#x27;/&#x27;);

  return ((resolvedAbsolute ? &#x27;/&#x27; : &#x27;&#x27;) + resolvedPath) || &#x27;.&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var result2 = splitTailRe.exec(tail),
    dir = result2[1] || &#x27;&#x27;,
    basename = result2[2] || &#x27;&#x27;,
    ext = result2[3] || &#x27;&#x27;;
return [device, dir, basename, ext];
  };

  // path.<span class="apidocCodeKeywordSpan">resolve</span>([from ...], to)
  // windows version
  exports.resolve = function() {
var resolvedDevice = &#x27;&#x27;,
    resolvedTail = &#x27;&#x27;,
    resolvedAbsolute = false;

for (var i = arguments.length - 1; i &#x3e;= -1; i--) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.postLoadDelay" id="apidoc.module.phantomas.postLoadDelay">module phantomas.postLoadDelay</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.postLoadDelay.module" id="apidoc.element.phantomas.postLoadDelay.module">
        function <span class="apidocSignatureSpan">phantomas.postLoadDelay.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// e.g. --post-load-delay 5
	var delay = parseInt(phantomas.getParam(&#x27;post-load-delay&#x27;), 10);

	if (!delay) {
		return;
	}

	phantomas.log(&#x27;Post load delay: will wait %d second(s) after onload&#x27;, delay);

	phantomas.reportQueuePush(function(done) {
		phantomas.on(&#x27;loadFinished&#x27;, function() {
			setInterval(done, delay * 1000);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.punycode" id="apidoc.module.phantomas.punycode">module phantomas.punycode</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.punycode.decode" id="apidoc.element.phantomas.punycode.decode">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>decode
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function decode(input) {
		// Don&#x27;t use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    length,
		<span class="apidocCodeCommentSpan">    /** Cached calculation results */
</span>		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic &#x3c; 0) {
			basic = 0;
		}

		for (j = 0; j &#x3c; basic; ++j) {
			// if it&#x27;s not a basic code point
			if (input.charCodeAt(j) &#x3e;= 0x80) {
				error(&#x27;not-basic&#x27;);
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic &#x3e; 0 ? basic + 1 : 0; index &#x3c; inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index &#x3e;= inputLength) {
					error(&#x27;invalid-input&#x27;);
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit &#x3e;= base || digit &#x3e; floor((maxInt - i) / w)) {
					error(&#x27;overflow&#x27;);
				}

				i += digit * w;
				t = k &#x3c;= bias ? tMin : (k &#x3e;= bias + tMax ? tMax : k - bias);

				if (digit &#x3c; t) {
					break;
				}

				baseMinusT = base - t;
				if (w &#x3e; floor(maxInt / baseMinusT)) {
					error(&#x27;overflow&#x27;);
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we&#x27;ll fix that now:
			if (floor(i / out) &#x3e; maxInt - n) {
				error(&#x27;overflow&#x27;);
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.punycode.encode" id="apidoc.element.phantomas.punycode.encode">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>encode
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		<span class="apidocCodeCommentSpan">    /** `inputLength` will hold the number of code points in `input`. */
</span>		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j &#x3c; inputLength; ++j) {
			currentValue = input[j];
			if (currentValue &#x3c; 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount &#x3c; inputLength) {

			// All non-basic code points &#x3c; n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j &#x3c; inputLength; ++j) {
				currentValue = input[j];
				if (currentValue &#x3e;= n &#x26;&#x26; currentValue &#x3c; m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder&#x27;s &#x3c;n,i&#x3e; state to &#x3c;m,0&#x3e;,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n &#x3e; floor((maxInt - delta) / handledCPCountPlusOne)) {
				error(&#x27;overflow&#x27;);
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j &#x3c; inputLength; ++j) {
				currentValue = input[j];

				if (currentValue &#x3c; n &#x26;&#x26; ++delta &#x3e; maxInt) {
					error(&#x27;overflow&#x27;);
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k &#x3c;= bias ? tMin : (k &#x3e;= bias + tMax ? tMax : k - bias);
						if (q &#x3c; t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join(&#x27;&#x27;);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				if (noSkip &#x26;&#x26; entry.skip) {
					return;
				}

				res.push(entry);
			});

			return TapProducer.<span class="apidocCodeKeywordSpan">encode</span>(res, true /* emit yanlish data in TAP */ );
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.punycode.toASCII" id="apidoc.element.phantomas.punycode.toASCII">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>toASCII
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toASCII(domain) {
		return mapDomain(domain, function(string) {
			return regexNonASCII.test(string)
				? &#x27;xn--&#x27; + encode(string)
				: string;
		});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.punycode.toUnicode" id="apidoc.element.phantomas.punycode.toUnicode">
        function <span class="apidocSignatureSpan">phantomas.punycode.</span>toUnicode
        <span class="apidocSignatureSpan">(domain)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toUnicode(domain) {
		return mapDomain(domain, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.querystring" id="apidoc.module.phantomas.querystring">module phantomas.querystring</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.querystring.decode" id="apidoc.element.phantomas.querystring.decode">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>decode
        <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">decode = function (qs, sep, eq, options) {
  sep = sep || &#x27;&#x26;&#x27;;
  eq = eq || &#x27;=&#x27;;
  var obj = {};

  if (typeof qs !== &#x27;string&#x27; || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options &#x26;&#x26; typeof options.maxKeys === &#x27;number&#x27;) {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys &#x3c;= 0 means that we should not limit keys count
  if (maxKeys &#x3e; 0 &#x26;&#x26; len &#x3e; maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i &#x3c; len; ++i) {
    var x = qs[i].replace(regexp, &#x27;%20&#x27;),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx &#x3e;= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = &#x27;&#x27;;
    }

    try {
      k = decodeURIComponent(kstr);
      v = decodeURIComponent(vstr);
    } catch (e) {
      k = QueryString.unescape(kstr, true);
      v = QueryString.unescape(vstr, true);
    }

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (Array.isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.encode" id="apidoc.element.phantomas.querystring.encode">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>encode
        <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">encode = function (obj, sep, eq, name) {
  sep = sep || &#x27;&#x26;&#x27;;
  eq = eq || &#x27;=&#x27;;
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === &#x27;object&#x27;) {
    return Object.keys(obj).map(function(k) {
      var ks = QueryString.escape(stringifyPrimitive(k)) + eq;
      if (Array.isArray(obj[k])) {
        return obj[k].map(function(v) {
          return ks + QueryString.escape(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + QueryString.escape(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return &#x27;&#x27;;
  return QueryString.escape(stringifyPrimitive(name)) + eq +
         QueryString.escape(stringifyPrimitive(obj));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				if (noSkip &#x26;&#x26; entry.skip) {
					return;
				}

				res.push(entry);
			});

			return TapProducer.<span class="apidocCodeKeywordSpan">encode</span>(res, true /* emit yanlish data in TAP */ );
		}
	};
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.escape" id="apidoc.element.phantomas.querystring.escape">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>escape
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (str) {
  return encodeURIComponent(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
eq = eq || &#x27;=&#x27;;
if (obj === null) {
  obj = undefined;
}

if (typeof obj === &#x27;object&#x27;) {
  return Object.keys(obj).map(function(k) {
    var ks = QueryString.<span class="apidocCodeKeywordSpan">escape</span>(stringifyPrimitive(k)) + eq;
    if (Array.isArray(obj[k])) {
      return obj[k].map(function(v) {
        return ks + QueryString.escape(stringifyPrimitive(v));
      }).join(sep);
    } else {
      return ks + QueryString.escape(stringifyPrimitive(obj[k]));
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.parse" id="apidoc.element.phantomas.querystring.parse">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>parse
        <span class="apidocSignatureSpan">(qs, sep, eq, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (qs, sep, eq, options) {
  sep = sep || &#x27;&#x26;&#x27;;
  eq = eq || &#x27;=&#x27;;
  var obj = {};

  if (typeof qs !== &#x27;string&#x27; || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options &#x26;&#x26; typeof options.maxKeys === &#x27;number&#x27;) {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys &#x3c;= 0 means that we should not limit keys count
  if (maxKeys &#x3e; 0 &#x26;&#x26; len &#x3e; maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i &#x3c; len; ++i) {
    var x = qs[i].replace(regexp, &#x27;%20&#x27;),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx &#x3e;= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = &#x27;&#x27;;
    }

    try {
      k = decodeURIComponent(kstr);
      v = decodeURIComponent(vstr);
    } catch (e) {
      k = QueryString.unescape(kstr, true);
      v = QueryString.unescape(vstr, true);
    }

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (Array.isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe(&#x27;screenshot&#x27;, &#x27;render fully loaded page to a given file&#x27;)
	.describe(&#x27;silent&#x27;, &#x27;don\&#x27;t write anything to the console&#x27;).boolean(&#x27;silent&#x27;);

// handle --config (issue #209)
program.setConfigFile(&#x27;config&#x27;);

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log(&#x27;phantomas v%s&#x27;, phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.stringify" id="apidoc.element.phantomas.querystring.stringify">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>stringify
        <span class="apidocSignatureSpan">(obj, sep, eq, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stringify = function (obj, sep, eq, name) {
  sep = sep || &#x27;&#x26;&#x27;;
  eq = eq || &#x27;=&#x27;;
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === &#x27;object&#x27;) {
    return Object.keys(obj).map(function(k) {
      var ks = QueryString.escape(stringifyPrimitive(k)) + eq;
      if (Array.isArray(obj[k])) {
        return obj[k].map(function(v) {
          return ks + QueryString.escape(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + QueryString.escape(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return &#x27;&#x27;;
  return QueryString.escape(stringifyPrimitive(name)) + eq +
         QueryString.escape(stringifyPrimitive(obj));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	// add asserts
	var asserts = results.getAsserts();

	if (Object.keys(asserts).length &#x3e; 0) {
		res.asserts = asserts;
	}

	return JSON.<span class="apidocCodeKeywordSpan">stringify</span>(res);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.unescape" id="apidoc.element.phantomas.querystring.unescape">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescape
        <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unescape = function (s, decodeSpaces) {
  return QueryString.unescapeBuffer(s, decodeSpaces).toString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  vstr = &#x27;&#x27;;
}

try {
  k = decodeURIComponent(kstr);
  v = decodeURIComponent(vstr);
} catch (e) {
  k = QueryString.<span class="apidocCodeKeywordSpan">unescape</span>(kstr, true);
  v = QueryString.unescape(vstr, true);
}

if (!hasOwnProperty(obj, k)) {
  obj[k] = v;
} else if (Array.isArray(obj[k])) {
  obj[k].push(v);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.querystring.unescapeBuffer" id="apidoc.element.phantomas.querystring.unescapeBuffer">
        function <span class="apidocSignatureSpan">phantomas.querystring.</span>unescapeBuffer
        <span class="apidocSignatureSpan">(s, decodeSpaces)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unescapeBuffer = function (s, decodeSpaces) {
  var out = new Buffer(s.length);
  var state = &#x27;CHAR&#x27;; // states: CHAR, HEX0, HEX1
  var n, m, hexchar;

  for (var inIndex = 0, outIndex = 0; inIndex &#x3c;= s.length; inIndex++) {
    var c = s.charCodeAt(inIndex);
    switch (state) {
      case &#x27;CHAR&#x27;:
        switch (c) {
          case charCode(&#x27;%&#x27;):
            n = 0;
            m = 0;
            state = &#x27;HEX0&#x27;;
            break;
          case charCode(&#x27;+&#x27;):
            if (decodeSpaces) c = charCode(&#x27; &#x27;);
            // pass thru
          default:
            out[outIndex++] = c;
            break;
        }
        break;

      case &#x27;HEX0&#x27;:
        state = &#x27;HEX1&#x27;;
        hexchar = c;
        if (charCode(&#x27;0&#x27;) &#x3c;= c &#x26;&#x26; c &#x3c;= charCode(&#x27;9&#x27;)) {
          n = c - charCode(&#x27;0&#x27;);
        } else if (charCode(&#x27;a&#x27;) &#x3c;= c &#x26;&#x26; c &#x3c;= charCode(&#x27;f&#x27;)) {
          n = c - charCode(&#x27;a&#x27;) + 10;
        } else if (charCode(&#x27;A&#x27;) &#x3c;= c &#x26;&#x26; c &#x3c;= charCode(&#x27;F&#x27;)) {
          n = c - charCode(&#x27;A&#x27;) + 10;
        } else {
          out[outIndex++] = charCode(&#x27;%&#x27;);
          out[outIndex++] = c;
          state = &#x27;CHAR&#x27;;
          break;
        }
        break;

      case &#x27;HEX1&#x27;:
        state = &#x27;CHAR&#x27;;
        if (charCode(&#x27;0&#x27;) &#x3c;= c &#x26;&#x26; c &#x3c;= charCode(&#x27;9&#x27;)) {
          m = c - charCode(&#x27;0&#x27;);
        } else if (charCode(&#x27;a&#x27;) &#x3c;= c &#x26;&#x26; c &#x3c;= charCode(&#x27;f&#x27;)) {
          m = c - charCode(&#x27;a&#x27;) + 10;
        } else if (charCode(&#x27;A&#x27;) &#x3c;= c &#x26;&#x26; c &#x3c;= charCode(&#x27;F&#x27;)) {
          m = c - charCode(&#x27;A&#x27;) + 10;
        } else {
          out[outIndex++] = charCode(&#x27;%&#x27;);
          out[outIndex++] = hexchar;
          out[outIndex++] = c;
          break;
        }
        out[outIndex++] = 16 * n + m;
        break;
    }
  }

  // TODO support returning arbitrary buffers.

  return out.slice(0, outIndex - 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // TODO support returning arbitrary buffers.

  return out.slice(0, outIndex - 1);
};


QueryString.unescape = function(s, decodeSpaces) {
  return QueryString.<span class="apidocCodeKeywordSpan">unescapeBuffer</span>(s, decodeSpaces).toString();
};


QueryString.escape = function(str) {
  return encodeURIComponent(str);
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.redirects" id="apidoc.module.phantomas.redirects">module phantomas.redirects</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.redirects.module" id="apidoc.element.phantomas.redirects.module">
        function <span class="apidocSignatureSpan">phantomas.redirects.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;redirects&#x27;); // @desc number of HTTP redirects (either 301, 302 or 303)
	phantomas.setMetric(&#x27;redirectsTime&#x27;); // @desc time it took to send and receive redirects

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		if (entry.isRedirect) {
			phantomas.incrMetric(&#x27;redirects&#x27;);
			phantomas.incrMetric(&#x27;redirectsTime&#x27;, entry.timeToLastByte);

			phantomas.addOffender(&#x27;redirects&#x27;, entry.url + &#x27; is a redirect (HTTP &#x27; + entry.status + &#x27; &#x27; + entry.statusText + &#x27;) &#x27; +
				&#x27;to &#x27; + (res.redirectURL || entry.headers.Location) + &#x27; (took &#x27; + entry.timeToLastByte + &#x27; ms)&#x27;);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.repaints" id="apidoc.module.phantomas.repaints">module phantomas.repaints</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.repaints.module" id="apidoc.element.phantomas.repaints.module">
        function <span class="apidocSignatureSpan">phantomas.repaints.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;repaints&#x27;); // @desc number of repaints of the current document @gecko
	phantomas.setMetric(&#x27;firstPaint&#x27;); // @desc time it took to perform the first paint @gecko @unreliable

	phantomas.on(&#x27;init&#x27;, function() {
		phantomas.evaluate(function() {
			(function(phantomas) {
				// feature detection
				if (typeof window.mozPaintCount === &#x27;undefined&#x27;) {
					phantomas.log(&#x27;repaints: window.mozPaintCount not available!&#x27;);
					return;
				}

				var lastPaintCountValue = 0,
					INTERVAL = 50;

				phantomas.log(&#x27;repaints: the initial value is %j, polling every %d ms&#x27;, window.mozPaintCount, INTERVAL);

				setInterval(function() {
					if (window.mozPaintCount &#x3e; lastPaintCountValue) {
						if (lastPaintCountValue === 0) {
							phantomas.emit(&#x27;firstPaint&#x27;); // @desc fired on the first paint @desc
							phantomas.emit(&#x27;milestone&#x27;, &#x27;firstPaint&#x27;);
						}

						lastPaintCountValue = window.mozPaintCount;
						phantomas.emit(&#x27;paint&#x27;, lastPaintCountValue); // @desc fired each time the document is painted @gecko
					}
				}, INTERVAL);
			})(window.__phantomas);
		});
	});

	phantomas.on(&#x27;firstPaint&#x27;, function() {
		phantomas.setMarkerMetric(&#x27;firstPaint&#x27;);
	});

	phantomas.on(&#x27;paint&#x27;, function(count) {
		phantomas.log(&#x27;repaints: %d so far&#x27;, count);
		phantomas.setMetric(&#x27;repaints&#x27;, count);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.requestsMonitor" id="apidoc.module.phantomas.requestsMonitor">module phantomas.requestsMonitor</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.requestsMonitor.module" id="apidoc.element.phantomas.requestsMonitor.module">
        function <span class="apidocSignatureSpan">phantomas.requestsMonitor.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// imports
	var HTTP_STATUS_CODES = phantomas.require(&#x27;http&#x27;).STATUS_CODES,
		parseUrl = phantomas.require(&#x27;url&#x27;).parse;

	var requests = [];

	// register metric
	phantomas.setMetric(&#x27;requests&#x27;);              // @desc total number of HTTP requests made
	phantomas.setMetric(&#x27;gzipRequests&#x27;);          // @desc number of gzipped HTTP responses @unreliable
	phantomas.setMetric(&#x27;postRequests&#x27;);          // @desc number of POST requests
	phantomas.setMetric(&#x27;httpsRequests&#x27;);         // @desc number of HTTPS requests
	phantomas.setMetric(&#x27;notFound&#x27;);              // @desc number of HTTP 404 responses
	phantomas.setMetric(&#x27;bodySize&#x27;);              // @desc size of the uncompressed content of all responses @unreliable
	phantomas.setMetric(&#x27;contentLength&#x27;);         // @desc size of the content of all responses (based on Content-Length header) @unreliable
	phantomas.setMetric(&#x27;httpTrafficCompleted&#x27;);  // @desc time it took to receive the last byte of the last HTTP response

	// parse given URL to get protocol and domain
	function parseEntryUrl(entry) {
		var parsed;

		if (entry.url.indexOf(&#x27;data:&#x27;) !== 0) {
			// @see http://nodejs.org/api/url.html#url_url
			parsed = parseUrl(entry.url) || {};

			entry.protocol = parsed.protocol.replace(&#x27;:&#x27;, &#x27;&#x27;);
			entry.domain = parsed.hostname;
			entry.query = parsed.query;

			if (entry.protocol === &#x27;https&#x27;) {
				entry.isSSL = true;
			}
		}
		else {
			// base64 encoded data
			entry.domain = false;
			entry.protocol = false;
			entry.isBase64 = true;
		}
	}

	phantomas.on(&#x27;onResourceRequested&#x27;, function(res, request) {
		// store current request data
		var entry = requests[res.id] = {
			id: res.id,
			url: res.url,
			method: res.method,
			requestHeaders: {},
			sendTime: res.time,
			bodySize: 0,
			isBlocked: false
		};

		// allow modules to block requests
		entry.block = function() {
			this.isBlocked = true;
		};

		res.headers.forEach(function(header) {
			entry.requestHeaders[header.name] = header.value;
		});

		parseEntryUrl(entry);

		if (entry.isBase64) {
			return;
		}

		// give modules a chance to block requests using entry.block()
		// @see https://github.com/ariya/phantomjs/issues/10230
		phantomas.emitInternal(&#x27;beforeSend&#x27;, entry, res); // @desc allows the request to be blocked

		if ( (entry.isBlocked === true) &#x26;&#x26; (typeof request !== &#x27;undefined&#x27;) ) {
			phantomas.log(&#x27;Blocked request: &#x3c;&#x27; + entry.url + &#x27;&#x3e;&#x27;);
			request.abort();
			return;
		}

		phantomas.log(&#x27;req: &#x3c;%s&#x3e;&#x27;, entry.url);

		phantomas.emit(&#x27;send&#x27;, entry, res); // @desc request has been sent
	});

	phantomas.on(&#x27;onResourceReceived&#x27;, function(res) {
		// current request data
		var entry = requests[res.id] || {};

		// fix for blocked requests still &#x22;emitting&#x22; onResourceReceived with &#x22;stage&#x22; = &#x27;end&#x27; and empty &#x22;status&#x22; (issue #122)
		// or empty URL (broken in PhantomJS 2.0.1 (PR #573)
		if (res.status === null || res.url === &#x27;&#x27; ) {
			if (entry.isBlocked) {
				return;
			} else if (!entry.isBase64) {
				phantomas.log(&#x27;Got a response with no status or URL set: &#x3c;%s&#x3e; (%j)&#x27;, res.url, res);
				phantomas.emitInternal(&#x27;abort&#x27;, entry, res); // @desc request has been blocked
			}
		}

		switch(res.stage) {
			// the beginning of response
			case &#x27;start&#x27;:
				entry.recvStartTime = res.time;
				entry.timeToFirstByte = res.time - entry.sendTime;

				// FIXME: buggy
				// @see https://github.com/ariya/phantomjs/issues/10169
				entry.bodySize = res.bodySize || 0;
				break;

			// the end of response
			case &#x27;end&#x27;:
				// SlimerJS sets res.bodySize at stage = end
				entry.bodySize = entry.bodySize || res.bodySize;

				// timing
				entry.recvEndTime = res.time;
				entry.timeToLastByte = res.time - entry.sendTime;
				entry.receiveTime = entry.recvEndTime - entry.recvStartTime;

				// issue #295
				if (typeof entry.recvStartTime === &#x27;undefined&#x27;) {
					phantomas.log(&#x27;recv: &#x22;start&#x22; stage not registered for &#x3c;%s&#x3e;!&#x27;, res.url);
					entry.receiveTime = entry.recvEndTime - entry.sendTime;
				}

				// request method
				switch(entry.method) {
					case &#x27;POST&#x27;:
						phantomas.incrMetric(&#x27;postRe ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.requestsStats" id="apidoc.module.phantomas.requestsStats">module phantomas.requestsStats</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.requestsStats.module" id="apidoc.element.phantomas.requestsStats.module">
        function <span class="apidocSignatureSpan">phantomas.requestsStats.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var stack = {};

	// adds given entry under the &#x22;type&#x22; if given check function returns true
	function pushToStack(type, entry, check) {
		// no entry of given type
		if (typeof stack[type] === &#x27;undefined&#x27;) {
			stack[type] = entry;
		}
		// apply check function
		else if (check(stack[type], entry) === true) {
			stack[type] = entry;
		}
	}

	function getFromStack(type) {
		return stack[type];
	}

	var responseTimes = new Stats(),
		latencyTimes = new Stats();

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		// ignore anything different than HTTP 200
		if (entry.status !== 200) {
			return;
		}

		// size
		pushToStack(&#x27;smallestResponse&#x27;, entry, function(stack, entry) {
			return stack.contentLength &#x3e; entry.contentLength;
		});

		pushToStack(&#x27;biggestResponse&#x27;, entry, function(stack, entry) {
			return stack.contentLength &#x3c; entry.contentLength;
		});

		// time (from sent to last byte)
		pushToStack(&#x27;fastestResponse&#x27;, entry, function(stack, entry) {
			return stack.timeToLastByte &#x3e; entry.timeToLastByte;
		});

		pushToStack(&#x27;slowestResponse&#x27;, entry, function(stack, entry) {
			return stack.timeToLastByte &#x3c; entry.timeToLastByte;
		});

		// latency
		pushToStack(&#x27;smallestLatency&#x27;, entry, function(stack, entry) {
			return stack.timeToFirstByte &#x3e; entry.timeToFirstByte;
		});

		pushToStack(&#x27;biggestLatency&#x27;, entry, function(stack, entry) {
			return stack.timeToFirstByte &#x3c; entry.timeToFirstByte;
		});

		// stats
		responseTimes.push(entry.timeToLastByte);
		latencyTimes.push(entry.timeToFirstByte);
	});

	phantomas.on(&#x27;report&#x27;, function() {
		var entries = Object.keys(stack).length;

		if (entries === 0) {
			phantomas.log(&#x27;requestsStats: no requests data gathered!&#x27;);
			return;
		}

		// set metrics and provide offenders with URLs
		[
			&#x27;smallestResponse&#x27;,
			&#x27;biggestResponse&#x27;,
			&#x27;fastestResponse&#x27;,
			&#x27;slowestResponse&#x27;,
			&#x27;smallestLatency&#x27;,
			&#x27;biggestLatency&#x27;
		].forEach(function(metric) {
			var entry = getFromStack(metric),
				details = &#x27;&#x27;;

			switch (metric) {
				case &#x27;smallestResponse&#x27;:
				case &#x27;biggestResponse&#x27;:
					phantomas.setMetric(metric, entry.contentLength);
					details = (entry.contentLength / 1024).toFixed(2) + &#x27; kB&#x27;;
					break;

				case &#x27;fastestResponse&#x27;:
				case &#x27;slowestResponse&#x27;:
					phantomas.setMetric(metric, entry.timeToLastByte);
					details = entry.timeToLastByte + &#x27; ms&#x27;;
					break;

				case &#x27;smallestLatency&#x27;:
				case &#x27;biggestLatency&#x27;:
					phantomas.setMetric(metric, entry.timeToFirstByte);
					details = entry.timeToFirstByte + &#x27; ms&#x27;;
					break;
			}

			phantomas.addOffender(metric, entry.url + &#x27; (&#x27; + details + &#x27;)&#x27;);
		});

		phantomas.setMetric(&#x27;medianResponse&#x27;, responseTimes.median());
		phantomas.setMetric(&#x27;medianLatency&#x27;, latencyTimes.median());
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.requestsTo" id="apidoc.module.phantomas.requestsTo">module phantomas.requestsTo</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.requestsTo.module" id="apidoc.element.phantomas.requestsTo.module">
        function <span class="apidocSignatureSpan">phantomas.requestsTo.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	phantomas.setMetric(&#x27;requestsToFirstPaint&#x27;); // @desc number of HTTP requests it took to make the first paint @gecko
	phantomas.setMetric(&#x27;domainsToFirstPaint&#x27;); // @desc number of domains used to make the first paint @offenders @gecko @offenders
	phantomas.setMetric(&#x27;requestsToDomContentLoaded&#x27;); // @desc number of HTTP requests it took to make the page reach DomContentLoaded
 state
	phantomas.setMetric(&#x27;domainsToDomContentLoaded&#x27;); // @desc number of domains used to make the page reach DomContentLoaded state
 @offenders
	phantomas.setMetric(&#x27;requestsToDomComplete&#x27;); // @desc number of HTTP requests it took to make the page reach DomComplete state
	phantomas.setMetric(&#x27;domainsToDomComplete&#x27;); // @desc number of domains used to make the page reach DomComplete state @offenders

	var Collection = require(&#x27;../../lib/collection&#x27;),
		domains = new Collection(),
		requests = 0;

	function setDomainMetric(metricName) {
		phantomas.setMetric(metricName, domains.getLength());
		domains.sort().forEach(function(domain, cnt) {
			phantomas.addOffender(metricName, &#x27;%s (%d requests)&#x27;, domain, cnt);
		});
	}

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		//phantomas.log(&#x27;requestsTo: #%d &#x3c;%s&#x3e; / %s&#x27;, requests, entry.url, entry.domain);

		requests++;

		if (entry.domain) {
			domains.push(entry.domain);
		}
	});

	phantomas.on(&#x27;milestone&#x27;, function(name) {
		//phantomas.log(&#x27;requestsTo: %s (after %d requests)&#x27;, name, requests);

		switch (name) {
			case &#x27;firstPaint&#x27;:
				phantomas.setMetric(&#x27;requestsToFirstPaint&#x27;, requests);
				setDomainMetric(&#x27;domainsToFirstPaint&#x27;);
				break;

			case &#x27;domInteractive&#x27;:
				phantomas.setMetric(&#x27;requestsToDomContentLoaded&#x27;, requests);
				setDomainMetric(&#x27;domainsToDomContentLoaded&#x27;);
				break;

			case &#x27;domComplete&#x27;:
				phantomas.setMetric(&#x27;requestsToDomComplete&#x27;, requests);
				setDomainMetric(&#x27;domainsToDomComplete&#x27;);
				break;
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.screenshot" id="apidoc.module.phantomas.screenshot">module phantomas.screenshot</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.screenshot.module" id="apidoc.element.phantomas.screenshot.module">
        function <span class="apidocSignatureSpan">phantomas.screenshot.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var param = phantomas.getParam(&#x27;screenshot&#x27;),
		path = &#x27;&#x27;;

	if (typeof param === &#x27;undefined&#x27;) {
		phantomas.log(&#x27;Screenshot: to enable screenshot of the fully loaded page run phantomas with --screenshot option&#x27;);
		return;
	}

	// --screenshot
	if (param === true) {
		// defaults to &#x22;2013-12-07T20:15:01.521Z.png&#x22;
		path = (new Date()).toJSON().
		replace(/:/g, &#x27;-&#x27;); // be M$ Windows compatible (issue #454)

		path += &#x27;.png&#x27;;
	}
	// --screenshot [file name]
	else {
		path = param;
	}

	phantomas.on(&#x27;report&#x27;, function() {
		var then = Date.now(),
			time;

		phantomas.render(path);

		time = Date.now() - then;

		phantomas.log(&#x27;Screenshot: rendered to %s in %d ms&#x27;, path, time);
		phantomas.emit(&#x27;screenshot&#x27;, path, time);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.scroll" id="apidoc.module.phantomas.scroll">module phantomas.scroll</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.scroll.module" id="apidoc.element.phantomas.scroll.module">
        function <span class="apidocSignatureSpan">phantomas.scroll.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var scroll = phantomas.getParam(&#x27;scroll&#x27;) === true;

	if (!scroll) {
		phantomas.log(&#x27;Scroll: pass --scroll option to scroll down the page when it\&#x27;s loaded&#x27;);
		return;
	}

	phantomas.log(&#x27;Scroll: the page will be scrolled down when loaded&#x27;);

	phantomas.reportQueuePush(function(done) {
		phantomas.on(&#x27;loadFinished&#x27;, function() {
			phantomas.evaluate(function() {
				(function(phantomas) {
					phantomas.log(&#x27;Scroll: scrolling the page down...&#x27;);
					document.body.scrollIntoView(false);

					var offset = document.body.scrollTop;
					phantomas.log(&#x27;Scroll: scroll offset is %d px&#x27;, offset);
				})(window.__phantomas);
			});

			// wait for lazy loading to do its job
			setTimeout(done, 250);
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.staticAssets" id="apidoc.module.phantomas.staticAssets">module phantomas.staticAssets</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.staticAssets.module" id="apidoc.element.phantomas.staticAssets.module">
        function <span class="apidocSignatureSpan">phantomas.staticAssets.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var SIZE_THRESHOLD = 2 * 1024;

	// count requests for each asset
	var Collection = require(&#x27;../../lib/collection&#x27;),
		assetsReqCounter = new Collection(),
		cookieDomains = new Collection(),
		// TODO: use 3pc database with tracking services
		trackingUrls = /google-analytics.com\/__utm.gif|pixel.quantserve.com\/pixel/;

	phantomas.setMetric(&#x27;assetsNotGzipped&#x27;); // @desc number of static assets that were not gzipped @unreliable
	phantomas.setMetric(&#x27;assetsWithQueryString&#x27;); // @desc number of static assets requested with query string (e.g. ?foo) in URL
	phantomas.setMetric(&#x27;assetsWithCookies&#x27;); // @desc number of static assets requested from domains with cookie set
	phantomas.setMetric(&#x27;smallImages&#x27;); // @desc number of images smaller than 2 KiB that can be base64 encoded @unreliable
	phantomas.setMetric(&#x27;smallCssFiles&#x27;); // @desc number of CSS assets smaller than 2 KiB that can be inlined or merged @unreliable
	phantomas.setMetric(&#x27;smallJsFiles&#x27;); // @desc number of JS assets smaller than 2 KiB that can be inlined or merged @unreliable
	phantomas.setMetric(&#x27;multipleRequests&#x27;); // @desc number of static assets that are requested more than once

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var isContent = (entry.status === 200),
			sizeFormatted;

		// mark domains with cookie set
		if (entry.hasCookies) {
			cookieDomains.push(entry.domain);
		}

		// skip tracking requests
		if (trackingUrls.test(entry.url)) {
			return;
		}

		// check for query string -&#x3e; foo.css?123
		if (entry.isImage || entry.isJS || entry.isCSS) {
			if (entry.url.indexOf(&#x27;?&#x27;) &#x3e; -1) {
				phantomas.incrMetric(&#x27;assetsWithQueryString&#x27;);
				phantomas.addOffender(&#x27;assetsWithQueryString&#x27;, entry.url + &#x27; (&#x27; + entry.type.toUpperCase() + &#x27;)&#x27;);
			}
		}

		// check for not-gzipped assets (issue #515)
		if (entry.isJS || entry.isCSS || entry.isHTML || entry.isJSON || entry.isSVG || entry.isTTF || entry.isXML || entry.isFavicon) {
			if (!entry.gzip &#x26;&#x26; isContent) {
				phantomas.incrMetric(&#x27;assetsNotGzipped&#x27;);
				phantomas.addOffender(&#x27;assetsNotGzipped&#x27;, entry.url + &#x27; (&#x27; + entry.type.toUpperCase() + &#x27;)&#x27;);
			}
		}

		// small assets can be inlined
		if (entry.contentLength &#x3c; SIZE_THRESHOLD) {
			sizeFormatted = (entry.contentLength / 1024).toFixed(2);

			// check small images that can be base64 encoded
			if (entry.isImage) {
				phantomas.incrMetric(&#x27;smallImages&#x27;);
				phantomas.addOffender(&#x27;smallImages&#x27;, &#x27;%s (%s kB)&#x27;, entry.url, sizeFormatted);
			}
			// CSS / JS that can be inlined
			else if (entry.isCSS) {
				phantomas.incrMetric(&#x27;smallCssFiles&#x27;);
				phantomas.addOffender(&#x27;smallCssFiles&#x27;, &#x27;%s (%s kB)&#x27;, entry.url, sizeFormatted);
			} else if (entry.isJS) {
				phantomas.incrMetric(&#x27;smallJsFiles&#x27;);
				phantomas.addOffender(&#x27;smallJsFiles&#x27;, &#x27;%s (%s kB)&#x27;, entry.url, sizeFormatted);
			}
		}

		if (entry.isImage || entry.isJS || entry.isCSS) {
			// count number of requests to each asset
			assetsReqCounter.push(entry.url);

			// count static assets requested from domains with cookie set
			if (cookieDomains.has(entry.domain)) {
				phantomas.incrMetric(&#x27;assetsWithCookies&#x27;);
				phantomas.addOffender(&#x27;assetsWithCookies&#x27;, &#x27;%s (%s)&#x27;, entry.url, entry.type.toUpperCase());
			}
		}
	});

	phantomas.on(&#x27;report&#x27;, function() {
		assetsReqCounter.forEach(function(asset, cnt) {
			if (cnt &#x3e; 1) {
				phantomas.incrMetric(&#x27;multipleRequests&#x27;);
				phantomas.addOffender(&#x27;multipleRequests&#x27;, asset);
			}
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.stats" id="apidoc.module.phantomas.stats">module phantomas.stats</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.stats.stats" id="apidoc.element.phantomas.stats.stats">
        function <span class="apidocSignatureSpan">phantomas.</span>stats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function stats() {
	<span class="apidocCodeCommentSpan">/* jshint validthis: true */
</span>	// use pushMetrics() to add results for each run
	this.metrics = [];
	this.runs = 0;

	// stats to be calculated
	// @see https://github.com/bluesmoon/node-faststats
	this.stats = {
		min: function(values) {
			return values.range()[0];
		},
		max: function(values) {
			return values.range()[1];
		},
		average: function(values) {
			return values.amean().toFixed(2);
		},
		median: function(values) {
			return values.median().toFixed(2);
		},
		stddev: function(values) {
			return values.stddev().toFixed(2);
		}
	};

	this.statsNames = Object.keys(this.stats);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.stats.prototype" id="apidoc.module.phantomas.stats.prototype">module phantomas.stats.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.getAvailableStats" id="apidoc.element.phantomas.stats.prototype.getAvailableStats">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getAvailableStats
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAvailableStats = function () {
	return this.statsNames;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		if (typeof value === &#x27;number&#x27;) {
			values.push(this.metrics[i][metricName]);
		}
	}

	// apply stats functions
	this.<span class="apidocCodeKeywordSpan">getAvailableStats</span>().forEach(function(fnName) {
		stats[fnName] = parseFloat(this.stats[fnName](values));
	}, this);

	return stats;
};

stats.prototype.getAvailableStats = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.getMetricStats" id="apidoc.element.phantomas.stats.prototype.getMetricStats">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetricStats
        <span class="apidocSignatureSpan">(metricName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMetricStats = function (metricName) {
	var i,
		stats = {},
		value,
		values = new Stats();

	for (i = 0; i &#x3c; this.runs; i++) {
		value = this.metrics[i][metricName];

		if (typeof value === &#x27;number&#x27;) {
			values.push(this.metrics[i][metricName]);
		}
	}

	// apply stats functions
	this.getAvailableStats().forEach(function(fnName) {
		stats[fnName] = parseFloat(this.stats[fnName](values));
	}, this);

	return stats;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

				// generate metrics stats (issue #285)
				for (var i = 0, runs = results.length; i &#x3c; runs; i++) {
					stats.pushMetrics(results[i].getMetrics());
				}

				stats.getMetrics().forEach(function(metricName) {
					res.stats[metricName] = stats.<span class="apidocCodeKeywordSpan">getMetricStats</span>(metricName);
				});
			}

			// -R json:pretty
			if (reporterOptions.pretty === true) {
				return JSON.stringify(res, null, 2);
			} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.getMetrics" id="apidoc.element.phantomas.stats.prototype.getMetrics">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>getMetrics
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMetrics = function () {
	if (this.runs &#x3e; 0) {
		return Object.keys(this.metrics[0]);
	} else {
		return [];
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
&#x27;use strict&#x27;;

module.exports = function(results) {
	var res = {
		generator: results.getGenerator(),
		url: results.getUrl(),
		metrics: results.<span class="apidocCodeKeywordSpan">getMetrics</span>(),
		offenders: results.getAllOffenders(),
		asserts: false
	};

	// add asserts
	var asserts = results.getAsserts();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.stats.prototype.pushMetrics" id="apidoc.element.phantomas.stats.prototype.pushMetrics">
        function <span class="apidocSignatureSpan">phantomas.stats.prototype.</span>pushMetrics
        <span class="apidocSignatureSpan">(metrics)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pushMetrics = function (metrics) {
	this.metrics.push(metrics);
	this.runs++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						return formatSingleRunResults(run);
					}),
					stats: {}
				};

				// generate metrics stats (issue #285)
				for (var i = 0, runs = results.length; i &#x3c; runs; i++) {
					stats.<span class="apidocCodeKeywordSpan">pushMetrics</span>(results[i].getMetrics());
				}

				stats.getMetrics().forEach(function(metricName) {
					res.stats[metricName] = stats.getMetricStats(metricName);
				});
			}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.timeToFirst" id="apidoc.module.phantomas.timeToFirst">module phantomas.timeToFirst</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.timeToFirst.module" id="apidoc.element.phantomas.timeToFirst.module">
        function <span class="apidocSignatureSpan">phantomas.timeToFirst.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	function capitalize(txt) {
		return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
	}

	var types = [&#x27;css&#x27;, &#x27;js&#x27;, &#x27;image&#x27;],
		hasReceived = {},
		timestampStart;

	// init metrics
	types.forEach(function(key) {
		phantomas.setMetric(&#x27;timeToFirst&#x27; + capitalize(key));
	});

	// register the timestamp when the request for the page was sent
	phantomas.on(&#x27;pageOpen&#x27;, function() {
		timestampStart = Date.now();
	});

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		var type = entry.type,
			time = 0,
			metricName = &#x27;&#x27;;

		// report only the first asset of supported type
		if ((types.indexOf(type) === -1) || (hasReceived[type] === true)) {
			return;
		}

		// calculate relative timestamp
		time = Date.now() - timestampStart;

		metricName = &#x27;timeToFirst&#x27; + capitalize(type);

		phantomas.setMetric(metricName, time);
		phantomas.addOffender(metricName, entry.url + &#x27; received in &#x27; + time + &#x27; ms&#x27;);

		// set the flag
		hasReceived[type] = true;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.timeToFirstByte" id="apidoc.module.phantomas.timeToFirstByte">module phantomas.timeToFirstByte</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.timeToFirstByte.module" id="apidoc.element.phantomas.timeToFirstByte.module">
        function <span class="apidocSignatureSpan">phantomas.timeToFirstByte.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	var measured = false,
		reqId = 1; // request ID to consider when calculating TTFB / TTLB

	phantomas.setMetric(&#x27;timeToFirstByte&#x27;); // @desc time it took to receive the first byte of the first response (that was not a redirect
)
	phantomas.setMetric(&#x27;timeToLastByte&#x27;); // @desc time it took to receive the last byte of the first response (that was not a redirect
)

	phantomas.on(&#x27;recv&#x27;, function(entry, res) {
		// metrics already calculated
		if (measured) {
			return;
		}

		if (entry.isRedirect) {
			// wait for the next request
			reqId = entry.id + 1;

			phantomas.log(&#x27;Time to first byte: response #%d &#x3c;%s&#x3e; is a redirect (waiting for response #%d)&#x27;, entry.id, entry.url, reqId);
			return;
		}

		// check the first response which is not a redirect (issue #74)
		if (entry.id === reqId) {
			phantomas.setMetric(&#x27;timeToFirstByte&#x27;, entry.timeToFirstByte, true);
			phantomas.setMetric(&#x27;timeToLastByte&#x27;, entry.timeToLastByte, true);

			measured = true;

			phantomas.log(&#x27;Time to first byte: set to %d ms for #%d request to &#x3c;%s&#x3e; (HTTP %d)&#x27;, entry.timeToFirstByte, entry.id, entry.url
, entry.status);
			phantomas.log(&#x27;Time to last byte: set to %d ms&#x27;, entry.timeToLastByte);

			phantomas.emitInternal(&#x27;responseEnd&#x27;, entry, res); // @desc the first response (that was not a redirect) fully received
			phantomas.emit(&#x27;milestone&#x27;, &#x27;responseEnd&#x27;);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.tty" id="apidoc.module.phantomas.tty">module phantomas.tty</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.tty.getWindowSize" id="apidoc.element.phantomas.tty.getWindowSize">
        function <span class="apidocSignatureSpan">phantomas.tty.</span>getWindowSize
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getWindowSize = function (){
  return [window.innerHeight, window.innerWidth];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.tty.isatty" id="apidoc.element.phantomas.tty.isatty">
        function <span class="apidocSignatureSpan">phantomas.tty.</span>isatty
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isatty = function (){
  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.url" id="apidoc.module.phantomas.url">module phantomas.url</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.url.format" id="apidoc.element.phantomas.url.format">
        function <span class="apidocSignatureSpan">phantomas.url.</span>format
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlFormat(obj) {
  // ensure it&#x27;s an object, and not a string url.
  // If it&#x27;s an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (typeof(obj) === &#x27;string&#x27;) obj = urlParse(obj);

  var auth = obj.auth || &#x27;&#x27;;
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, &#x27;:&#x27;);
    auth += &#x27;@&#x27;;
  }

  var protocol = obj.protocol || &#x27;&#x27;,
      pathname = obj.pathname || &#x27;&#x27;,
      hash = obj.hash || &#x27;&#x27;,
      host = false,
      query = &#x27;&#x27;;

  if (obj.host !== undefined) {
    host = auth + obj.host;
  } else if (obj.hostname !== undefined) {
    host = auth + (obj.hostname.indexOf(&#x27;:&#x27;) === -1 ?
        obj.hostname :
        &#x27;[&#x27; + obj.hostname + &#x27;]&#x27;);
    if (obj.port) {
      host += &#x27;:&#x27; + obj.port;
    }
  }

  if (obj.query &#x26;&#x26; typeof obj.query === &#x27;object&#x27; &#x26;&#x26;
      Object.keys(obj.query).length) {
    query = querystring.stringify(obj.query);
  }

  var search = obj.search || (query &#x26;&#x26; (&#x27;?&#x27; + query)) || &#x27;&#x27;;

  if (protocol &#x26;&#x26; protocol.substr(-1) !== &#x27;:&#x27;) protocol += &#x27;:&#x27;;

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (obj.slashes ||
      (!protocol || slashedProtocol[protocol]) &#x26;&#x26; host !== false) {
    host = &#x27;//&#x27; + (host || &#x27;&#x27;);
    if (pathname &#x26;&#x26; pathname.charAt(0) !== &#x27;/&#x27;) pathname = &#x27;/&#x27; + pathname;
  } else if (!host) {
    host = &#x27;&#x27;;
  }

  if (hash &#x26;&#x26; hash.charAt(0) !== &#x27;#&#x27;) hash = &#x27;#&#x27; + hash;
  if (search &#x26;&#x26; search.charAt(0) !== &#x27;?&#x27;) search = &#x27;?&#x27; + search;

  return protocol + host + pathname + search + hash;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (now - lastScreenshot &#x3c; SCREENSHOTS_MIN_INTERVAL) {
			//phantomas.log(&#x27;Film strip: skipped&#x27;);
			return;
		}

		// time offset excluding time it took to render screenshots
		ts = ts || (now - start - timeTotal);
		path = util.<span class="apidocCodeKeywordSpan">format</span>(&#x27;%s/%s-%s-%d.png&#x27;, filmStripOutputDir, filmStripPrefix
, startFormatted, ts);

		phantomas.render(path);
		lastScreenshot = Date.now();

		// verify that the screnshot was really taken
		if (fs.isReadable(path)) {
			phantomas.log(&#x27;Film strip: rendered to %s in %d ms&#x27;, path, Date.now() - now);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.url.parse" id="apidoc.element.phantomas.url.parse">
        function <span class="apidocSignatureSpan">phantomas.url.</span>parse
        <span class="apidocSignatureSpan">(url, parseQueryString, slashesDenoteHost)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url &#x26;&#x26; typeof(url) === &#x27;object&#x27; &#x26;&#x26; url.href) return url;

  if (typeof url !== &#x27;string&#x27;) {
    throw new TypeError(&#x22;Parameter &#x27;url&#x27; must be a string, not &#x22; + typeof url);
  }

  var out = {},
      rest = url;

  // trim before proceeding.
  // This is to support parse stuff like &#x22;  http://foo.com  \n&#x22;
  rest = rest.trim();

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    out.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it&#x27;s got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that&#x27;s
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === &#x27;//&#x27;;
    if (slashes &#x26;&#x26; !(proto &#x26;&#x26; hostlessProtocol[proto])) {
      rest = rest.substr(2);
      out.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &#x26;&#x26;
      (slashes || (proto &#x26;&#x26; !slashedProtocol[proto]))) {
    // there&#x27;s a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    // don&#x27;t enforce full RFC correctness, just be unstupid about it.

    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the first @ sign, unless some non-auth character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    var atSign = rest.indexOf(&#x27;@&#x27;);
    if (atSign !== -1) {
      var auth = rest.slice(0, atSign);

      // there *may be* an auth
      var hasAuth = true;
      for (var i = 0, l = nonAuthChars.length; i &#x3c; l; i++) {
        if (auth.indexOf(nonAuthChars[i]) !== -1) {
          // not a valid auth.  Something like http://foo.com/bar@baz/
          hasAuth = false;
          break;
        }
      }

      if (hasAuth) {
        // pluck off the auth portion.
        out.auth = decodeURIComponent(auth);
        rest = rest.substr(atSign + 1);
      }
    }

    var firstNonHost = -1;
    for (var i = 0, l = nonHostChars.length; i &#x3c; l; i++) {
      var index = rest.indexOf(nonHostChars[i]);
      if (index !== -1 &#x26;&#x26;
          (firstNonHost &#x3c; 0 || index &#x3c; firstNonHost)) firstNonHost = index;
    }

    if (firstNonHost !== -1) {
      out.host = rest.substr(0, firstNonHost);
      rest = rest.substr(firstNonHost);
    } else {
      out.host = rest;
      rest = &#x27;&#x27;;
    }

    // pull out port.
    var p = parseHost(out.host);
    var keys = Object.keys(p);
    for (var i = 0, l = keys.length; i &#x3c; l; i++) {
      var key = keys[i];
      out[key] = p[key];
    }

    // we&#x27;ve indicated that there is a hostname,
    // so even if it&#x27;s empty, it has to be present.
    out.hostname = out.hostname || &#x27;&#x27;;

    // if hostname begins with [ and ends with ]
    // assume that it&#x27;s an IPv6 address.
    var ipv6Hostname = out.hostname[0] === &#x27;[&#x27; &#x26;&#x26;
        out.hostname[out.hostname.length - 1] === &#x27;]&#x27;;

    // validate a little.
    if (out.hostname.length &#x3e; hostnameMaxLen) {
      out.hostname = &#x27;&#x27;;
    } else if (!ipv6Hostname) {
      var hostparts = out.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i &#x3c; l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = &#x27;&#x27;;
          for (var j = 0, k = part.length; j &#x3c; k; j++) {
            if (part.charCodeAt(j) &#x3e; 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += &#x27;x&#x27;;
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	.describe(&#x27;screenshot&#x27;, &#x27;render fully loaded page to a given file&#x27;)
	.describe(&#x27;silent&#x27;, &#x27;don\&#x27;t write anything to the console&#x27;).boolean(&#x27;silent&#x27;);

// handle --config (issue #209)
program.setConfigFile(&#x27;config&#x27;);

// parse it
options = program.<span class="apidocCodeKeywordSpan">parse</span>(process.argv);

// show version number
if (options.version === true) {
	console.log(&#x27;phantomas v%s&#x27;, phantomas.version);
	process.exit(0);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.url.resolve" id="apidoc.element.phantomas.url.resolve">
        function <span class="apidocSignatureSpan">phantomas.url.</span>resolve
        <span class="apidocSignatureSpan">(source, relative)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlResolve(source, relative) {
  return urlFormat(urlResolveObject(source, relative));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var result2 = splitTailRe.exec(tail),
    dir = result2[1] || &#x27;&#x27;,
    basename = result2[2] || &#x27;&#x27;,
    ext = result2[3] || &#x27;&#x27;;
return [device, dir, basename, ext];
  };

  // path.<span class="apidocCodeKeywordSpan">resolve</span>([from ...], to)
  // windows version
  exports.resolve = function() {
var resolvedDevice = &#x27;&#x27;,
    resolvedTail = &#x27;&#x27;,
    resolvedAbsolute = false;

for (var i = arguments.length - 1; i &#x3e;= -1; i--) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.url.resolveObject" id="apidoc.element.phantomas.url.resolveObject">
        function <span class="apidocSignatureSpan">phantomas.url.</span>resolveObject
        <span class="apidocSignatureSpan">(source, relative)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function urlResolveObject(source, relative) {
  if (!source) return relative;

  source = urlParse(urlFormat(source), false, true);
  relative = urlParse(urlFormat(relative), false, true);

  // hash is always overridden, no matter what.
  source.hash = relative.hash;

  if (relative.href === &#x27;&#x27;) {
    source.href = urlFormat(source);
    return source;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes &#x26;&#x26; !relative.protocol) {
    relative.protocol = source.protocol;
    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[relative.protocol] &#x26;&#x26;
        relative.hostname &#x26;&#x26; !relative.pathname) {
      relative.path = relative.pathname = &#x27;/&#x27;;
    }
    relative.href = urlFormat(relative);
    return relative;
  }

  if (relative.protocol &#x26;&#x26; relative.protocol !== source.protocol) {
    // if it&#x27;s a known url protocol, then changing
    // the protocol does weird things
    // first, if it&#x27;s not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that&#x27;s known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      relative.href = urlFormat(relative);
      return relative;
    }
    source.protocol = relative.protocol;
    if (!relative.host &#x26;&#x26; !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || &#x27;&#x27;).split(&#x27;/&#x27;);
      while (relPath.length &#x26;&#x26; !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = &#x27;&#x27;;
      if (!relative.hostname) relative.hostname = &#x27;&#x27;;
      if (relPath[0] !== &#x27;&#x27;) relPath.unshift(&#x27;&#x27;);
      if (relPath.length &#x3c; 2) relPath.unshift(&#x27;&#x27;);
      relative.pathname = relPath.join(&#x27;/&#x27;);
    }
    source.pathname = relative.pathname;
    source.search = relative.search;
    source.query = relative.query;
    source.host = relative.host || &#x27;&#x27;;
    source.auth = relative.auth;
    source.hostname = relative.hostname || relative.host;
    source.port = relative.port;
    //to support http.request
    if (source.pathname !== undefined || source.search !== undefined) {
      source.path = (source.pathname ? source.pathname : &#x27;&#x27;) +
                    (source.search ? source.search : &#x27;&#x27;);
    }
    source.slashes = source.slashes || relative.slashes;
    source.href = urlFormat(source);
    return source;
  }

  var isSourceAbs = (source.pathname &#x26;&#x26; source.pathname.charAt(0) === &#x27;/&#x27;),
      isRelAbs = (
          relative.host !== undefined ||
          relative.pathname &#x26;&#x26; relative.pathname.charAt(0) === &#x27;/&#x27;
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (source.host &#x26;&#x26; relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = source.pathname &#x26;&#x26; source.pathname.split(&#x27;/&#x27;) || [],
      relPath = relative.pathname &#x26;&#x26; relative.pathname.split(&#x27;/&#x27;) || [],
      psychotic = source.protocol &#x26;&#x26;
          !slashedProtocol[source.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // source.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {

    delete source.hostname;
    delete source.port;
    if (source.host) {
      if (srcPath[0] === &#x27;&#x27;) srcPath[0] = source.host;
      else srcPath.unshift(source.host);
    }
    delete source.host;
    if (relative.protocol) {
      delete relative.hostname;
      delete relative.port;
      if (relative.host) {
        if (relPath[0] === &#x27;&#x27;) relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      delete relative.host;
    }
    mustEndAbs = mustEndAbs &#x26;&#x26; (relPath[0] === &#x27;&#x27; || srcPath[0] === &#x27;&#x27;);
  }

  if (isRelAbs) {
    // it&#x27;s absolute.
    source.host = (relative.host || relative.host === &#x27;&#x27;) ?
                      relative.host : source.host;
    source.hostname = (relative.hostname || relative.hostname === &#x27;&#x27;) ?
                      r ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// just pull out the search.
// like href=&#x27;?foo&#x27;.
// Put this after the other two cases because it simplifies the booleans
if (psychotic) {
  source.hostname = source.host = srcPath.shift();
  //occationaly the auth can get stuck only in host
  //this especialy happens in cases like
  //url.<span class="apidocCodeKeywordSpan">resolveObject</span>(&#x27;mailto:local1@domain1&#x27;, &#x27;local2@domain2&#x27;)
  var authInHost = source.host &#x26;&#x26; source.host.indexOf(&#x27;@&#x27;) &#x3e; 0 ?
                   source.host.split(&#x27;@&#x27;) : false;
  if (authInHost) {
    source.auth = authInHost.shift();
    source.host = source.hostname = authInHost.shift();
  }
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.util" id="apidoc.module.phantomas.util">module phantomas.util</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.util.debug" id="apidoc.element.phantomas.util.debug">
        function <span class="apidocSignatureSpan">phantomas.util.</span>debug
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (x) {
  process.stderr.write(&#x27;DEBUG: &#x27; + x + &#x27;\n&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.error" id="apidoc.element.phantomas.util.error">
        function <span class="apidocSignatureSpan">phantomas.util.</span>error
        <span class="apidocSignatureSpan">(x)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (x) {
  for (var i = 0, len = arguments.length; i &#x3c; len; ++i) {
    process.stderr.write(arguments[i] + &#x27;\n&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      m = this._maxListeners;
    } else {
      m = defaultMaxListeners;
    }

    if (m &#x26;&#x26; m &#x3e; 0 &#x26;&#x26; this._events[type].length &#x3e; m) {
      this._events[type].warned = true;
      console.<span class="apidocCodeKeywordSpan">error</span>(&#x27;(node) warning: possible EventEmitter memory &#x27; +
                    &#x27;leak detected. %d listeners added. &#x27; +
                    &#x27;Use emitter.setMaxListeners() to increase limit.&#x27;,
                    this._events[type].length);
      console.trace();
    }
  }
} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.exec" id="apidoc.element.phantomas.util.exec">
        function <span class="apidocSignatureSpan">phantomas.util.</span>exec
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exec = function () {
  if (!execWarning) {
    execWarning = &#x27;util.exec has moved to the &#x22;child_process&#x22; module.&#x27; +
                  &#x27; Please update your source code.&#x27;;
    error(execWarning);
  }
  return require(&#x27;child_process&#x27;).exec.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		matches,
		moduleName,
		re = /(setMetric|setMetricEvaluate|incrMetric)\([&#x27;&#x22;]([^&#x27;&#x22;]+)[&#x27;&#x22;](\)|,)(.*@desc.*$)?/mg;

	moduleName = moduleFile.split(&#x27;/&#x27;).pop().replace(/\.js$/, &#x27;&#x27;);

	// scan the source code
	while ((matches = re.<span class="apidocCodeKeywordSpan">exec</span>(content)) !== null) {
		var entry = {},
			metricName = matches[2],
			metricComment = matches[4],
			metricUnit = &#x27;ms&#x27;,
			hasDesc = (metricComment &#x26;&#x26; metricComment.indexOf(&#x27;@desc&#x27;) &#x3e; -1);

		if (typeof data.metrics[metricName] !== &#x27;undefined&#x27;) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.format" id="apidoc.element.phantomas.util.format">
        function <span class="apidocSignatureSpan">phantomas.util.</span>format
        <span class="apidocSignatureSpan">(f)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">format = function (f) {
  if (typeof f !== &#x27;string&#x27;) {
    var objects = [];
    for (var i = 0; i &#x3c; arguments.length; i++) {
      objects.push(inspect(arguments[i]));
    }
    return objects.join(&#x27; &#x27;);
  }

  var i = 1;
  var args = arguments;
  var len = args.length;
  var str = String(f).replace(formatRegExp, function(x) {
    if (i &#x3e;= len) return x;
    switch (x) {
      case &#x27;%s&#x27;: return String(args[i++]);
      case &#x27;%d&#x27;: return Number(args[i++]);
      case &#x27;%j&#x27;: return JSON.stringify(args[i++]);
      case &#x27;%%&#x27;: return &#x27;%&#x27;;
      default:
        return x;
    }
  });
  for (var x = args[i]; i &#x3c; len; x = args[++i]) {
    if (x === null || typeof x !== &#x27;object&#x27;) {
      str += &#x27; &#x27; + x;
    } else {
      str += &#x27; &#x27; + inspect(x);
    }
  }
  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (now - lastScreenshot &#x3c; SCREENSHOTS_MIN_INTERVAL) {
			//phantomas.log(&#x27;Film strip: skipped&#x27;);
			return;
		}

		// time offset excluding time it took to render screenshots
		ts = ts || (now - start - timeTotal);
		path = util.<span class="apidocCodeKeywordSpan">format</span>(&#x27;%s/%s-%s-%d.png&#x27;, filmStripOutputDir, filmStripPrefix
, startFormatted, ts);

		phantomas.render(path);
		lastScreenshot = Date.now();

		// verify that the screnshot was really taken
		if (fs.isReadable(path)) {
			phantomas.log(&#x27;Film strip: rendered to %s in %d ms&#x27;, path, Date.now() - now);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.inherits" id="apidoc.element.phantomas.util.inherits">
        function <span class="apidocSignatureSpan">phantomas.util.</span>inherits
        <span class="apidocSignatureSpan">(ctor, superCtor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inherits = function (ctor, superCtor) {
  ctor.super_ = superCtor;
  ctor.prototype = Object.create(superCtor.prototype, {
    constructor: {
      value: ctor,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.operator = options.operator;
var stackStartFunction = options.stackStartFunction || fail;

if (Error.captureStackTrace) {
  Error.captureStackTrace(this, stackStartFunction);
}
};
util.<span class="apidocCodeKeywordSpan">inherits</span>(assert.AssertionError, Error);

function replacer(key, value) {
if (value === undefined) {
  return &#x27;&#x27; + value;
}
if (typeof value === &#x27;number&#x27; &#x26;&#x26; (isNaN(value) || !isFinite(value))) {
  return value.toString();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.inspect" id="apidoc.element.phantomas.util.inspect">
        function <span class="apidocSignatureSpan">phantomas.util.</span>inspect
        <span class="apidocSignatureSpan">(obj, showHidden, depth, colors)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function inspect(obj, showHidden, depth, colors) {
  var ctx = {
    showHidden: showHidden,
    seen: [],
    stylize: colors ? stylizeWithColor : stylizeNoColor
  };
  return formatValue(ctx, obj, (typeof depth === &#x27;undefined&#x27; ? 2 : depth));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Provide a hook for user-specified inspect functions.
// Check that value is an object with an inspect function on it
if (value &#x26;&#x26; typeof value.inspect === &#x27;function&#x27; &#x26;&#x26;
    // Filter out the util module, it&#x27;s inspect function is special
    value !== exports &#x26;&#x26;
    // Also filter out any prototype objects using the circular check.
    !(value.constructor &#x26;&#x26; value.constructor.prototype === value)) {
  return value.<span class="apidocCodeKeywordSpan">inspect</span>(recurseTimes);
}

// Primitive types cannot have properties
var primitive = formatPrimitive(ctx, value);
if (primitive) {
  return primitive;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isArray" id="apidoc.element.phantomas.util.isArray">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isArray
        <span class="apidocSignatureSpan">(ar)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isArray(ar) {
  return Array.isArray(ar) ||
         (typeof ar === &#x27;object&#x27; &#x26;&#x26; objectToString(ar) === &#x27;[object Array]&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (!parseInt(option)) {
			reporterOptions[option] = true;
		}
	});

	debug(&#x27;Setting up %s reporter (options: %j)...&#x27;, reporterName, reporterOptions);

	if (Array.<span class="apidocCodeKeywordSpan">isArray</span>(results)) {
		debug(&#x27;Multiple runs mode&#x27;);
		inMultipleMode = true;
	}

	try {
		reporter = new(_requireReporter(reporterName))(results, reporterOptions, options);
	} catch (ex) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isDate" id="apidoc.element.phantomas.util.isDate">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isDate
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isDate(d) {
  return typeof d === &#x27;object&#x27; &#x26;&#x26; objectToString(d) === &#x27;[object Date]&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isError" id="apidoc.element.phantomas.util.isError">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isError
        <span class="apidocSignatureSpan">(e)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isError(e) {
  return typeof e === &#x27;object&#x27; &#x26;&#x26; objectToString(e) === &#x27;[object Error]&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.isRegExp" id="apidoc.element.phantomas.util.isRegExp">
        function <span class="apidocSignatureSpan">phantomas.util.</span>isRegExp
        <span class="apidocSignatureSpan">(re)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isRegExp(re) {
  return typeof re === &#x27;object&#x27; &#x26;&#x26; objectToString(re) === &#x27;[object RegExp]&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.log" id="apidoc.element.phantomas.util.log">
        function <span class="apidocSignatureSpan">phantomas.util.</span>log
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (msg) {
  exports.puts(timestamp() + &#x27; - &#x27; + msg.toString());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
program.setConfigFile(&#x27;config&#x27;);

// parse it
options = program.parse(process.argv);

// show version number
if (options.version === true) {
	console.<span class="apidocCodeKeywordSpan">log</span>(&#x27;phantomas v%s&#x27;, phantomas.version);
	process.exit(0);
}

// show help
if (options.help === true) {
	program.showHelp();
	process.exit(0);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.p" id="apidoc.element.phantomas.util.p">
        function <span class="apidocSignatureSpan">phantomas.util.</span>p
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">p = function () {
  if (!pWarning) {
    pWarning = &#x27;util.p will be removed in future versions of Node. &#x27; +
               &#x27;Use util.puts(util.inspect()) instead.\n&#x27;;
    exports.error(pWarning);
  }
  for (var i = 0, len = arguments.length; i &#x3c; len; ++i) {
    error(exports.inspect(arguments[i]));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.print" id="apidoc.element.phantomas.util.print">
        function <span class="apidocSignatureSpan">phantomas.util.</span>print
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">print = function () {
  for (var i = 0, len = arguments.length; i &#x3c; len; ++i) {
    process.stdout.write(String(arguments[i]));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.pump" id="apidoc.element.phantomas.util.pump">
        function <span class="apidocSignatureSpan">phantomas.util.</span>pump
        <span class="apidocSignatureSpan">(readStream, writeStream, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pump = function (readStream, writeStream, callback) {
  var callbackCalled = false;

  function call(a, b, c) {
    if (callback &#x26;&#x26; !callbackCalled) {
      callback(a, b, c);
      callbackCalled = true;
    }
  }

  readStream.addListener(&#x27;data&#x27;, function(chunk) {
    if (writeStream.write(chunk) === false) readStream.pause();
  });

  writeStream.addListener(&#x27;drain&#x27;, function() {
    readStream.resume();
  });

  readStream.addListener(&#x27;end&#x27;, function() {
    writeStream.end();
  });

  readStream.addListener(&#x27;close&#x27;, function() {
    call();
  });

  readStream.addListener(&#x27;error&#x27;, function(err) {
    writeStream.end();
    call(err);
  });

  writeStream.addListener(&#x27;error&#x27;, function(err) {
    readStream.destroy();
    call(err);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.phantomas.util.puts" id="apidoc.element.phantomas.util.puts">
        function <span class="apidocSignatureSpan">phantomas.util.</span>puts
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">puts = function () {
  for (var i = 0, len = arguments.length; i &#x3c; len; ++i) {
    process.stdout.write(arguments[i] + &#x27;\n&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


var pWarning;

exports.p = function() {
  if (!pWarning) {
    pWarning = &#x27;util.p will be removed in future versions of Node. &#x27; +
               &#x27;Use util.<span class="apidocCodeKeywordSpan">puts</span>(util.inspect()) instead.\n&#x27;;
    exports.error(pWarning);
  }
  for (var i = 0, len = arguments.length; i &#x3c; len; ++i) {
    error(exports.inspect(arguments[i]));
  }
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.waitForEvent" id="apidoc.module.phantomas.waitForEvent">module phantomas.waitForEvent</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.waitForEvent.module" id="apidoc.element.phantomas.waitForEvent.module">
        function <span class="apidocSignatureSpan">phantomas.waitForEvent.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// e.g. --wait-for-event &#x22;done&#x22;
	var eventName = phantomas.getParam(&#x27;wait-for-event&#x27;);

	if (typeof eventName !== &#x27;string&#x27;) {
		return;
	}

	phantomas.log(&#x27;Waiting for event: will wait for &#x22;%s&#x22; event&#x27;, eventName);

	phantomas.reportQueuePush(function(done) {
		phantomas.on(eventName, done);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.waitForSelector" id="apidoc.module.phantomas.waitForSelector">module phantomas.waitForSelector</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.waitForSelector.module" id="apidoc.element.phantomas.waitForSelector.module">
        function <span class="apidocSignatureSpan">phantomas.waitForSelector.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// e.g. --wait-for-selector &#x22;body.loaded&#x22;
	var selector = phantomas.getParam(&#x27;wait-for-selector&#x27;);

	if (typeof selector !== &#x27;string&#x27;) {
		return;
	}

	phantomas.log(&#x27;Selector: will wait for &#x22;%s&#x22; selector&#x27;, selector);

	phantomas.reportQueuePush(function(done) {
		phantomas.on(&#x27;loadFinished&#x27;, function() {
			var intervalId,
				pollFn;

			phantomas.log(&#x27;Selector: starting polling of &#x22;%s&#x22; selector&#x27;, selector);

			pollFn = function() {
				var res = checkSelector(phantomas, selector);

				// complete when selector is found or DOM exception is thrown
				if (res === true || typeof res === &#x27;string&#x27;) {
					clearInterval(intervalId);
					done();
				}
			};

			intervalId = setInterval(pollFn, 200);
			pollFn();
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.webkit" id="apidoc.module.phantomas.webkit">module phantomas.webkit</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.webkit.getUserAgent" id="apidoc.element.phantomas.webkit.getUserAgent">
        function <span class="apidocSignatureSpan">phantomas.webkit.</span>getUserAgent
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserAgent = function () {
		return &#x27;PhantomJS/&#x27; + pkg.version
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				engine = this.getEngine(key);
			}
		}, this);
	}

	// customize user agent
	if (typeof this.options[&#x27;user-agent&#x27;] === &#x27;undefined&#x27;) {
		this.options[&#x27;user-agent&#x27;] = &#x22;phantomas/&#x22; + VERSION + &#x22; (&#x22; + engine.<span class="apidocCodeKeywordSpan
">getUserAgent</span>() + &#x22;; &#x22; + process.platform + &#x22; &#x22; + process.arch + &#x22;)&#x22;;
	}

	// build engine specific command-line arguments
	var engineArgs = [];

	Object.keys(this.options).forEach(function(key) {
		var val = this.options[key],
...</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.phantomas.windowPerformance" id="apidoc.module.phantomas.windowPerformance">module phantomas.windowPerformance</a></h1>


    <h2>
        <a href="#apidoc.element.phantomas.windowPerformance.module" id="apidoc.element.phantomas.windowPerformance.module">
        function <span class="apidocSignatureSpan">phantomas.windowPerformance.</span>module
        <span class="apidocSignatureSpan">(phantomas)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (phantomas) {
	// times below are calculated relative to performance.timing.responseEnd (#117)
	phantomas.setMetric(&#x27;domInteractive&#x27;); // @desc time it took to parse the HTML and construct the DOM
	phantomas.setMetric(&#x27;domContentLoaded&#x27;); // @desc time it took to construct both DOM and CSSOM, no stylesheets that are blocking
 JavaScript execution (i.e. onDOMReady)
	phantomas.setMetric(&#x27;domContentLoadedEnd&#x27;); // @desc time it took to finish handling of onDOMReady event @unreliable
	phantomas.setMetric(&#x27;domComplete&#x27;); // @desc time it took to load all page resources, the loading spinner has stopped spinning

	// backend vs frontend time
	phantomas.setMetric(&#x27;timeBackend&#x27;); // @desc time to the first byte compared to the total loading time [%]
	phantomas.setMetric(&#x27;timeFrontend&#x27;); // @desc time to window.load compared to the total loading time [%]

	// measure dom... metrics from the moment HTML response was fully received
	var responseEndTime = Date.now();

	phantomas.on(&#x27;responseEnd&#x27;, function() {
		responseEndTime = Date.now();
		phantomas.log(&#x27;Performance timing: responseEnd = %d&#x27;, responseEndTime);
	});

	phantomas.once(&#x27;init&#x27;, function() {
		phantomas.evaluate(function(responseEndTime) {
			(function(phantomas) {
				phantomas.spyEnabled(false, &#x27;installing window.performance metrics&#x27;);

				// extend window.performance
				// &#x22;init&#x22; event is sometimes fired twice, pass a value set by &#x22;responseEnd&#x22; event handler (fixes #192)
				if (typeof window.performance === &#x27;undefined&#x27;) {
					window.performance = {
						timing: {
							responseEnd: responseEndTime
						}
					};

					phantomas.log(&#x27;Performance timing: emulating window.performance&#x27;);
				} else {
					phantomas.log(&#x27;Performance timing: using native window.performance&#x27;);
				}

				// onDOMReady
				document.addEventListener(&#x22;DOMContentLoaded&#x22;, function() {
					var time = Date.now() - responseEndTime;

					phantomas.setMetric(&#x27;domContentLoaded&#x27;, time, true);
					phantomas.log(&#x27;Performance timing: document reached &#x22;DOMContentLoaded&#x22; state after %d ms&#x27;, time);

					setTimeout(function() {
						// use NavigationTiming if possible
						var time = window.performance.timing.domContentLoadedEventEnd ?
							(window.performance.timing.domContentLoadedEventEnd - window.performance.timing.responseEnd) :
							(Date.now() - responseEndTime);

						phantomas.setMetric(&#x27;domContentLoadedEnd&#x27;, time, true);
						phantomas.log(&#x27;Performance timing: document reached &#x22;DOMContentLoadedEnd&#x22; state after %d ms&#x27;, time);
					}, 0);
				});

				// emulate Navigation Timing
				document.addEventListener(&#x27;readystatechange&#x27;, function() {
					var readyState = document.readyState,
						responseEndTime = window.performance.timing.responseEnd,
						time = Date.now() - responseEndTime,
						metricName;

					// @see http://www.w3.org/TR/html5/dom.html#documentreadystate
					switch (readyState) {
						// the browser has finished parsing all of the HTML and DOM construction is complete
						case &#x27;interactive&#x27;:
							metricName = &#x27;domInteractive&#x27;;
							break;

							// the processing is complete and all of the resources on the page have finished downloading
						case &#x27;complete&#x27;:
							metricName = &#x27;domComplete&#x27;;
							phantomas.log(&#x27;Performance timing: %j&#x27;, window.performance.timing);
							break;

						default:
							phantomas.log(&#x27;Performance timing: unhandled &#x22;%s&#x22; state!&#x27;, readyState);
							return;
					}

					phantomas.setMetric(metricName, time, true);

					phantomas.log(&#x27;Performance timing: document reached &#x22;%s&#x22; state after %d ms&#x27;, readyState, time);
				});

				phantomas.spyEnabled(true);
			})(window.__phantomas);
		}, responseEndTime);
	});

	<span class="apidocCodeCommentSpan">/**
	 * Emit metrics with backend vs frontend time
	 *
	 * Performance Golden Rule:
	 * &#x22;80-90% of the end-user response time is spent on the frontend. Start there.&#x22;
	 *
	 * @see http://www.stevesouders.com/blog/2012/02/10/the-performance-golden-rule/
	 */
</span>	phantomas.on(&#x27;report&#x27;, function() {
		//  The backend time is the time it takes the server to get the first byte back to the client.
		//  The frontend ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
